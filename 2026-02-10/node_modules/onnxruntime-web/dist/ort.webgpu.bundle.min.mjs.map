{"version":3,"sources":["../../common/lib/backend-impl.ts","../../common/lib/backend.ts","../../common/lib/version.ts","../../common/lib/env-impl.ts","../../common/lib/env.ts","../../common/lib/tensor-conversion-impl.ts","../../common/lib/tensor-factory-impl.ts","../../common/lib/tensor-impl-type-mapping.ts","../../common/lib/tensor-utils-impl.ts","../../common/lib/tensor-impl.ts","../../common/lib/tensor.ts","../../common/lib/trace.ts","../../common/lib/inference-session-impl.ts","../../common/lib/inference-session.ts","../../common/lib/tensor-conversion.ts","../../common/lib/tensor-factory.ts","../../common/lib/onnx-model.ts","../../common/lib/onnx-value.ts","../../common/lib/index.ts","../lib/wasm/wasm-utils-env.ts","../lib/wasm/proxy-worker/main.ts","ort-wasm-simd-threaded.asyncify.mjs","../lib/wasm/wasm-utils-import.ts","../lib/wasm/wasm-factory.ts","../lib/wasm/wasm-utils.ts","../lib/wasm/run-options.ts","../lib/wasm/session-options.ts","../lib/wasm/wasm-common.ts","../lib/wasm/wasm-utils-load-file.ts","../lib/wasm/jsep/tensor-view.ts","../lib/wasm/jsep/log.ts","../lib/wasm/jsep/webnn/tensor-manager.ts","../lib/wasm/jsep/backend-webnn.ts","../lib/wasm/wasm-core-impl.ts","../lib/wasm/proxy-wrapper.ts","../lib/wasm/session-handler-inference.ts","../lib/backend-wasm.ts","../lib/index.ts","../lib/version.ts"],"names":["backends","backendsSortedByPriority","registerBackend","tryResolveAndInitializeBackend","resolveBackendAndExecutionProviders","init_backend_impl","__esmMin","name","backend","priority","currentBackend","i","backendName","backendInfo","isInitializing","e","options","eps","backendHints","backendNames","errors","availableBackendNames","resolveResult","err","filteredEps","target","prop","init_backend","version","init_version","logLevelValue","env","init_env_impl","value","init_env","tensorToDataURL","tensorToImageData","init_tensor_conversion_impl","tensor","canvas","pixels2DContext","width","height","inputformat","norm","normMean","normBias","stride","rTensorPointer","gTensorPointer","bTensorPointer","aTensorPointer","R","G","B","A","image","channels","step","rImagePointer","gImagePointer","bImagePointer","aImagePointer","bufferToTensor","tensorFromImage","tensorFromTexture","tensorFromGpuBuffer","tensorFromMLTensor","tensorFromPinnedBuffer","init_tensor_factory_impl","init_tensor_impl","buffer","outputformat","float32Data","Tensor","isHTMLImageEle","isImageDataEle","isImageBitmap","isString","data","bufferToTensorOptions","createCanvas","createCanvasContext","tempCanvas","resolve","reject","context","newImage","img","texture","download","dispose","dims","gpuBuffer","dataType","mlTensor","type","NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP","NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP","isTypedArrayChecked","checkTypedArray","init_tensor_impl_type_mapping","isBigInt64ArrayAvailable","isBigUint64ArrayAvailable","Float16Array","isFloat16ArrayAvailable","calculateSize","tensorReshape","init_tensor_utils_impl","size","dim","arg0","arg1","arg2","expectedTypedArrayConstructor","maybeDims","typedArrayConstructor","firstElementType","mappedType","releaseData","init_tensor","TRACE","TRACE_FUNC","TRACE_FUNC_BEGIN","TRACE_FUNC_END","TRACE_EVENT_BEGIN","TRACE_EVENT_END","init_trace","deviceType","label","msg","extraMsg","stack","hasTraceFunc","InferenceSession","init_inference_session_impl","_InferenceSession","handler","feeds","fetches","isFetchesEmpty","isFetches","arg1Keys","results","returnValue","key","result","arg3","filePathOrUint8Array","byteOffset","byteLength","optionsWithValidatedEPs","init_inference_session","init_tensor_conversion","init_tensor_factory","init_onnx_model","init_onnx_value","esm_exports","__export","init_esm","init_wasm_utils_env","main_exports","main_default","WORKER_NAME","isProxyWorker","init_main","init_wasm_core_impl","init_wasm_factory","init_wasm_utils_import","ev","message","initializeWebAssembly","initRuntime","epName","initEp","bufferData","copyFromExternalBuffer","model","createSession","sessionMetadata","releaseSession","sessionId","inputIndices","inputs","outputIndices","run","outputs","o","extractTransferableBuffers","endProfiling","urlOverride","scriptSrc","ort_wasm_simd_threaded_asyncify_exports","ort_wasm_simd_threaded_asyncify_default","t","n","a","r","$r","Hr","u","c","s","f","S","l","d","m","h","p","v","g","b","w","y","x","ue","O","_","Ro","z","Eo","E","Ya","Ha","Ia","ae","Mr","da","ce","Pr","Wa","T","C","M","P","U","k","D","I","W","L","zi","$","Ni","de","he","we","ye","xe","Se","Ae","Be","Te","Ce","Ue","ke","De","Ie","We","_e","Le","$e","Ge","ze","Fe","Ve","Ne","Ye","Ke","er","cr","fr","lr","dr","pr","Ar","Br","Or","Er","Ur","kr","Dr","Ir","Xr","tt","nr","nt","at","it","ot","ut","ct","st","ft","lt","dt","mt","ht","pt","vt","yt","xt","St","At","Tt","Ct","Et","kt","Dt","It","Mt","Wt","_t","Lt","Ot","$t","Gt","Ht","qt","Yt","jt","hn","pn","gn","bn","wn","yn","xn","Sn","An","Bn","On","Tn","Cn","Mn","Un","kn","J","Dn","In","Wn","Ln","Mo","xo","Co","yo","fo","ji","Hi","Yi","ao","go","uo","Zi","bo","So","vo","To","Oo","lo","po","mo","co","wo","Xi","Qi","qi","Po","Ki","no","Ji","eo","io","so","Ao","oo","Bo","to","ro","ho","$n","Z","Gn","zn","Fn","Vn","Nn","Yn","Hn","qn","jn","Xn","Zn","Qn","Jn","Kn","ea","ra","ta","na","aa","oa","ua","ca","sa","fa","_r","re","la","ma","ha","pa","va","ga","ba","wa","ya","xa","Sa","Aa","Ba","Oa","Ta","Ca","Ma","Pa","Ea","Ra","Ua","ka","Da","_a","La","$a","Ga","za","Fa","Va","Na","qa","ja","Xa","Za","Qa","Ja","Ka","ei","ri","ti","ni","ai","ii","oi","ui","ci","si","fi","li","di","mi","hi","pi","vi","gi","bi","wi","yi","xi","Si","Ai","Bi","Oi","Ti","Ci","Mi","Pi","Ei","Ri","Ui","ki","Di","Ii","Wi","_i","Li","$i","Gi","F","V","N","Y","H","q","K","oe","ie","ee","te","j","X","Q","ne","Tr","se","fe","le","ge","pe","ve","me","be","Oe","Me","Pe","Ee","Re","He","qe","je","Xe","Ze","Qe","Je","rr","tr","ar","ir","or","ur","sr","mr","hr","vr","gr","br","wr","yr","xr","Sr","Cr","Rr","Vi","Fi","Wr","zr","Lr","Nr","Gr","Fr","Vr","Yr","qr","jr","Zr","Qr","Jr","Kr","et","rt","gt","bt","wt","Bt","Pt","Rt","Ut","zt","Ft","Vt","Nt","Xt","Zt","Qt","Jt","Kt","en","rn","tn","nn","an","on","un","cn","sn","fn","ln","dn","mn","vn","Pn","En","Rn","_n","ia","init_ort_wasm_simd_threaded_asyncify","origin","isEsmImportMetaUrlHardcodedAsFileUri","getScriptSrc","inferWasmPathPrefixFromScriptSrc","isSameOrigin","normalizeUrl","fallbackUrl","preload","dynamicImportDefault","createProxyWorker","importProxyWorker","embeddedWasmModule","importWasmModule","URL2","filename","prefixOverride","baseUrl","absoluteUrl","blob","url","isMultiThreaded","isWasmOverridden","useEmbeddedModule","wasmModuleFilename","wasmModuleUrl","needPreload","wasm","initialized","initializing","aborted","isMultiThreadSupported","isSimdSupported","isRelaxedSimdSupported","getInstance","flags","timeout","numThreads","multiThreadSupported","wasmPaths","wasmPrefixOverride","mjsPathOverrideFlag","mjsPathOverride","wasmPathOverrideFlag","wasmPathOverride","wasmBinaryOverride","objectUrl","ortWasmFactory","isTimeout","tasks","config","fileName","inferredWasmPathPrefix","module","what","allocWasmString","iterateExtraOptions","checkLastError","init_wasm_utils","allocs","dataLength","dataOffset","prefix","seen","ptrSize","paramsOffset","errorCode","errorMessagePointer","errorMessage","setRunOptions","init_run_options","runOptionsHandle","runOptions","tagDataOffset","keyDataOffset","valueDataOffset","alloc","getGraphOptimzationLevel","getExecutionMode","appendDefaultOptions","appendSessionConfig","appendEpOption","setExecutionProviders","setSessionOptions","init_session_options","graphOptimizationLevel","executionMode","session","ep","sessionOptionsHandle","epOptions","sessionOptions","executionProviders","customDevice","webgpuOptions","enableGraphCapture","names","info","deviceId","instanceHandle","deviceHandle","epNameDataOffset","epOptionsCount","keysOffset","valuesOffset","logIdDataOffset","logSeverityLevel","logVerbosityLevel","optimizedModelFilePathOffset","nameOffset","tensorDataTypeStringToEnum","tensorDataTypeEnumToString","calculateTensorSizeInBytes","tensorTypeToTypedArrayConstructor","logLevelStringToEnum","isGpuBufferSupportedType","isMLTensorSupportedType","dataLocationStringToEnum","init_wasm_common","typeProto","dateType","dimsOrSize","elementSize","logLevel","location","loadFile","init_wasm_utils_load_file","file","readFile","createReadStream","stream","chunks","chunk","response","contentLengthHeader","fileSize","reader","pages","offset","done","chunkSize","createView","init_tensor_view","dataBuffer","logLevelPrefix","doLog","configLogLevel","debug","configureLogger","LOG","LOG_DEBUG","init_log","level","$configLogLevel","$debug","messageLevel","configLevel","args","webnnDataTypeToSize","convertDataToInt32","convertInt32ToData","tensorGuid","createNewTensorId","webnnDataTypeToFallback","calculateByteLength","TensorWrapper","TensorIdTracker","TensorManagerImpl","createTensorManager","init_tensor_manager","dataTypeSize","bytesPerElement","numElements","originalArray","int32Array","bigInt64Array","bigUint64Array","int8Array","uint32Array","shape","descriptor","fallbackDataType","dstBuffer","originalData","isConverted","tensorManager","wrapper","copyOld","opLimits","usage","newData","dstData","tensorId","tensorTracker","writable","readable","index","tensorWrapper","backend_webnn_exports","WebNNBackend","onnxDataTypeToWebnnDataType","compareMLContextOptions","init_backend_webnn","aKeys","bKeys","tensorIds","optionsOrDevice","mlContextIndex","entry","mlContext","sessionIds","onnxDataType","dimensions","webnnDataType","id","externalFilePath","builder","desc","mountedFiles","shouldConvertInt64ToInt32","filePath","fileData","bufferView","int32Buffer","inputName","outputName","inputNames","outputNames","isInput","initOrt","activeSessions","getSessionInputOutputCount","getSessionInputOutputMetadata","prepareInputOutputTensor","loggingLevel","webgpuAdapter","powerPreference","forceFallbackAdapter","device","sessionHandle","metadataOffset","elementType","dimsCount","symbolicDimNameOffset","modelDataOffset","modelData","modelDataLength","ioBindingHandle","inputNamesUTF8Encoded","outputNamesUTF8Encoded","loadingPromises","path","provider","webnnOptions","gpuDevice","inputCount","outputCount","inputMetadata","outputMetadata","outputPreferredLocations","nameString","isGraphOutput","bindingState","buf","ioBindingState","tensorHandles","tensorNameUTF8Encoded","actualLocation","rawData","dataByteLength","registerBuffer","registerMLTensor","isGraphInput","tensorName","dataTypeEnum","createTemporaryTensor","uploadTensor","dimsOffset","inputTensors","outputTensors","inputOutputBound","runOptionsAllocs","inputTensorHandles","outputTensorHandles","inputOutputAllocs","preAllocatedOutputs","beforeRunStack","inputValuesOffset","inputNamesOffset","outputValuesOffset","outputNamesOffset","handle","outputPreferredLocationsEncoded","output","outputPromises","beforeGetTensorDataStack","tensorDataOffset","keepOutputTensor","valueType","dimsLength","preferredLocation","stringData","nextOffset","maxBytesToRead","getBuffer","bufferSize","downloadDataFunction","arrayBuffer","ensureTensor","isGraphInputOutputTypeSupported","profileFileName","tensors","buffers","isProxy","proxyWorker","temporaryObjectUrl","initWasmCallbacks","queuedCallbacks","enqueueCallbacks","ensureWorker","onProxyWorkerMessage","initializeWebAssemblyAndOrtRuntime","initializeOrtEp","init_proxy_wrapper","callbacks","queue","worker","transferable","serializableInputs","encodeTensorMetadata","decodeTensorMetadata","OnnxruntimeWebAssemblySessionHandler","init_session_handler_inference","getName","pathOrBuffer","inputArray","kvp","outputArray","resultMap","backend_wasm_exports","OnnxruntimeWebAssemblyBackend","initializeFlags","wasmBackend","init_backend_wasm","simd","numCpuLogicalCores","index_default"],"mappings":"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AAG,GAAGC,GAAG,GAAGC,GAAG,GAAGC,GAAG,GAAGC,GAAG,GAAGC,GAAG,GAAGC,GAAG,GAAGC,GAAG,GAAGC,GAAG,GAAGC,GAAG,GAAGC,GAAG,GAAGC,GAAG,GAAGC,GAAG,GAAGC,GAAG,GAAGC,GAAG,GAAGC,GAAG,EAAEC,GAAG,EAAEC,GAAG,GAAGC,GAAG,GAAGC,GAAG,GAAGC,GAAG,GAAGC,GAAG,GAAGC,GAAG,GAAGC,GAAG,GAAGC,GAAG,GAAGC,GAAG,GAAGvD,GAAG,GAAGwD,GAAG,EAAEC,GAAG,EAAEC,GAAG,EAAEC,GAAG,GAAGC,GAAG,EAAEC,GAAG,EAAEC,GAAG,EAAEC,GAAG,EAAEC,GAAG,EAAEC,GAAG,GAAGC,GAAG,EAAEC,GAAG,EAAEC,GAAG,EAAEC,GAAG,EAAEC,GAAG,EAAEC,GAAG,EAAEC,GAAG,GAAGC,GAAG,GAAGC,GAAG,GAAGC,GAAG,GAAGC,GAAG,GAAGC,GAAG,GAAGC,GAAG,GAAGC,GAAG,GAAGC,GAAG,EAAEC,GAAG,GAAGC,GAAG,GAAGC,GAAG,GAAGC,GAAG,EAAEC,GAAG,GAAGC,GAAG,GAAGC,GAAG,EAAEC,GAAG,GAAGC,GAAG,EAAEC,GAAG,GAAGC,GAAG,GAAGC,GAAG,GAAGC,GAAG,GAAGC,GAAG,GAAGC,GAAG,EAAEC,GAAG,GAAGC,GAAG,GAAGC,GAAG,GAAGC,GAAG,EAAEC,GAAG,EAAEC,GAAG,GAAGC,GAAG,GAAGC,GAAG,GAAGC,GAAG,GAAGC,GAAG,GAAGC,GAAG,GAAGC,GAAG,GAAGC,GAAG,GAAGC,GAAG,GAAGC,GAAG,GAAGC,GAAE,GAAGC,GAAG,GAAGC,GAAG,GAAGC,GAAG,GAAGC,GAAG,GAAGC,GAAG,GAAGC,GAAG,GAAGC,GAAG,GAAGC,GAAG,EAAEC,GAAG,EAAEC,GAAG,EAAEC,GAAG,EAAEC,GAAG,EAAEC,GAAG,GAAGC,GAAG,EAAEC,GAAG,EAAEC,GAAG,GAAGC,GAAG,GAAGC,GAAG,GAAGC,GAAG,GAAGC,GAAG,GAAGC,GAAG,GAAGC,GAAG,GAAGC,GAAG,GAAGC,GAAG,EAAEC,GAAG,GAAGC,GAAG,EAAEC,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","sourcesContent":["// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\n\nimport { Backend } from './backend.js';\nimport { InferenceSession } from './inference-session.js';\n\ninterface BackendInfo {\n  backend: Backend;\n  priority: number;\n\n  initPromise?: Promise<void>;\n  initialized?: boolean;\n  aborted?: boolean;\n  error?: string;\n}\n\nconst backends: Map<string, BackendInfo> = new Map();\nconst backendsSortedByPriority: string[] = [];\n\n/**\n * Register a backend.\n *\n * @param name - the name as a key to lookup as an execution provider.\n * @param backend - the backend object.\n * @param priority - an integer indicating the priority of the backend. Higher number means higher priority. if priority\n * < 0, it will be considered as a 'beta' version and will not be used as a fallback backend by default.\n *\n * @ignore\n */\nexport const registerBackend = (name: string, backend: Backend, priority: number): void => {\n  if (backend && typeof backend.init === 'function' && typeof backend.createInferenceSessionHandler === 'function') {\n    const currentBackend = backends.get(name);\n    if (currentBackend === undefined) {\n      backends.set(name, { backend, priority });\n    } else if (currentBackend.priority > priority) {\n      // same name is already registered with a higher priority. skip registeration.\n      return;\n    } else if (currentBackend.priority === priority) {\n      if (currentBackend.backend !== backend) {\n        throw new Error(`cannot register backend \"${name}\" using priority ${priority}`);\n      }\n    }\n\n    if (priority >= 0) {\n      const i = backendsSortedByPriority.indexOf(name);\n      if (i !== -1) {\n        backendsSortedByPriority.splice(i, 1);\n      }\n\n      for (let i = 0; i < backendsSortedByPriority.length; i++) {\n        if (backends.get(backendsSortedByPriority[i])!.priority <= priority) {\n          backendsSortedByPriority.splice(i, 0, name);\n          return;\n        }\n      }\n      backendsSortedByPriority.push(name);\n    }\n    return;\n  }\n\n  throw new TypeError('not a valid backend');\n};\n\n/**\n * Try to resolve and initialize a backend.\n *\n * @param backendName - the name of the backend.\n * @returns the backend instance if resolved and initialized successfully, or an error message if failed.\n */\nconst tryResolveAndInitializeBackend = async (backendName: string): Promise<Backend | string> => {\n  const backendInfo = backends.get(backendName);\n  if (!backendInfo) {\n    return 'backend not found.';\n  }\n\n  if (backendInfo.initialized) {\n    return backendInfo.backend;\n  } else if (backendInfo.aborted) {\n    return backendInfo.error!;\n  } else {\n    const isInitializing = !!backendInfo.initPromise;\n    try {\n      if (!isInitializing) {\n        backendInfo.initPromise = backendInfo.backend.init(backendName);\n      }\n      await backendInfo.initPromise;\n      backendInfo.initialized = true;\n      return backendInfo.backend;\n    } catch (e) {\n      if (!isInitializing) {\n        backendInfo.error = `${e}`;\n        backendInfo.aborted = true;\n      }\n      return backendInfo.error!;\n    } finally {\n      delete backendInfo.initPromise;\n    }\n  }\n};\n\n/**\n * Resolve execution providers from the specific session options.\n *\n * @param options - the session options object.\n * @returns a promise that resolves to a tuple of an initialized backend instance and a session options object with\n * filtered EP list.\n *\n * @ignore\n */\nexport const resolveBackendAndExecutionProviders = async (\n  options: InferenceSession.SessionOptions,\n): Promise<[backend: Backend, options: InferenceSession.SessionOptions]> => {\n  // extract backend hints from session options\n  const eps = options.executionProviders || [];\n  const backendHints = eps.map((i) => (typeof i === 'string' ? i : i.name));\n  const backendNames = backendHints.length === 0 ? backendsSortedByPriority : backendHints;\n\n  // try to resolve and initialize all requested backends\n  let backend: Backend | undefined;\n  const errors = [];\n  const availableBackendNames = new Set<string>();\n  for (const backendName of backendNames) {\n    const resolveResult = await tryResolveAndInitializeBackend(backendName);\n    if (typeof resolveResult === 'string') {\n      errors.push({ name: backendName, err: resolveResult });\n    } else {\n      if (!backend) {\n        backend = resolveResult;\n      }\n      if (backend === resolveResult) {\n        availableBackendNames.add(backendName);\n      }\n    }\n  }\n\n  // if no backend is available, throw error.\n  if (!backend) {\n    throw new Error(`no available backend found. ERR: ${errors.map((e) => `[${e.name}] ${e.err}`).join(', ')}`);\n  }\n\n  // for each explicitly requested backend, if it's not available, output warning message.\n  for (const { name, err } of errors) {\n    if (backendHints.includes(name)) {\n      // eslint-disable-next-line no-console\n      console.warn(\n        `removing requested execution provider \"${name}\" from session options because it is not available: ${err}`,\n      );\n    }\n  }\n\n  const filteredEps = eps.filter((i) => availableBackendNames.has(typeof i === 'string' ? i : i.name));\n\n  return [\n    backend,\n    new Proxy(options, {\n      get: (target, prop) => {\n        if (prop === 'executionProviders') {\n          return filteredEps;\n        }\n        return Reflect.get(target, prop);\n      },\n    }),\n  ];\n};\n","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\n\nimport { InferenceSession } from './inference-session.js';\nimport { OnnxValue } from './onnx-value.js';\n\n/**\n * @ignore\n */\nexport declare namespace SessionHandler {\n  type FeedsType = { [name: string]: OnnxValue };\n  type FetchesType = { [name: string]: OnnxValue | null };\n  type ReturnType = { [name: string]: OnnxValue };\n}\n\n/**\n * Represents shared SessionHandler functionality\n *\n * @ignore\n */\ninterface SessionHandler {\n  dispose(): Promise<void>;\n\n  readonly inputNames: readonly string[];\n  readonly outputNames: readonly string[];\n\n  readonly inputMetadata: readonly InferenceSession.ValueMetadata[];\n  readonly outputMetadata: readonly InferenceSession.ValueMetadata[];\n}\n\n/**\n * Represent a handler instance of an inference session.\n *\n * @ignore\n */\nexport interface InferenceSessionHandler extends SessionHandler {\n  startProfiling(): void;\n  endProfiling(): void;\n\n  run(\n    feeds: SessionHandler.FeedsType,\n    fetches: SessionHandler.FetchesType,\n    options: InferenceSession.RunOptions,\n  ): Promise<SessionHandler.ReturnType>;\n}\n\n/**\n * Represent a backend that provides implementation of model inferencing.\n *\n * @ignore\n */\nexport interface Backend {\n  /**\n   * Initialize the backend asynchronously. Should throw when failed.\n   */\n  init(backendName: string): Promise<void>;\n\n  createInferenceSessionHandler(\n    uriOrBuffer: string | Uint8Array,\n    options?: InferenceSession.SessionOptions,\n  ): Promise<InferenceSessionHandler>;\n}\n\nexport { registerBackend } from './backend-impl.js';\n","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\n\n// This file is generated by /js/scripts/update-version.ts\n// Do not modify file content manually.\n\nexport const version = '1.24.0-dev.20251116-b39e144322';\n","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\n\nimport { Env } from './env.js';\nimport { version } from './version.js';\n\ntype LogLevelType = Env['logLevel'];\n\nlet logLevelValue: Required<LogLevelType> = 'warning';\n\nexport const env: Env = {\n  wasm: {} as Env.WebAssemblyFlags,\n  webgl: {} as Env.WebGLFlags,\n  webgpu: {} as Env.WebGpuFlags,\n  versions: { common: version },\n\n  set logLevel(value: LogLevelType) {\n    if (value === undefined) {\n      return;\n    }\n    if (typeof value !== 'string' || ['verbose', 'info', 'warning', 'error', 'fatal'].indexOf(value) === -1) {\n      throw new Error(`Unsupported logging level: ${value}`);\n    }\n    logLevelValue = value;\n  },\n  get logLevel(): Required<LogLevelType> {\n    return logLevelValue;\n  },\n};\n\n// set property 'logLevel' so that they can be correctly transferred to worker by `postMessage()`.\nObject.defineProperty(env, 'logLevel', { enumerable: true });\n","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\n\nimport { env as envImpl } from './env-impl.js';\nimport { TryGetGlobalType } from './type-helper.js';\n\nexport declare namespace Env {\n  export type WasmPathPrefix = string;\n  export interface WasmFilePaths {\n    /**\n     * Specify the override path for the main .wasm file.\n     *\n     * This path should be an absolute path.\n     *\n     * If not modified, the filename of the .wasm file is:\n     * - `ort-wasm-simd-threaded.wasm` for default build\n     * - `ort-wasm-simd-threaded.jsep.wasm` for JSEP build (with WebGPU and WebNN)\n     * - `ort-wasm-simd-threaded.asyncify.wasm` for WebGPU build with Asyncify (with WebNN)\n     * - `ort-wasm-simd-threaded.jspi.wasm` for WebGPU build with JSPI support (with WebNN)\n     */\n    wasm?: URL | string;\n    /**\n     * Specify the override path for the main .mjs file.\n     *\n     * This path should be an absolute path.\n     *\n     * If not modified, the filename of the .mjs file is:\n     * - `ort-wasm-simd-threaded.mjs` for default build\n     * - `ort-wasm-simd-threaded.jsep.mjs` for JSEP build (with WebGPU and WebNN)\n     * - `ort-wasm-simd-threaded.asyncify.mjs` for WebGPU build with Asyncify (with WebNN)\n     * - `ort-wasm-simd-threaded.jspi.mjs` for WebGPU build with JSPI support (with WebNN)\n     */\n    mjs?: URL | string;\n  }\n  export type WasmPrefixOrFilePaths = WasmPathPrefix | WasmFilePaths;\n  export interface WebAssemblyFlags {\n    /**\n     * set or get number of thread(s). If omitted or set to 0, number of thread(s) will be determined by system. If set\n     * to 1, no worker thread will be spawned.\n     *\n     * This setting is available only when WebAssembly multithread feature is available in current context.\n     *\n     * @defaultValue `0`\n     */\n    numThreads?: number;\n\n    /**\n     * set a value indicating whether to enable SIMD.\n     *\n     * ONNX Runtime will perform feature detection based on the value of this property. Specifically, when the value is\n     * set to:\n     * - `undefined`, `true` or `\"fixed\"`: will check availability of Fixed-width SIMD.\n     * - `\"relaxed\"`: will check availability of Relaxed SIMD.\n     * - `false`: will not perform SIMD feature checking.\n     *\n     * Setting this property does not make ONNX Runtime to switch to the corresponding runtime automatically. User need\n     * to set `wasmPaths` or `wasmBinary` property to load the corresponding runtime.\n     *\n     * This setting is available only when WebAssembly SIMD feature is available in current context.\n     *\n     * @defaultValue `true`\n     */\n    simd?: boolean | 'fixed' | 'relaxed';\n\n    /**\n     * set or get a boolean value indicating whether to enable trace.\n     *\n     * @defaultValue `false`\n     *\n     * @deprecated Use `env.trace` instead. If `env.trace` is set, this property will be ignored.\n     */\n    trace?: boolean;\n\n    /**\n     * Set or get a number specifying the timeout for initialization of WebAssembly backend, in milliseconds. A zero\n     * value indicates no timeout is set.\n     *\n     * @defaultValue `0`\n     */\n    initTimeout?: number;\n\n    /**\n     * Set a custom URL prefix to the .wasm/.mjs files, or an object of overrides for both .wasm/.mjs file. The override\n     * path should be an absolute path.\n     */\n    wasmPaths?: WasmPrefixOrFilePaths;\n\n    /**\n     * Set a custom buffer which contains the WebAssembly binary. If this property is set, the `wasmPaths` property will\n     * be ignored.\n     */\n    wasmBinary?: ArrayBufferLike | Uint8Array;\n\n    /**\n     * Set or get a boolean value indicating whether to proxy the execution of main thread to a worker thread.\n     *\n     * @defaultValue `false`\n     */\n    proxy?: boolean;\n  }\n\n  export interface WebGLFlags {\n    /**\n     * Set or get the WebGL Context ID (webgl or webgl2).\n     *\n     * @defaultValue `'webgl2'`\n     */\n    contextId?: 'webgl' | 'webgl2';\n    /**\n     * Get the WebGL rendering context.\n     */\n    readonly context: WebGLRenderingContext;\n    /**\n     * Set or get the maximum batch size for matmul. 0 means to disable batching.\n     *\n     * @deprecated\n     */\n    matmulMaxBatchSize?: number;\n    /**\n     * Set or get the texture cache mode.\n     *\n     * @defaultValue `'full'`\n     */\n    textureCacheMode?: 'initializerOnly' | 'full';\n    /**\n     * Set or get the packed texture mode\n     *\n     * @defaultValue `false`\n     */\n    pack?: boolean;\n    /**\n     * Set or get whether enable async download.\n     *\n     * @defaultValue `false`\n     */\n    async?: boolean;\n  }\n\n  export interface WebGpuProfilingDataV1TensorMetadata {\n    dims: readonly number[];\n    dataType: string;\n  }\n  export interface WebGpuProfilingDataV1 {\n    version: 1;\n    inputsMetadata: readonly WebGpuProfilingDataV1TensorMetadata[];\n    outputsMetadata: readonly WebGpuProfilingDataV1TensorMetadata[];\n    kernelId: number;\n    kernelType: string;\n    kernelName: string;\n    programName: string;\n    startTime: number;\n    endTime: number;\n  }\n\n  export type WebGpuProfilingData = WebGpuProfilingDataV1;\n\n  export interface WebGpuFlags {\n    /**\n     * Set or get the profiling mode.\n     *\n     * @deprecated Use `env.webgpu.profiling.mode` instead. If `env.webgpu.profiling.mode` is set, this property will be\n     * ignored.\n     */\n    profilingMode?: 'off' | 'default';\n    /**\n     * Set or get the profiling configuration.\n     */\n    profiling: {\n      /**\n       * Set or get the profiling mode.\n       *\n       * @defaultValue `'off'`\n       */\n      mode?: 'off' | 'default';\n\n      /**\n       * Set or get a callback function when a profiling data is received. If not set, the profiling data will be\n       * printed to console.\n       */\n      ondata?: (data: WebGpuProfilingData) => void;\n    };\n    /**\n     * Set or get the power preference.\n     *\n     * Setting this property only has effect before the first WebGPU inference session is created. The value will be\n     * used as options for `navigator.gpu.requestAdapter()`.\n     *\n     * See {@link https://gpuweb.github.io/gpuweb/#dictdef-gpurequestadapteroptions} for more details.\n     *\n     * @defaultValue `undefined`\n     *\n     * @deprecated Create your own GPUAdapter, use it to create a GPUDevice instance and set {@link device} property if\n     * you want to use a specific power preference.\n     */\n    powerPreference?: 'low-power' | 'high-performance';\n    /**\n     * Set or get the force fallback adapter flag.\n     *\n     * Setting this property only has effect before the first WebGPU inference session is created. The value will be\n     * used as options for `navigator.gpu.requestAdapter()`.\n     *\n     * See {@link https://gpuweb.github.io/gpuweb/#dictdef-gpurequestadapteroptions} for more details.\n     *\n     * @defaultValue `undefined`\n     *\n     * @deprecated Create your own GPUAdapter, use it to create a GPUDevice instance and set {@link device} property if\n     * you want to use a specific fallback option.\n     */\n    forceFallbackAdapter?: boolean;\n    /**\n     * Set or get the adapter for WebGPU.\n     *\n     * Setting this property only has effect before the first WebGPU inference session is created. The value will be\n     * used as the GPU adapter for the underlying WebGPU backend to create GPU device.\n     *\n     * If this property is not set, it will be available to get after the first WebGPU inference session is created. The\n     * value will be the GPU adapter that created by the underlying WebGPU backend.\n     *\n     * When use with TypeScript, the type of this property is `GPUAdapter` defined in \"@webgpu/types\".\n     *\n     * @deprecated It is no longer recommended to use this property. The latest WebGPU spec adds `GPUDevice.adapterInfo`\n     * (https://www.w3.org/TR/webgpu/#dom-gpudevice-adapterinfo), which allows to get the adapter information from the\n     * device. When it's available, there is no need to set/get the {@link adapter} property.\n     */\n    adapter: TryGetGlobalType<'GPUAdapter'>;\n    /**\n     * Set or get the GPU device for WebGPU.\n     *\n     * There are 3 valid scenarios of accessing this property:\n     * - Set a value before the first WebGPU inference session is created. The value will be used by the WebGPU backend\n     * to perform calculations. If the value is not a `GPUDevice` object, an error will be thrown.\n     * - Get the value before the first WebGPU inference session is created. This will try to create a new GPUDevice\n     * instance. Returns a `Promise` that resolves to a `GPUDevice` object.\n     * - Get the value after the first WebGPU inference session is created. Returns a resolved `Promise` to the\n     * `GPUDevice` object used by the WebGPU backend.\n     */\n    get device(): Promise<TryGetGlobalType<'GPUDevice'>>;\n    set device(value: TryGetGlobalType<'GPUDevice'>);\n    /**\n     * Set or get whether validate input content.\n     *\n     * @defaultValue `false`\n     */\n    validateInputContent?: boolean;\n  }\n}\n\nexport interface Env {\n  /**\n   * set the severity level for logging.\n   *\n   * @defaultValue `'warning'`\n   */\n  logLevel?: 'verbose' | 'info' | 'warning' | 'error' | 'fatal';\n\n  /**\n   * Indicate whether run in debug mode.\n   *\n   * @defaultValue `false`\n   */\n  debug?: boolean;\n\n  /**\n   * set or get a boolean value indicating whether to enable trace.\n   *\n   * @defaultValue `false`\n   */\n  trace?: boolean;\n\n  /**\n   * Get version of the current package.\n   */\n  readonly versions: {\n    readonly common: string;\n    readonly web?: string;\n    readonly node?: string;\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    readonly 'react-native'?: string;\n  };\n\n  /**\n   * Represent a set of flags for WebAssembly\n   */\n  readonly wasm: Env.WebAssemblyFlags;\n\n  /**\n   * Represent a set of flags for WebGL\n   */\n  readonly webgl: Env.WebGLFlags;\n\n  /**\n   * Represent a set of flags for WebGPU\n   */\n  readonly webgpu: Env.WebGpuFlags;\n\n  [name: string]: unknown;\n}\n\n/**\n * Represent a set of flags as a global singleton.\n */\nexport const env: Env = envImpl;\n","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\n\nimport { TensorToDataUrlOptions, TensorToImageDataOptions } from './tensor-conversion.js';\nimport { Tensor } from './tensor.js';\n\n/**\n * implementation of Tensor.toDataURL()\n */\nexport const tensorToDataURL = (tensor: Tensor, options?: TensorToDataUrlOptions): string => {\n  const canvas = typeof document !== 'undefined' ? document.createElement('canvas') : new OffscreenCanvas(1, 1);\n  canvas.width = tensor.dims[3];\n  canvas.height = tensor.dims[2];\n  const pixels2DContext = canvas.getContext('2d') as\n    | CanvasRenderingContext2D\n    | OffscreenCanvasRenderingContext2D\n    | null;\n\n  if (pixels2DContext != null) {\n    // Default values for height and width & format\n    let width: number;\n    let height: number;\n    if (options?.tensorLayout !== undefined && options.tensorLayout === 'NHWC') {\n      width = tensor.dims[2];\n      height = tensor.dims[3];\n    } else {\n      // Default layout is NCWH\n      width = tensor.dims[3];\n      height = tensor.dims[2];\n    }\n\n    const inputformat = options?.format !== undefined ? options.format : 'RGB';\n\n    const norm = options?.norm;\n    let normMean: [number, number, number, number];\n    let normBias: [number, number, number, number];\n    if (norm === undefined || norm.mean === undefined) {\n      normMean = [255, 255, 255, 255];\n    } else {\n      if (typeof norm.mean === 'number') {\n        normMean = [norm.mean, norm.mean, norm.mean, norm.mean];\n      } else {\n        normMean = [norm.mean[0], norm.mean[1], norm.mean[2], 0];\n        if (norm.mean[3] !== undefined) {\n          normMean[3] = norm.mean[3];\n        }\n      }\n    }\n    if (norm === undefined || norm.bias === undefined) {\n      normBias = [0, 0, 0, 0];\n    } else {\n      if (typeof norm.bias === 'number') {\n        normBias = [norm.bias, norm.bias, norm.bias, norm.bias];\n      } else {\n        normBias = [norm.bias[0], norm.bias[1], norm.bias[2], 0];\n        if (norm.bias[3] !== undefined) {\n          normBias[3] = norm.bias[3];\n        }\n      }\n    }\n\n    const stride = height * width;\n    // Default pointer assignments\n    let rTensorPointer = 0,\n      gTensorPointer = stride,\n      bTensorPointer = stride * 2,\n      aTensorPointer = -1;\n\n    // Updating the pointer assignments based on the input image format\n    if (inputformat === 'RGBA') {\n      rTensorPointer = 0;\n      gTensorPointer = stride;\n      bTensorPointer = stride * 2;\n      aTensorPointer = stride * 3;\n    } else if (inputformat === 'RGB') {\n      rTensorPointer = 0;\n      gTensorPointer = stride;\n      bTensorPointer = stride * 2;\n    } else if (inputformat === 'RBG') {\n      rTensorPointer = 0;\n      bTensorPointer = stride;\n      gTensorPointer = stride * 2;\n    }\n\n    for (let i = 0; i < height; i++) {\n      for (let j = 0; j < width; j++) {\n        const R = ((tensor.data[rTensorPointer++] as number) - normBias[0]) * normMean[0]; // R value\n        const G = ((tensor.data[gTensorPointer++] as number) - normBias[1]) * normMean[1]; // G value\n        const B = ((tensor.data[bTensorPointer++] as number) - normBias[2]) * normMean[2]; // B value\n        const A = aTensorPointer === -1 ? 255 : ((tensor.data[aTensorPointer++] as number) - normBias[3]) * normMean[3]; // A value\n\n        pixels2DContext.fillStyle = 'rgba(' + R + ',' + G + ',' + B + ',' + A + ')';\n        pixels2DContext.fillRect(j, i, 1, 1);\n      }\n    }\n    if ('toDataURL' in canvas) {\n      return canvas.toDataURL();\n    } else {\n      throw new Error('toDataURL is not supported');\n    }\n  } else {\n    throw new Error('Can not access image data');\n  }\n};\n\n/**\n * implementation of Tensor.toImageData()\n */\nexport const tensorToImageData = (tensor: Tensor, options?: TensorToImageDataOptions): ImageData => {\n  const pixels2DContext =\n    typeof document !== 'undefined'\n      ? document.createElement('canvas').getContext('2d')\n      : (new OffscreenCanvas(1, 1).getContext('2d') as OffscreenCanvasRenderingContext2D);\n  let image: ImageData;\n  if (pixels2DContext != null) {\n    // Default values for height and width & format\n    let width: number;\n    let height: number;\n    let channels: number;\n    if (options?.tensorLayout !== undefined && options.tensorLayout === 'NHWC') {\n      width = tensor.dims[2];\n      height = tensor.dims[1];\n      channels = tensor.dims[3];\n    } else {\n      // Default layout is NCWH\n      width = tensor.dims[3];\n      height = tensor.dims[2];\n      channels = tensor.dims[1];\n    }\n    const inputformat = options !== undefined ? (options.format !== undefined ? options.format : 'RGB') : 'RGB';\n\n    const norm = options?.norm;\n    let normMean: [number, number, number, number];\n    let normBias: [number, number, number, number];\n    if (norm === undefined || norm.mean === undefined) {\n      normMean = [255, 255, 255, 255];\n    } else {\n      if (typeof norm.mean === 'number') {\n        normMean = [norm.mean, norm.mean, norm.mean, norm.mean];\n      } else {\n        normMean = [norm.mean[0], norm.mean[1], norm.mean[2], 255];\n        if (norm.mean[3] !== undefined) {\n          normMean[3] = norm.mean[3];\n        }\n      }\n    }\n    if (norm === undefined || norm.bias === undefined) {\n      normBias = [0, 0, 0, 0];\n    } else {\n      if (typeof norm.bias === 'number') {\n        normBias = [norm.bias, norm.bias, norm.bias, norm.bias];\n      } else {\n        normBias = [norm.bias[0], norm.bias[1], norm.bias[2], 0];\n        if (norm.bias[3] !== undefined) {\n          normBias[3] = norm.bias[3];\n        }\n      }\n    }\n\n    const stride = height * width;\n    if (options !== undefined) {\n      if (\n        (options.format !== undefined && channels === 4 && options.format !== 'RGBA') ||\n        (channels === 3 && options.format !== 'RGB' && options.format !== 'BGR')\n      ) {\n        throw new Error(\"Tensor format doesn't match input tensor dims\");\n      }\n    }\n\n    // Default pointer assignments\n    const step = 4;\n    let rImagePointer = 0,\n      gImagePointer = 1,\n      bImagePointer = 2,\n      aImagePointer = 3;\n    let rTensorPointer = 0,\n      gTensorPointer = stride,\n      bTensorPointer = stride * 2,\n      aTensorPointer = -1;\n\n    // Updating the pointer assignments based on the input image format\n    if (inputformat === 'RGBA') {\n      rTensorPointer = 0;\n      gTensorPointer = stride;\n      bTensorPointer = stride * 2;\n      aTensorPointer = stride * 3;\n    } else if (inputformat === 'RGB') {\n      rTensorPointer = 0;\n      gTensorPointer = stride;\n      bTensorPointer = stride * 2;\n    } else if (inputformat === 'RBG') {\n      rTensorPointer = 0;\n      bTensorPointer = stride;\n      gTensorPointer = stride * 2;\n    }\n\n    image = pixels2DContext.createImageData(width, height);\n\n    for (\n      let i = 0;\n      i < height * width;\n      rImagePointer += step, gImagePointer += step, bImagePointer += step, aImagePointer += step, i++\n    ) {\n      image.data[rImagePointer] = ((tensor.data[rTensorPointer++] as number) - normBias[0]) * normMean[0]; // R value\n      image.data[gImagePointer] = ((tensor.data[gTensorPointer++] as number) - normBias[1]) * normMean[1]; // G value\n      image.data[bImagePointer] = ((tensor.data[bTensorPointer++] as number) - normBias[2]) * normMean[2]; // B value\n      image.data[aImagePointer] =\n        aTensorPointer === -1 ? 255 : ((tensor.data[aTensorPointer++] as number) - normBias[3]) * normMean[3]; // A value\n    }\n  } else {\n    throw new Error('Can not access image data');\n  }\n  return image;\n};\n","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\n\nimport {\n  OptionsDimensions,\n  OptionsFormat,\n  OptionsNormalizationParameters,\n  OptionsTensorFormat,\n  OptionsTensorLayout,\n  TensorFromGpuBufferOptions,\n  TensorFromImageBitmapOptions,\n  TensorFromImageDataOptions,\n  TensorFromImageElementOptions,\n  TensorFromMLTensorOptions,\n  TensorFromTextureOptions,\n  TensorFromUrlOptions,\n} from './tensor-factory.js';\nimport { Tensor } from './tensor-impl.js';\nimport { Tensor as TensorInterface } from './tensor.js';\n\ninterface BufferToTensorOptions\n  extends OptionsDimensions,\n    OptionsTensorLayout,\n    OptionsNormalizationParameters,\n    OptionsFormat,\n    OptionsTensorFormat {}\n\n/**\n * Create a new tensor object from image object\n *\n * @param buffer - Extracted image buffer data - assuming RGBA format\n * @param imageFormat - input image configuration - required configurations height, width, format\n * @param tensorFormat - output tensor configuration - Default is RGB format\n */\nexport const bufferToTensor = (buffer: Uint8ClampedArray | undefined, options: BufferToTensorOptions): Tensor => {\n  if (buffer === undefined) {\n    throw new Error('Image buffer must be defined');\n  }\n  if (options.height === undefined || options.width === undefined) {\n    throw new Error('Image height and width must be defined');\n  }\n  if (options.tensorLayout === 'NHWC') {\n    throw new Error('NHWC Tensor layout is not supported yet');\n  }\n\n  const { height, width } = options;\n\n  const norm = options.norm ?? { mean: 255, bias: 0 };\n  let normMean: [number, number, number, number];\n  let normBias: [number, number, number, number];\n\n  if (typeof norm.mean === 'number') {\n    normMean = [norm.mean, norm.mean, norm.mean, norm.mean];\n  } else {\n    normMean = [norm.mean![0], norm.mean![1], norm.mean![2], norm.mean![3] ?? 255];\n  }\n\n  if (typeof norm.bias === 'number') {\n    normBias = [norm.bias, norm.bias, norm.bias, norm.bias];\n  } else {\n    normBias = [norm.bias![0], norm.bias![1], norm.bias![2], norm.bias![3] ?? 0];\n  }\n\n  const inputformat = options.format !== undefined ? options.format : 'RGBA';\n  // default value is RGBA since imagedata and HTMLImageElement uses it\n\n  const outputformat =\n    options.tensorFormat !== undefined ? (options.tensorFormat !== undefined ? options.tensorFormat : 'RGB') : 'RGB';\n  const stride = height * width;\n  const float32Data = outputformat === 'RGBA' ? new Float32Array(stride * 4) : new Float32Array(stride * 3);\n\n  // Default pointer assignments\n  let step = 4,\n    rImagePointer = 0,\n    gImagePointer = 1,\n    bImagePointer = 2,\n    aImagePointer = 3;\n  let rTensorPointer = 0,\n    gTensorPointer = stride,\n    bTensorPointer = stride * 2,\n    aTensorPointer = -1;\n\n  // Updating the pointer assignments based on the input image format\n  if (inputformat === 'RGB') {\n    step = 3;\n    rImagePointer = 0;\n    gImagePointer = 1;\n    bImagePointer = 2;\n    aImagePointer = -1;\n  }\n\n  // Updating the pointer assignments based on the output tensor format\n  if (outputformat === 'RGBA') {\n    aTensorPointer = stride * 3;\n  } else if (outputformat === 'RBG') {\n    rTensorPointer = 0;\n    bTensorPointer = stride;\n    gTensorPointer = stride * 2;\n  } else if (outputformat === 'BGR') {\n    bTensorPointer = 0;\n    gTensorPointer = stride;\n    rTensorPointer = stride * 2;\n  }\n\n  for (\n    let i = 0;\n    i < stride;\n    i++, rImagePointer += step, bImagePointer += step, gImagePointer += step, aImagePointer += step\n  ) {\n    float32Data[rTensorPointer++] = (buffer[rImagePointer] + normBias[0]) / normMean[0];\n    float32Data[gTensorPointer++] = (buffer[gImagePointer] + normBias[1]) / normMean[1];\n    float32Data[bTensorPointer++] = (buffer[bImagePointer] + normBias[2]) / normMean[2];\n    if (aTensorPointer !== -1 && aImagePointer !== -1) {\n      float32Data[aTensorPointer++] = (buffer[aImagePointer] + normBias[3]) / normMean[3];\n    }\n  }\n\n  // Float32Array -> ort.Tensor\n  const outputTensor =\n    outputformat === 'RGBA'\n      ? new Tensor('float32', float32Data, [1, 4, height, width])\n      : new Tensor('float32', float32Data, [1, 3, height, width]);\n  return outputTensor;\n};\n\n/**\n * implementation of Tensor.fromImage().\n */\nexport const tensorFromImage = async (\n  image: ImageData | HTMLImageElement | ImageBitmap | string,\n  options?:\n    | TensorFromImageDataOptions\n    | TensorFromImageElementOptions\n    | TensorFromImageBitmapOptions\n    | TensorFromUrlOptions,\n): Promise<Tensor> => {\n  // checking the type of image object\n  const isHTMLImageEle = typeof HTMLImageElement !== 'undefined' && image instanceof HTMLImageElement;\n  const isImageDataEle = typeof ImageData !== 'undefined' && image instanceof ImageData;\n  const isImageBitmap = typeof ImageBitmap !== 'undefined' && image instanceof ImageBitmap;\n  const isString = typeof image === 'string';\n\n  let data: Uint8ClampedArray | undefined;\n  let bufferToTensorOptions: BufferToTensorOptions = options ?? {};\n\n  const createCanvas = () => {\n    if (typeof document !== 'undefined') {\n      return document.createElement('canvas');\n    } else if (typeof OffscreenCanvas !== 'undefined') {\n      return new OffscreenCanvas(1, 1);\n    } else {\n      throw new Error('Canvas is not supported');\n    }\n  };\n  const createCanvasContext = (canvas: HTMLCanvasElement | OffscreenCanvas) => {\n    if (typeof HTMLCanvasElement !== 'undefined' && canvas instanceof HTMLCanvasElement) {\n      return canvas.getContext('2d');\n    } else if (canvas instanceof OffscreenCanvas) {\n      return canvas.getContext('2d') as OffscreenCanvasRenderingContext2D;\n    } else {\n      return null;\n    }\n  };\n  // filling and checking image configuration options\n  if (isHTMLImageEle) {\n    // HTMLImageElement - image object - format is RGBA by default\n    const canvas = createCanvas();\n    canvas.width = image.width;\n    canvas.height = image.height;\n    const pixels2DContext = createCanvasContext(canvas);\n\n    if (pixels2DContext != null) {\n      let height = image.height;\n      let width = image.width;\n      if (options !== undefined && options.resizedHeight !== undefined && options.resizedWidth !== undefined) {\n        height = options.resizedHeight;\n        width = options.resizedWidth;\n      }\n\n      if (options !== undefined) {\n        bufferToTensorOptions = options;\n        if (options.tensorFormat !== undefined) {\n          throw new Error('Image input config format must be RGBA for HTMLImageElement');\n        } else {\n          bufferToTensorOptions.tensorFormat = 'RGBA';\n        }\n        bufferToTensorOptions.height = height;\n        bufferToTensorOptions.width = width;\n      } else {\n        bufferToTensorOptions.tensorFormat = 'RGBA';\n        bufferToTensorOptions.height = height;\n        bufferToTensorOptions.width = width;\n      }\n\n      pixels2DContext.drawImage(image, 0, 0);\n      data = pixels2DContext.getImageData(0, 0, width, height).data;\n    } else {\n      throw new Error('Can not access image data');\n    }\n  } else if (isImageDataEle) {\n    let height: number;\n    let width: number;\n\n    if (options !== undefined && options.resizedWidth !== undefined && options.resizedHeight !== undefined) {\n      height = options.resizedHeight;\n      width = options.resizedWidth;\n    } else {\n      height = image.height;\n      width = image.width;\n    }\n\n    if (options !== undefined) {\n      bufferToTensorOptions = options;\n    }\n    bufferToTensorOptions.format = 'RGBA';\n    bufferToTensorOptions.height = height;\n    bufferToTensorOptions.width = width;\n\n    if (options !== undefined) {\n      const tempCanvas = createCanvas();\n\n      tempCanvas.width = width;\n      tempCanvas.height = height;\n\n      const pixels2DContext = createCanvasContext(tempCanvas);\n\n      if (pixels2DContext != null) {\n        pixels2DContext.putImageData(image, 0, 0);\n        data = pixels2DContext.getImageData(0, 0, width, height).data;\n      } else {\n        throw new Error('Can not access image data');\n      }\n    } else {\n      data = image.data;\n    }\n  } else if (isImageBitmap) {\n    // ImageBitmap - image object - format must be provided by user\n    if (options === undefined) {\n      throw new Error('Please provide image config with format for Imagebitmap');\n    }\n\n    const canvas = createCanvas();\n    canvas.width = image.width;\n    canvas.height = image.height;\n    const pixels2DContext = createCanvasContext(canvas);\n\n    if (pixels2DContext != null) {\n      const height = image.height;\n      const width = image.width;\n      pixels2DContext.drawImage(image, 0, 0, width, height);\n      data = pixels2DContext.getImageData(0, 0, width, height).data;\n      bufferToTensorOptions.height = height;\n      bufferToTensorOptions.width = width;\n      return bufferToTensor(data, bufferToTensorOptions);\n    } else {\n      throw new Error('Can not access image data');\n    }\n  } else if (isString) {\n    return new Promise((resolve, reject) => {\n      const canvas = createCanvas();\n      const context = createCanvasContext(canvas);\n      if (!image || !context) {\n        return reject();\n      }\n      const newImage = new Image();\n      newImage.crossOrigin = 'Anonymous';\n      newImage.src = image;\n      newImage.onload = () => {\n        canvas.width = newImage.width;\n        canvas.height = newImage.height;\n        context.drawImage(newImage, 0, 0, canvas.width, canvas.height);\n        const img = context.getImageData(0, 0, canvas.width, canvas.height);\n\n        bufferToTensorOptions.height = canvas.height;\n        bufferToTensorOptions.width = canvas.width;\n        resolve(bufferToTensor(img.data, bufferToTensorOptions));\n      };\n    });\n  } else {\n    throw new Error('Input data provided is not supported - aborted tensor creation');\n  }\n\n  if (data !== undefined) {\n    return bufferToTensor(data, bufferToTensorOptions);\n  } else {\n    throw new Error('Input data provided is not supported - aborted tensor creation');\n  }\n};\n\n/**\n * implementation of Tensor.fromTexture().\n */\nexport const tensorFromTexture = <T extends TensorInterface.TextureDataTypes>(\n  texture: TensorInterface.TextureType,\n  options: TensorFromTextureOptions<T>,\n): Tensor => {\n  const { width, height, download, dispose } = options;\n  // Always assume RGBAF32. TODO: support different texture format\n  const dims = [1, height, width, 4];\n  return new Tensor({ location: 'texture', type: 'float32', texture, dims, download, dispose });\n};\n\n/**\n * implementation of Tensor.fromGpuBuffer().\n */\nexport const tensorFromGpuBuffer = <T extends TensorInterface.GpuBufferDataTypes>(\n  gpuBuffer: TensorInterface.GpuBufferType,\n  options: TensorFromGpuBufferOptions<T>,\n): Tensor => {\n  const { dataType, dims, download, dispose } = options;\n  return new Tensor({ location: 'gpu-buffer', type: dataType ?? 'float32', gpuBuffer, dims, download, dispose });\n};\n\n/**\n * implementation of Tensor.fromMLTensor().\n */\nexport const tensorFromMLTensor = <T extends TensorInterface.MLTensorDataTypes>(\n  mlTensor: TensorInterface.MLTensorType,\n  options: TensorFromMLTensorOptions<T>,\n): Tensor => {\n  const { dataType, dims, download, dispose } = options;\n  return new Tensor({ location: 'ml-tensor', type: dataType ?? 'float32', mlTensor, dims, download, dispose });\n};\n\n/**\n * implementation of Tensor.fromPinnedBuffer().\n */\nexport const tensorFromPinnedBuffer = <T extends TensorInterface.CpuPinnedDataTypes>(\n  type: T,\n  buffer: TensorInterface.DataTypeMap[T],\n  dims?: readonly number[],\n): Tensor => new Tensor({ location: 'cpu-pinned', type, data: buffer, dims: dims ?? [buffer.length] });\n","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\n\nimport { Tensor } from './tensor.js';\n\nexport type SupportedTypedArrayConstructors =\n  | Float32ArrayConstructor\n  | Uint8ArrayConstructor\n  | Int8ArrayConstructor\n  | Uint16ArrayConstructor\n  | Int16ArrayConstructor\n  | Int32ArrayConstructor\n  | BigInt64ArrayConstructor\n  | Uint8ArrayConstructor\n  | Float64ArrayConstructor\n  | Uint32ArrayConstructor\n  | BigUint64ArrayConstructor;\nexport type SupportedTypedArray = InstanceType<SupportedTypedArrayConstructors>;\n\n// a runtime map that maps type string to TypedArray constructor. Should match Tensor.DataTypeMap.\nexport const NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP = new Map<string, SupportedTypedArrayConstructors>([\n  ['float32', Float32Array],\n  ['uint8', Uint8Array],\n  ['int8', Int8Array],\n  ['uint16', Uint16Array],\n  ['int16', Int16Array],\n  ['int32', Int32Array],\n  ['bool', Uint8Array],\n  ['float64', Float64Array],\n  ['uint32', Uint32Array],\n  ['int4', Uint8Array],\n  ['uint4', Uint8Array],\n]);\n\n// a runtime map that maps type string to TypedArray constructor. Should match Tensor.DataTypeMap.\nexport const NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP = new Map<SupportedTypedArrayConstructors, Tensor.Type>([\n  [Float32Array, 'float32'],\n  [Uint8Array, 'uint8'],\n  [Int8Array, 'int8'],\n  [Uint16Array, 'uint16'],\n  [Int16Array, 'int16'],\n  [Int32Array, 'int32'],\n  [Float64Array, 'float64'],\n  [Uint32Array, 'uint32'],\n]);\n\n// the following code allows delaying execution of BigInt/Float16Array checking. This allows lazy initialization for\n// NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP and NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP, which allows BigInt/Float16Array\n// polyfill if available.\nlet isTypedArrayChecked = false;\nexport const checkTypedArray = () => {\n  if (!isTypedArrayChecked) {\n    isTypedArrayChecked = true;\n    const isBigInt64ArrayAvailable = typeof BigInt64Array !== 'undefined' && BigInt64Array.from;\n    const isBigUint64ArrayAvailable = typeof BigUint64Array !== 'undefined' && BigUint64Array.from;\n\n    // eslint-disable-next-line @typescript-eslint/naming-convention, @typescript-eslint/no-explicit-any\n    const Float16Array = (globalThis as any).Float16Array;\n    const isFloat16ArrayAvailable = typeof Float16Array !== 'undefined' && Float16Array.from;\n\n    if (isBigInt64ArrayAvailable) {\n      NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.set('int64', BigInt64Array);\n      NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP.set(BigInt64Array, 'int64');\n    }\n    if (isBigUint64ArrayAvailable) {\n      NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.set('uint64', BigUint64Array);\n      NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP.set(BigUint64Array, 'uint64');\n    }\n    if (isFloat16ArrayAvailable) {\n      NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.set('float16', Float16Array);\n      NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP.set(Float16Array, 'float16');\n    } else {\n      // if Float16Array is not available, use 'Uint16Array' to store the data.\n      NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.set('float16', Uint16Array);\n    }\n  }\n};\n","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\n\nimport {\n  CpuPinnedConstructorParameters,\n  GpuBufferConstructorParameters,\n  MLTensorConstructorParameters,\n  TextureConstructorParameters,\n} from './tensor-factory.js';\nimport { Tensor } from './tensor-impl.js';\n\n/**\n * calculate size from dims.\n *\n * @param dims the dims array. May be an illegal input.\n */\nexport const calculateSize = (dims: readonly unknown[]): number => {\n  let size = 1;\n  for (let i = 0; i < dims.length; i++) {\n    const dim = dims[i];\n    if (typeof dim !== 'number' || !Number.isSafeInteger(dim)) {\n      throw new TypeError(`dims[${i}] must be an integer, got: ${dim}`);\n    }\n    if (dim < 0) {\n      throw new RangeError(`dims[${i}] must be a non-negative integer, got: ${dim}`);\n    }\n    size *= dim;\n  }\n  return size;\n};\n\n/**\n * implementation of Tensor.reshape()\n */\nexport const tensorReshape = (tensor: Tensor, dims: readonly number[]): Tensor => {\n  switch (tensor.location) {\n    case 'cpu':\n      return new Tensor(tensor.type, tensor.data, dims);\n    case 'cpu-pinned':\n      return new Tensor({\n        location: 'cpu-pinned',\n        data: tensor.data as CpuPinnedConstructorParameters['data'],\n        type: tensor.type as CpuPinnedConstructorParameters['type'],\n        dims,\n      });\n    case 'texture':\n      return new Tensor({\n        location: 'texture',\n        texture: tensor.texture,\n        type: tensor.type as TextureConstructorParameters['type'],\n        dims,\n      });\n    case 'gpu-buffer':\n      return new Tensor({\n        location: 'gpu-buffer',\n        gpuBuffer: tensor.gpuBuffer,\n        type: tensor.type as GpuBufferConstructorParameters['type'],\n        dims,\n      });\n    case 'ml-tensor':\n      return new Tensor({\n        location: 'ml-tensor',\n        mlTensor: tensor.mlTensor,\n        type: tensor.type as MLTensorConstructorParameters['type'],\n        dims,\n      });\n    default:\n      throw new Error(`tensorReshape: tensor location ${tensor.location} is not supported`);\n  }\n};\n","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\n\nimport { tensorToDataURL, tensorToImageData } from './tensor-conversion-impl.js';\nimport { TensorToDataUrlOptions, TensorToImageDataOptions } from './tensor-conversion.js';\nimport {\n  tensorFromGpuBuffer,\n  tensorFromImage,\n  tensorFromMLTensor,\n  tensorFromPinnedBuffer,\n  tensorFromTexture,\n} from './tensor-factory-impl.js';\nimport {\n  CpuPinnedConstructorParameters,\n  GpuBufferConstructorParameters,\n  MLTensorConstructorParameters,\n  TensorFromGpuBufferOptions,\n  TensorFromImageBitmapOptions,\n  TensorFromImageDataOptions,\n  TensorFromImageElementOptions,\n  TensorFromMLTensorOptions,\n  TensorFromTextureOptions,\n  TensorFromUrlOptions,\n  TextureConstructorParameters,\n} from './tensor-factory.js';\nimport {\n  checkTypedArray,\n  NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP,\n  NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP,\n  SupportedTypedArray,\n  SupportedTypedArrayConstructors,\n} from './tensor-impl-type-mapping.js';\nimport { calculateSize, tensorReshape } from './tensor-utils-impl.js';\nimport { Tensor as TensorInterface } from './tensor.js';\n\n// type aliases for those exported from Tensor interface\n\ntype TensorType = TensorInterface.Type;\ntype TensorDataType = TensorInterface.DataType;\ntype TensorDataLocation = TensorInterface.DataLocation;\ntype TensorTextureType = TensorInterface.TextureType;\ntype TensorGpuBufferType = TensorInterface.GpuBufferType;\ntype TensorMLTensorType = TensorInterface.MLTensorType;\n\n/**\n * the implementation of Tensor interface.\n *\n * @ignore\n */\nexport class Tensor implements TensorInterface {\n  // #region constructors\n\n  /**\n   * Construct a new CPU tensor object from the given type, data and dims.\n   */\n  constructor(\n    type: TensorType,\n    data: TensorDataType | Uint8ClampedArray | readonly string[] | readonly number[] | readonly boolean[],\n    dims?: readonly number[],\n  );\n  /**\n   * Construct a new CPU tensor object from the given data and dims. Type is inferred from data.\n   */\n  constructor(\n    data: TensorDataType | Uint8ClampedArray | readonly string[] | readonly boolean[],\n    dims?: readonly number[],\n  );\n  /**\n   * Construct a new tensor object from the pinned CPU data with the given type and dims.\n   *\n   * Tensor's location will be set to 'cpu-pinned'.\n   *\n   * @param params - Specify the parameters to construct the tensor.\n   */\n  constructor(params: CpuPinnedConstructorParameters);\n  /**\n   * Construct a new tensor object from the WebGL texture with the given type and dims.\n   *\n   * Tensor's location will be set to 'texture'.\n   *\n   * @param params - Specify the parameters to construct the tensor.\n   */\n  constructor(params: TextureConstructorParameters);\n  /**\n   * Construct a new tensor object from the WebGPU buffer with the given type and dims.\n   *\n   * Tensor's location will be set to 'gpu-buffer'.\n   *\n   * @param params - Specify the parameters to construct the tensor.\n   */\n  constructor(params: GpuBufferConstructorParameters);\n\n  /**\n   * Construct a new tensor object from the WebNN MLTensor with the given type and dims.\n   *\n   * Tensor's location will be set to 'ml-tensor'.\n   *\n   * @param params - Specify the parameters to construct the tensor.\n   */\n  constructor(params: MLTensorConstructorParameters);\n\n  /**\n   * implementation.\n   */\n  constructor(\n    arg0:\n      | TensorType\n      | TensorDataType\n      | Uint8ClampedArray\n      | readonly string[]\n      | readonly boolean[]\n      | CpuPinnedConstructorParameters\n      | TextureConstructorParameters\n      | GpuBufferConstructorParameters\n      | MLTensorConstructorParameters,\n    arg1?: TensorDataType | Uint8ClampedArray | readonly number[] | readonly string[] | readonly boolean[],\n    arg2?: readonly number[],\n  ) {\n    // perform one-time check for BigInt/Float16Array support\n    checkTypedArray();\n\n    let type: TensorType;\n    let dims: readonly number[];\n\n    if (typeof arg0 === 'object' && 'location' in arg0) {\n      //\n      // constructing tensor from specific location\n      //\n      this.dataLocation = arg0.location;\n      type = arg0.type;\n      dims = arg0.dims;\n      switch (arg0.location) {\n        case 'cpu-pinned': {\n          const expectedTypedArrayConstructor = NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.get(type);\n          if (!expectedTypedArrayConstructor) {\n            throw new TypeError(`unsupported type \"${type}\" to create tensor from pinned buffer`);\n          }\n          if (!(arg0.data instanceof expectedTypedArrayConstructor)) {\n            throw new TypeError(`buffer should be of type ${expectedTypedArrayConstructor.name}`);\n          }\n          this.cpuData = arg0.data;\n          break;\n        }\n        case 'texture': {\n          if (type !== 'float32') {\n            throw new TypeError(`unsupported type \"${type}\" to create tensor from texture`);\n          }\n          this.gpuTextureData = arg0.texture;\n          this.downloader = arg0.download;\n          this.disposer = arg0.dispose;\n          break;\n        }\n        case 'gpu-buffer': {\n          if (\n            type !== 'float32' &&\n            type !== 'float16' &&\n            type !== 'int32' &&\n            type !== 'int64' &&\n            type !== 'uint32' &&\n            type !== 'uint8' &&\n            type !== 'bool' &&\n            type !== 'uint4' &&\n            type !== 'int4'\n          ) {\n            throw new TypeError(`unsupported type \"${type}\" to create tensor from gpu buffer`);\n          }\n          this.gpuBufferData = arg0.gpuBuffer;\n          this.downloader = arg0.download;\n          this.disposer = arg0.dispose;\n          break;\n        }\n        case 'ml-tensor': {\n          if (\n            type !== 'float32' &&\n            type !== 'float16' &&\n            type !== 'int32' &&\n            type !== 'int64' &&\n            type !== 'uint32' &&\n            type !== 'uint64' &&\n            type !== 'int8' &&\n            type !== 'uint8' &&\n            type !== 'bool' &&\n            type !== 'uint4' &&\n            type !== 'int4'\n          ) {\n            throw new TypeError(`unsupported type \"${type}\" to create tensor from MLTensor`);\n          }\n          this.mlTensorData = arg0.mlTensor;\n          this.downloader = arg0.download;\n          this.disposer = arg0.dispose;\n          break;\n        }\n        default:\n          throw new Error(`Tensor constructor: unsupported location '${this.dataLocation}'`);\n      }\n    } else {\n      //\n      // constructing tensor of location 'cpu'\n      //\n      let data: TensorDataType;\n      let maybeDims: typeof arg1 | typeof arg2;\n      // check whether arg0 is type or data\n      if (typeof arg0 === 'string') {\n        //\n        // Override: constructor(type, data, ...)\n        //\n        type = arg0;\n        maybeDims = arg2;\n        if (arg0 === 'string') {\n          // string tensor\n          if (!Array.isArray(arg1)) {\n            throw new TypeError(\"A string tensor's data must be a string array.\");\n          }\n          // we don't check whether every element in the array is string; this is too slow. we assume it's correct and\n          // error will be populated at inference\n          data = arg1;\n        } else {\n          // numeric tensor\n          const typedArrayConstructor = NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.get(arg0);\n          if (typedArrayConstructor === undefined) {\n            throw new TypeError(`Unsupported tensor type: ${arg0}.`);\n          }\n          if (Array.isArray(arg1)) {\n            if ((arg0 === 'float16' && typedArrayConstructor === Uint16Array) || arg0 === 'uint4' || arg0 === 'int4') {\n              // - 'float16':\n              //   When no Float16Array polyfill is used, we cannot create 'float16' tensor from number array.\n              //\n              //   Throw error here because when user try to use number array as data,\n              //   e.g. new Tensor('float16', [1, 2, 3, 4], dims)), it will actually call\n              //   Uint16Array.from(arg1) which generates wrong data.\n              //\n              // - 'uint4' and 'int4':\n              //   Uint8Array.from(arg1) will generate wrong data for 'uint4' and 'int4' tensor.\n              //\n              throw new TypeError(\n                `Creating a ${arg0} tensor from number array is not supported. Please use ${typedArrayConstructor.name} as data.`,\n              );\n            } else if (arg0 === 'uint64' || arg0 === 'int64') {\n              // use 'as any' here because:\n              // 1. TypeScript's check on type of 'Array.isArray()' does not work with readonly arrays.\n              // see https://github.com/microsoft/TypeScript/issues/17002\n              // 2. TypeScript's check on union type of '(BigInt64ArrayConstructor|BigUint64ArrayConstructor).from()'\n              // does not accept parameter mapFn.\n              // 3. parameters of 'SupportedTypedArrayConstructors.from()' does not match the requirement of the union\n              // type.\n\n              // assume 'arg1' is of type \"readonly number[]|readonly bigint[]\" here.\n\n              // eslint-disable-next-line @typescript-eslint/no-explicit-any\n              data = (typedArrayConstructor as any).from(arg1, BigInt);\n            } else {\n              // assume 'arg1' is of type \"readonly number[]\" here.\n              // eslint-disable-next-line @typescript-eslint/no-explicit-any\n              data = (typedArrayConstructor as any).from(arg1);\n            }\n          } else if (arg1 instanceof typedArrayConstructor) {\n            data = arg1;\n          } else if (arg1 instanceof Uint8ClampedArray) {\n            if (arg0 === 'uint8') {\n              data = Uint8Array.from(arg1);\n            } else {\n              throw new TypeError(`A Uint8ClampedArray tensor's data must be type of uint8`);\n            }\n          } else if (arg0 === 'float16' && arg1 instanceof Uint16Array && typedArrayConstructor !== Uint16Array) {\n            // when Float16Array is available and data is of type Uint16Array.\n            // We allow Uint16Array to be passed in as data for 'float16' tensor until Float16Array is generally\n            // supported in JavaScript environment.\n\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            data = new (globalThis as any).Float16Array(arg1.buffer, arg1.byteOffset, arg1.length);\n          } else {\n            throw new TypeError(`A ${type} tensor's data must be type of ${typedArrayConstructor}`);\n          }\n        }\n      } else {\n        //\n        // Override: constructor(data, ...)\n        //\n        maybeDims = arg1;\n        if (Array.isArray(arg0)) {\n          // only boolean[] and string[] is supported\n          if (arg0.length === 0) {\n            throw new TypeError('Tensor type cannot be inferred from an empty array.');\n          }\n          const firstElementType = typeof arg0[0];\n          if (firstElementType === 'string') {\n            type = 'string';\n            data = arg0;\n          } else if (firstElementType === 'boolean') {\n            type = 'bool';\n            // 'arg0' is of type 'boolean[]'. Uint8Array.from(boolean[]) actually works, but typescript thinks this is\n            // wrong type. We use 'as any' to make it happy.\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            data = Uint8Array.from(arg0 as any[]);\n          } else {\n            throw new TypeError(`Invalid element type of data array: ${firstElementType}.`);\n          }\n        } else if (arg0 instanceof Uint8ClampedArray) {\n          type = 'uint8';\n          data = Uint8Array.from(arg0);\n        } else {\n          // get tensor type from TypedArray\n          const mappedType = NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP.get(\n            arg0.constructor as SupportedTypedArrayConstructors,\n          );\n          if (mappedType === undefined) {\n            throw new TypeError(`Unsupported type for tensor data: ${arg0.constructor}.`);\n          }\n          type = mappedType;\n          data = arg0 as SupportedTypedArray;\n        }\n      }\n\n      // type and data is processed, now processing dims\n      if (maybeDims === undefined) {\n        // assume 1-D tensor if dims omitted\n        maybeDims = [data.length];\n      } else if (!Array.isArray(maybeDims)) {\n        throw new TypeError(\"A tensor's dims must be a number array\");\n      }\n      dims = maybeDims as readonly number[];\n\n      this.cpuData = data;\n      this.dataLocation = 'cpu';\n    }\n\n    // perform check on dims\n    const size = calculateSize(dims);\n    // if data is on CPU, check whether data length matches tensor size\n    if (this.cpuData && size !== this.cpuData.length) {\n      if ((type === 'uint4' || type === 'int4') && Math.ceil(size / 2) === this.cpuData.length) {\n        // for (u)int4, the data length is half of the tensor size. So we check this special case when size is odd.\n      } else {\n        throw new Error(`Tensor's size(${size}) does not match data length(${this.cpuData.length}).`);\n      }\n    }\n\n    this.type = type;\n    this.dims = dims;\n    this.size = size;\n  }\n  // #endregion\n\n  // #region factory\n  static async fromImage(\n    image: ImageData | HTMLImageElement | ImageBitmap | string,\n    options?:\n      | TensorFromImageDataOptions\n      | TensorFromImageElementOptions\n      | TensorFromImageBitmapOptions\n      | TensorFromUrlOptions,\n  ): Promise<TensorInterface> {\n    return tensorFromImage(image, options);\n  }\n\n  static fromTexture<T extends TensorInterface.TextureDataTypes>(\n    texture: TensorTextureType,\n    options: TensorFromTextureOptions<T>,\n  ): TensorInterface {\n    return tensorFromTexture(texture, options);\n  }\n\n  static fromGpuBuffer<T extends TensorInterface.GpuBufferDataTypes>(\n    gpuBuffer: TensorGpuBufferType,\n    options: TensorFromGpuBufferOptions<T>,\n  ): TensorInterface {\n    return tensorFromGpuBuffer(gpuBuffer, options);\n  }\n\n  static fromMLTensor<T extends TensorInterface.MLTensorDataTypes>(\n    mlTensor: TensorMLTensorType,\n    options: TensorFromMLTensorOptions<T>,\n  ): TensorInterface {\n    return tensorFromMLTensor(mlTensor, options);\n  }\n\n  static fromPinnedBuffer<T extends TensorInterface.CpuPinnedDataTypes>(\n    type: T,\n    buffer: TensorInterface.DataTypeMap[T],\n    dims?: readonly number[],\n  ): Tensor {\n    return tensorFromPinnedBuffer(type, buffer, dims);\n  }\n\n  // #endregion\n\n  // #region conversions\n  toDataURL(options?: TensorToDataUrlOptions): string {\n    return tensorToDataURL(this, options);\n  }\n\n  toImageData(options?: TensorToImageDataOptions): ImageData {\n    return tensorToImageData(this, options);\n  }\n  // #endregion\n\n  // #region public fields\n  readonly dims: readonly number[];\n  readonly type: TensorType;\n  readonly size: number;\n  // #endregion\n\n  // #region private fields\n\n  /**\n   * stores the location of the data.\n   */\n  private dataLocation: TensorDataLocation;\n\n  /**\n   * stores the data on CPU, if location is 'cpu' or 'cpu-pinned'. otherwise empty.\n   */\n  private cpuData?: TensorDataType;\n\n  /**\n   * stores the underlying texture when location is 'texture'. otherwise empty.\n   */\n  private gpuTextureData?: TensorTextureType;\n\n  /**\n   * stores the underlying GPU buffer when location is 'gpu-buffer'. otherwise empty.\n   */\n  private gpuBufferData?: TensorGpuBufferType;\n\n  /**\n   * stores the underlying WebNN MLTensor when location is 'ml-tensor'. otherwise empty.\n   */\n  private mlTensorData?: TensorMLTensorType;\n\n  /**\n   * stores an optional downloader function to download data from GPU to CPU.\n   */\n  private downloader?(): Promise<TensorDataType>;\n\n  /**\n   * a flag indicating whether the data is being downloaded from GPU to CPU.\n   */\n  private isDownloading?: boolean;\n\n  /**\n   * stores an optional disposer function to dispose the underlying data.\n   */\n  private disposer?(): void;\n  // #endregion\n\n  // #region properties\n  get data(): TensorDataType {\n    this.ensureValid();\n    if (!this.cpuData) {\n      throw new Error(\n        'The data is not on CPU. Use `getData()` to download GPU data to CPU, ' +\n          'or use `texture` or `gpuBuffer` property to access the GPU data directly.',\n      );\n    }\n    return this.cpuData;\n  }\n\n  get location(): TensorDataLocation {\n    return this.dataLocation;\n  }\n\n  get texture(): TensorTextureType {\n    this.ensureValid();\n    if (!this.gpuTextureData) {\n      throw new Error('The data is not stored as a WebGL texture.');\n    }\n    return this.gpuTextureData;\n  }\n\n  get gpuBuffer(): TensorGpuBufferType {\n    this.ensureValid();\n    if (!this.gpuBufferData) {\n      throw new Error('The data is not stored as a WebGPU buffer.');\n    }\n    return this.gpuBufferData;\n  }\n\n  get mlTensor(): TensorMLTensorType {\n    this.ensureValid();\n    if (!this.mlTensorData) {\n      throw new Error('The data is not stored as a WebNN MLTensor.');\n    }\n    return this.mlTensorData;\n  }\n  // #endregion\n\n  // #region methods\n\n  async getData(releaseData?: boolean): Promise<TensorDataType> {\n    this.ensureValid();\n    switch (this.dataLocation) {\n      case 'cpu':\n      case 'cpu-pinned':\n        return this.data;\n      case 'texture':\n      case 'gpu-buffer':\n      case 'ml-tensor': {\n        if (!this.downloader) {\n          throw new Error('The current tensor is not created with a specified data downloader.');\n        }\n        if (this.isDownloading) {\n          throw new Error('The current tensor is being downloaded.');\n        }\n        try {\n          this.isDownloading = true;\n          const data = await this.downloader();\n          this.downloader = undefined;\n          this.dataLocation = 'cpu';\n          this.cpuData = data;\n\n          if (releaseData && this.disposer) {\n            this.disposer();\n            this.disposer = undefined;\n          }\n\n          return data;\n        } finally {\n          this.isDownloading = false;\n        }\n      }\n      default:\n        throw new Error(`cannot get data from location: ${this.dataLocation}`);\n    }\n  }\n\n  dispose(): void {\n    if (this.isDownloading) {\n      throw new Error('The current tensor is being downloaded.');\n    }\n\n    if (this.disposer) {\n      this.disposer();\n      this.disposer = undefined;\n    }\n    this.cpuData = undefined;\n    this.gpuTextureData = undefined;\n    this.gpuBufferData = undefined;\n    this.mlTensorData = undefined;\n    this.downloader = undefined;\n    this.isDownloading = undefined;\n\n    this.dataLocation = 'none';\n  }\n\n  // #endregion\n\n  // #region tensor utilities\n  private ensureValid(): void {\n    if (this.dataLocation === 'none') {\n      throw new Error('The tensor is disposed.');\n    }\n  }\n\n  reshape(dims: readonly number[]): TensorInterface {\n    this.ensureValid();\n    if (this.downloader || this.disposer) {\n      throw new Error('Cannot reshape a tensor that owns GPU resource.');\n    }\n    return tensorReshape(this, dims);\n  }\n  // #endregion\n}\n","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\n\nimport { TensorFactory } from './tensor-factory.js';\nimport { Tensor as TensorImpl } from './tensor-impl.js';\nimport { TypedTensorUtils } from './tensor-utils.js';\nimport { TryGetGlobalType } from './type-helper.js';\n\n/* eslint-disable @typescript-eslint/no-redeclare */\n\n/**\n * represent a basic tensor with specified dimensions and data type.\n */\ninterface TypedTensorBase<T extends Tensor.Type> {\n  /**\n   * Get the dimensions of the tensor.\n   */\n  readonly dims: readonly number[];\n  /**\n   * Get the data type of the tensor.\n   */\n  readonly type: T;\n  /**\n   * Get the buffer data of the tensor.\n   *\n   * If the data is not on CPU (eg. it's in the form of WebGL texture or WebGPU buffer), throw error.\n   */\n  readonly data: Tensor.DataTypeMap[T];\n  /**\n   * Get the location of the data.\n   */\n  readonly location: Tensor.DataLocation;\n  /**\n   * Get the WebGL texture that holds the tensor data.\n   *\n   * If the data is not on GPU as WebGL texture, throw error.\n   */\n  readonly texture: Tensor.TextureType;\n  /**\n   * Get the WebGPU buffer that holds the tensor data.\n   *\n   * If the data is not on GPU as WebGPU buffer, throw error.\n   */\n  readonly gpuBuffer: Tensor.GpuBufferType;\n\n  /**\n   * Get the WebNN MLTensor that holds the tensor data.\n   *\n   * If the data is not in a WebNN MLTensor, throw error.\n   */\n  readonly mlTensor: Tensor.MLTensorType;\n\n  /**\n   * Get the buffer data of the tensor.\n   *\n   * If the data is on CPU, returns the data immediately.\n   * If the data is on GPU, downloads the data and returns the promise.\n   *\n   * @param releaseData - whether release the data on GPU. Ignore if data is already on CPU.\n   */\n  getData(releaseData?: boolean): Promise<Tensor.DataTypeMap[T]>;\n\n  /**\n   * Dispose the tensor data.\n   *\n   * If the data is on CPU, remove its internal reference to the underlying data.\n   * If the data is on GPU, release the data on GPU.\n   *\n   * After calling this function, the tensor is considered no longer valid. Its location will be set to 'none'.\n   */\n  dispose(): void;\n}\n\nexport declare namespace Tensor {\n  interface DataTypeMap {\n    float32: Float32Array;\n    uint8: Uint8Array;\n    int8: Int8Array;\n    uint16: Uint16Array;\n    int16: Int16Array;\n    int32: Int32Array;\n    int64: BigInt64Array;\n    string: string[];\n    bool: Uint8Array;\n    float16: Uint16Array; // Keep using Uint16Array until we have a concrete solution for float 16.\n    float64: Float64Array;\n    uint32: Uint32Array;\n    uint64: BigUint64Array;\n    // complex64: never;\n    // complex128: never;\n    // bfloat16: never;\n    uint4: Uint8Array;\n    int4: Int8Array;\n  }\n\n  interface ElementTypeMap {\n    float32: number;\n    uint8: number;\n    int8: number;\n    uint16: number;\n    int16: number;\n    int32: number;\n    int64: bigint;\n    string: string;\n    bool: boolean;\n    float16: number; // Keep using Uint16Array until we have a concrete solution for float 16.\n    float64: number;\n    uint32: number;\n    uint64: bigint;\n    // complex64: never;\n    // complex128: never;\n    // bfloat16: never;\n    uint4: number;\n    int4: number;\n  }\n\n  type DataType = DataTypeMap[Type];\n  type ElementType = ElementTypeMap[Type];\n\n  /**\n   * supported data types for constructing a tensor from a pinned CPU buffer\n   */\n  export type CpuPinnedDataTypes = Exclude<Tensor.Type, 'string'>;\n\n  /**\n   * type alias for WebGL texture\n   */\n  export type TextureType = WebGLTexture;\n\n  /**\n   * supported data types for constructing a tensor from a WebGL texture\n   */\n  export type TextureDataTypes = 'float32';\n\n  type GpuBufferTypeFallback = { size: number; mapState: 'unmapped' | 'pending' | 'mapped' };\n  /**\n   * type alias for WebGPU buffer\n   */\n  export type GpuBufferType = TryGetGlobalType<'GPUBuffer', GpuBufferTypeFallback>;\n\n  type MLTensorTypeFallback = { destroy(): void };\n  /**\n   * type alias for WebNN MLTensor\n   *\n   * The specification for WebNN's MLTensor is currently in flux.\n   */\n  export type MLTensorType = TryGetGlobalType<'MLTensor', MLTensorTypeFallback>;\n\n  /**\n   * supported data types for constructing a tensor from a WebGPU buffer\n   */\n  export type GpuBufferDataTypes = 'float32' | 'float16' | 'int32' | 'int64' | 'uint32' | 'uint8' | 'bool';\n\n  /**\n   * supported data types for constructing a tensor from a WebNN MLTensor\n   */\n  export type MLTensorDataTypes =\n    | 'float32'\n    | 'float16'\n    | 'int8'\n    | 'uint8'\n    | 'int32'\n    | 'uint32'\n    | 'int64'\n    | 'uint64'\n    | 'bool'\n    | 'uint4'\n    | 'int4';\n\n  /**\n   * represent where the tensor data is stored\n   */\n  export type DataLocation = 'none' | 'cpu' | 'cpu-pinned' | 'texture' | 'gpu-buffer' | 'ml-tensor';\n\n  /**\n   * represent the data type of a tensor\n   */\n  export type Type = keyof DataTypeMap;\n}\n\n/**\n * Represent multi-dimensional arrays to feed to or fetch from model inferencing.\n */\nexport interface TypedTensor<T extends Tensor.Type> extends TypedTensorBase<T>, TypedTensorUtils<T> {}\n/**\n * Represent multi-dimensional arrays to feed to or fetch from model inferencing.\n */\nexport interface Tensor extends TypedTensorBase<Tensor.Type>, TypedTensorUtils<Tensor.Type> {}\n\n/**\n * type TensorConstructor defines the constructors of 'Tensor' to create CPU tensor instances.\n */\nexport interface TensorConstructor extends TensorFactory {\n  // #region CPU tensor - specify element type\n  /**\n   * Construct a new string tensor object from the given type, data and dims.\n   *\n   * @param type - Specify the element type.\n   * @param data - Specify the CPU tensor data.\n   * @param dims - Specify the dimension of the tensor. If omitted, a 1-D tensor is assumed.\n   */\n  new (\n    type: 'string',\n    data: Tensor.DataTypeMap['string'] | readonly string[],\n    dims?: readonly number[],\n  ): TypedTensor<'string'>;\n\n  /**\n   * Construct a new bool tensor object from the given type, data and dims.\n   *\n   * @param type - Specify the element type.\n   * @param data - Specify the CPU tensor data.\n   * @param dims - Specify the dimension of the tensor. If omitted, a 1-D tensor is assumed.\n   */\n  new (\n    type: 'bool',\n    data: Tensor.DataTypeMap['bool'] | readonly boolean[],\n    dims?: readonly number[],\n  ): TypedTensor<'bool'>;\n\n  /**\n   * Construct a new uint8 tensor object from a Uint8ClampedArray, data and dims.\n   *\n   * @param type - Specify the element type.\n   * @param data - Specify the CPU tensor data.\n   * @param dims - Specify the dimension of the tensor. If omitted, a 1-D tensor is assumed.\n   */\n  new (type: 'uint8', data: Uint8ClampedArray, dims?: readonly number[]): TypedTensor<'uint8'>;\n\n  /**\n   * Construct a new 64-bit integer typed tensor object from the given type, data and dims.\n   *\n   * @param type - Specify the element type.\n   * @param data - Specify the CPU tensor data.\n   * @param dims - Specify the dimension of the tensor. If omitted, a 1-D tensor is assumed.\n   */\n  new <T extends 'uint64' | 'int64'>(\n    type: T,\n    data: Tensor.DataTypeMap[T] | readonly bigint[] | readonly number[],\n    dims?: readonly number[],\n  ): TypedTensor<T>;\n\n  /**\n   * Construct a new numeric tensor object from the given type, data and dims.\n   *\n   * @param type - Specify the element type.\n   * @param data - Specify the CPU tensor data.\n   * @param dims - Specify the dimension of the tensor. If omitted, a 1-D tensor is assumed.\n   */\n  new <T extends Exclude<Tensor.Type, 'string' | 'bool' | 'uint64' | 'int64'>>(\n    type: T,\n    data: Tensor.DataTypeMap[T] | readonly number[],\n    dims?: readonly number[],\n  ): TypedTensor<T>;\n  // #endregion\n\n  // #region CPU tensor - infer element types\n\n  /**\n   * Construct a new float32 tensor object from the given data and dims.\n   *\n   * @param data - Specify the CPU tensor data.\n   * @param dims - Specify the dimension of the tensor. If omitted, a 1-D tensor is assumed.\n   */\n  new (data: Float32Array, dims?: readonly number[]): TypedTensor<'float32'>;\n\n  /**\n   * Construct a new int8 tensor object from the given data and dims.\n   *\n   * @param data - Specify the CPU tensor data.\n   * @param dims - Specify the dimension of the tensor. If omitted, a 1-D tensor is assumed.\n   */\n  new (data: Int8Array, dims?: readonly number[]): TypedTensor<'int8'>;\n\n  /**\n   * Construct a new uint8 tensor object from the given data and dims.\n   *\n   * @param data - Specify the CPU tensor data.\n   * @param dims - Specify the dimension of the tensor. If omitted, a 1-D tensor is assumed.\n   */\n  new (data: Uint8Array, dims?: readonly number[]): TypedTensor<'uint8'>;\n\n  /**\n   * Construct a new uint8 tensor object from the given data and dims.\n   *\n   * @param data - Specify the CPU tensor data.\n   * @param dims - Specify the dimension of the tensor. If omitted, a 1-D tensor is assumed.\n   */\n  new (data: Uint8ClampedArray, dims?: readonly number[]): TypedTensor<'uint8'>;\n\n  /**\n   * Construct a new uint16 tensor object from the given data and dims.\n   *\n   * @param data - Specify the CPU tensor data.\n   * @param dims - Specify the dimension of the tensor. If omitted, a 1-D tensor is assumed.\n   */\n  new (data: Uint16Array, dims?: readonly number[]): TypedTensor<'uint16'>;\n\n  /**\n   * Construct a new int16 tensor object from the given data and dims.\n   *\n   * @param data - Specify the CPU tensor data.\n   * @param dims - Specify the dimension of the tensor. If omitted, a 1-D tensor is assumed.\n   */\n  new (data: Int16Array, dims?: readonly number[]): TypedTensor<'int16'>;\n\n  /**\n   * Construct a new int32 tensor object from the given data and dims.\n   *\n   * @param data - Specify the CPU tensor data.\n   * @param dims - Specify the dimension of the tensor. If omitted, a 1-D tensor is assumed.\n   */\n  new (data: Int32Array, dims?: readonly number[]): TypedTensor<'int32'>;\n\n  /**\n   * Construct a new int64 tensor object from the given data and dims.\n   *\n   * @param data - Specify the CPU tensor data.\n   * @param dims - Specify the dimension of the tensor. If omitted, a 1-D tensor is assumed.\n   */\n  new (data: BigInt64Array, dims?: readonly number[]): TypedTensor<'int64'>;\n\n  /**\n   * Construct a new string tensor object from the given data and dims.\n   *\n   * @param data - Specify the CPU tensor data.\n   * @param dims - Specify the dimension of the tensor. If omitted, a 1-D tensor is assumed.\n   */\n  new (data: readonly string[], dims?: readonly number[]): TypedTensor<'string'>;\n\n  /**\n   * Construct a new bool tensor object from the given data and dims.\n   *\n   * @param data - Specify the CPU tensor data.\n   * @param dims - Specify the dimension of the tensor. If omitted, a 1-D tensor is assumed.\n   */\n  new (data: readonly boolean[], dims?: readonly number[]): TypedTensor<'bool'>;\n\n  /**\n   * Construct a new float64 tensor object from the given data and dims.\n   *\n   * @param data - Specify the CPU tensor data.\n   * @param dims - Specify the dimension of the tensor. If omitted, a 1-D tensor is assumed.\n   */\n  new (data: Float64Array, dims?: readonly number[]): TypedTensor<'float64'>;\n\n  /**\n   * Construct a new uint32 tensor object from the given data and dims.\n   *\n   * @param data - Specify the CPU tensor data.\n   * @param dims - Specify the dimension of the tensor. If omitted, a 1-D tensor is assumed.\n   */\n  new (data: Uint32Array, dims?: readonly number[]): TypedTensor<'uint32'>;\n\n  /**\n   * Construct a new uint64 tensor object from the given data and dims.\n   *\n   * @param data - Specify the CPU tensor data.\n   * @param dims - Specify the dimension of the tensor. If omitted, a 1-D tensor is assumed.\n   */\n  new (data: BigUint64Array, dims?: readonly number[]): TypedTensor<'uint64'>;\n\n  // #endregion\n\n  // #region CPU tensor - fall back to non-generic tensor type declaration\n\n  /**\n   * Construct a new tensor object from the given type, data and dims.\n   *\n   * @param type - Specify the element type.\n   * @param data - Specify the CPU tensor data.\n   * @param dims - Specify the dimension of the tensor. If omitted, a 1-D tensor is assumed.\n   */\n  new (\n    type: Tensor.Type,\n    data: Tensor.DataType | readonly number[] | readonly string[] | readonly bigint[] | readonly boolean[],\n    dims?: readonly number[],\n  ): Tensor;\n\n  /**\n   * Construct a new tensor object from the given data and dims.\n   *\n   * @param data - Specify the CPU tensor data.\n   * @param dims - Specify the dimension of the tensor. If omitted, a 1-D tensor is assumed.\n   */\n  new (data: Tensor.DataType, dims?: readonly number[]): Tensor;\n  // #endregion\n}\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nexport const Tensor = TensorImpl as TensorConstructor;\n","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\n\nimport { env } from './env-impl.js';\n\n/**\n * @ignore\n */\nexport const TRACE = (deviceType: string, label: string) => {\n  if (typeof env.trace === 'undefined' ? !env.wasm.trace : !env.trace) {\n    return;\n  }\n  // eslint-disable-next-line no-console\n  console.timeStamp(`${deviceType}::ORT::${label}`);\n};\n\nconst TRACE_FUNC = (msg: string, extraMsg?: string) => {\n  const stack = new Error().stack?.split(/\\r\\n|\\r|\\n/g) || [];\n  let hasTraceFunc = false;\n  for (let i = 0; i < stack.length; i++) {\n    if (hasTraceFunc && !stack[i].includes('TRACE_FUNC')) {\n      let label = `FUNC_${msg}::${stack[i].trim().split(' ')[1]}`;\n      if (extraMsg) {\n        label += `::${extraMsg}`;\n      }\n      TRACE('CPU', label);\n      return;\n    }\n    if (stack[i].includes('TRACE_FUNC')) {\n      hasTraceFunc = true;\n    }\n  }\n};\n\n/**\n * @ignore\n */\nexport const TRACE_FUNC_BEGIN = (extraMsg?: string) => {\n  if (typeof env.trace === 'undefined' ? !env.wasm.trace : !env.trace) {\n    return;\n  }\n  TRACE_FUNC('BEGIN', extraMsg);\n};\n\n/**\n * @ignore\n */\nexport const TRACE_FUNC_END = (extraMsg?: string) => {\n  if (typeof env.trace === 'undefined' ? !env.wasm.trace : !env.trace) {\n    return;\n  }\n  TRACE_FUNC('END', extraMsg);\n};\n\n/**\n * @ignore\n */\nexport const TRACE_EVENT_BEGIN = (extraMsg?: string) => {\n  if (typeof env.trace === 'undefined' ? !env.wasm.trace : !env.trace) {\n    return;\n  }\n  // eslint-disable-next-line no-console\n  console.time(`ORT::${extraMsg}`);\n};\n\n/**\n * @ignore\n */\nexport const TRACE_EVENT_END = (extraMsg?: string) => {\n  if (typeof env.trace === 'undefined' ? !env.wasm.trace : !env.trace) {\n    return;\n  }\n  // eslint-disable-next-line no-console\n  console.timeEnd(`ORT::${extraMsg}`);\n};\n","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\n\nimport { resolveBackendAndExecutionProviders } from './backend-impl.js';\nimport { InferenceSessionHandler } from './backend.js';\nimport { InferenceSession as InferenceSessionInterface } from './inference-session.js';\nimport { OnnxValue } from './onnx-value.js';\nimport { Tensor } from './tensor.js';\nimport { TRACE_FUNC_BEGIN, TRACE_FUNC_END, TRACE_EVENT_BEGIN, TRACE_EVENT_END } from './trace.js';\n\ntype SessionOptions = InferenceSessionInterface.SessionOptions;\ntype RunOptions = InferenceSessionInterface.RunOptions;\ntype FeedsType = InferenceSessionInterface.FeedsType;\ntype FetchesType = InferenceSessionInterface.FetchesType;\ntype ReturnType = InferenceSessionInterface.ReturnType;\n\nexport class InferenceSession implements InferenceSessionInterface {\n  private constructor(handler: InferenceSessionHandler) {\n    this.handler = handler;\n  }\n  run(feeds: FeedsType, options?: RunOptions): Promise<ReturnType>;\n  run(feeds: FeedsType, fetches: FetchesType, options?: RunOptions): Promise<ReturnType>;\n  async run(feeds: FeedsType, arg1?: FetchesType | RunOptions, arg2?: RunOptions): Promise<ReturnType> {\n    TRACE_FUNC_BEGIN();\n    TRACE_EVENT_BEGIN('InferenceSession.run');\n    const fetches: { [name: string]: OnnxValue | null } = {};\n    let options: RunOptions = {};\n    // check inputs\n    if (typeof feeds !== 'object' || feeds === null || feeds instanceof Tensor || Array.isArray(feeds)) {\n      throw new TypeError(\n        \"'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.\",\n      );\n    }\n\n    let isFetchesEmpty = true;\n    // determine which override is being used\n    if (typeof arg1 === 'object') {\n      if (arg1 === null) {\n        throw new TypeError('Unexpected argument[1]: cannot be null.');\n      }\n      if (arg1 instanceof Tensor) {\n        throw new TypeError(\"'fetches' cannot be a Tensor\");\n      }\n\n      if (Array.isArray(arg1)) {\n        if (arg1.length === 0) {\n          throw new TypeError(\"'fetches' cannot be an empty array.\");\n        }\n        isFetchesEmpty = false;\n        // output names\n        for (const name of arg1) {\n          if (typeof name !== 'string') {\n            throw new TypeError(\"'fetches' must be a string array or an object.\");\n          }\n          if (this.outputNames.indexOf(name) === -1) {\n            throw new RangeError(`'fetches' contains invalid output name: ${name}.`);\n          }\n          fetches[name] = null;\n        }\n\n        if (typeof arg2 === 'object' && arg2 !== null) {\n          options = arg2;\n        } else if (typeof arg2 !== 'undefined') {\n          throw new TypeError(\"'options' must be an object.\");\n        }\n      } else {\n        // decide whether arg1 is fetches or options\n        // if any output name is present and its value is valid OnnxValue, we consider it fetches\n        let isFetches = false;\n        const arg1Keys = Object.getOwnPropertyNames(arg1);\n        for (const name of this.outputNames) {\n          if (arg1Keys.indexOf(name) !== -1) {\n            const v = (arg1 as InferenceSessionInterface.NullableOnnxValueMapType)[name];\n            if (v === null || v instanceof Tensor) {\n              isFetches = true;\n              isFetchesEmpty = false;\n              fetches[name] = v;\n            }\n          }\n        }\n\n        if (isFetches) {\n          if (typeof arg2 === 'object' && arg2 !== null) {\n            options = arg2;\n          } else if (typeof arg2 !== 'undefined') {\n            throw new TypeError(\"'options' must be an object.\");\n          }\n        } else {\n          options = arg1 as RunOptions;\n        }\n      }\n    } else if (typeof arg1 !== 'undefined') {\n      throw new TypeError(\"Unexpected argument[1]: must be 'fetches' or 'options'.\");\n    }\n\n    // check if all inputs are in feed\n    for (const name of this.inputNames) {\n      if (typeof feeds[name] === 'undefined') {\n        throw new Error(`input '${name}' is missing in 'feeds'.`);\n      }\n    }\n\n    // if no fetches is specified, we use the full output names list\n    if (isFetchesEmpty) {\n      for (const name of this.outputNames) {\n        fetches[name] = null;\n      }\n    }\n\n    // feeds, fetches and options are prepared\n\n    const results = await this.handler.run(feeds, fetches, options);\n    const returnValue: { [name: string]: OnnxValue } = {};\n    for (const key in results) {\n      if (Object.hasOwnProperty.call(results, key)) {\n        const result = results[key];\n        if (result instanceof Tensor) {\n          returnValue[key] = result;\n        } else {\n          returnValue[key] = new Tensor(result.type, result.data, result.dims);\n        }\n      }\n    }\n    TRACE_EVENT_END('InferenceSession.run');\n    TRACE_FUNC_END();\n    return returnValue;\n  }\n\n  async release(): Promise<void> {\n    return this.handler.dispose();\n  }\n\n  static create(path: string, options?: SessionOptions): Promise<InferenceSessionInterface>;\n  static create(buffer: ArrayBufferLike, options?: SessionOptions): Promise<InferenceSessionInterface>;\n  static create(\n    buffer: ArrayBufferLike,\n    byteOffset: number,\n    byteLength?: number,\n    options?: SessionOptions,\n  ): Promise<InferenceSessionInterface>;\n  static create(buffer: Uint8Array, options?: SessionOptions): Promise<InferenceSessionInterface>;\n  static async create(\n    arg0: string | ArrayBufferLike | Uint8Array,\n    arg1?: SessionOptions | number,\n    arg2?: number,\n    arg3?: SessionOptions,\n  ): Promise<InferenceSessionInterface> {\n    TRACE_FUNC_BEGIN();\n    TRACE_EVENT_BEGIN('InferenceSession.create');\n    // either load from a file or buffer\n    let filePathOrUint8Array: string | Uint8Array;\n    let options: SessionOptions = {};\n\n    if (typeof arg0 === 'string') {\n      filePathOrUint8Array = arg0;\n      if (typeof arg1 === 'object' && arg1 !== null) {\n        options = arg1;\n      } else if (typeof arg1 !== 'undefined') {\n        throw new TypeError(\"'options' must be an object.\");\n      }\n    } else if (arg0 instanceof Uint8Array) {\n      filePathOrUint8Array = arg0;\n      if (typeof arg1 === 'object' && arg1 !== null) {\n        options = arg1;\n      } else if (typeof arg1 !== 'undefined') {\n        throw new TypeError(\"'options' must be an object.\");\n      }\n    } else if (\n      arg0 instanceof ArrayBuffer ||\n      (typeof SharedArrayBuffer !== 'undefined' && arg0 instanceof SharedArrayBuffer)\n    ) {\n      const buffer = arg0;\n      let byteOffset = 0;\n      let byteLength = arg0.byteLength;\n      if (typeof arg1 === 'object' && arg1 !== null) {\n        options = arg1;\n      } else if (typeof arg1 === 'number') {\n        byteOffset = arg1;\n        if (!Number.isSafeInteger(byteOffset)) {\n          throw new RangeError(\"'byteOffset' must be an integer.\");\n        }\n        if (byteOffset < 0 || byteOffset >= buffer.byteLength) {\n          throw new RangeError(`'byteOffset' is out of range [0, ${buffer.byteLength}).`);\n        }\n        byteLength = arg0.byteLength - byteOffset;\n        if (typeof arg2 === 'number') {\n          byteLength = arg2;\n          if (!Number.isSafeInteger(byteLength)) {\n            throw new RangeError(\"'byteLength' must be an integer.\");\n          }\n          if (byteLength <= 0 || byteOffset + byteLength > buffer.byteLength) {\n            throw new RangeError(`'byteLength' is out of range (0, ${buffer.byteLength - byteOffset}].`);\n          }\n          if (typeof arg3 === 'object' && arg3 !== null) {\n            options = arg3;\n          } else if (typeof arg3 !== 'undefined') {\n            throw new TypeError(\"'options' must be an object.\");\n          }\n        } else if (typeof arg2 !== 'undefined') {\n          throw new TypeError(\"'byteLength' must be a number.\");\n        }\n      } else if (typeof arg1 !== 'undefined') {\n        throw new TypeError(\"'options' must be an object.\");\n      }\n      filePathOrUint8Array = new Uint8Array(buffer, byteOffset, byteLength);\n    } else {\n      throw new TypeError(\"Unexpected argument[0]: must be 'path' or 'buffer'.\");\n    }\n\n    // resolve backend, update session options with validated EPs, and create session handler\n    const [backend, optionsWithValidatedEPs] = await resolveBackendAndExecutionProviders(options);\n    const handler = await backend.createInferenceSessionHandler(filePathOrUint8Array, optionsWithValidatedEPs);\n    TRACE_EVENT_END('InferenceSession.create');\n    TRACE_FUNC_END();\n    return new InferenceSession(handler);\n  }\n\n  startProfiling(): void {\n    this.handler.startProfiling();\n  }\n  endProfiling(): void {\n    this.handler.endProfiling();\n  }\n\n  get inputNames(): readonly string[] {\n    return this.handler.inputNames;\n  }\n  get outputNames(): readonly string[] {\n    return this.handler.outputNames;\n  }\n\n  get inputMetadata(): readonly InferenceSessionInterface.ValueMetadata[] {\n    return this.handler.inputMetadata;\n  }\n\n  get outputMetadata(): readonly InferenceSessionInterface.ValueMetadata[] {\n    return this.handler.outputMetadata;\n  }\n\n  private handler: InferenceSessionHandler;\n}\n","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\n\nimport { InferenceSession as InferenceSessionImpl } from './inference-session-impl.js';\nimport { OnnxModelOptions } from './onnx-model.js';\nimport { OnnxValue, OnnxValueDataLocation } from './onnx-value.js';\nimport type { Tensor } from './tensor.js';\nimport { TryGetGlobalType } from './type-helper.js';\n\n/* eslint-disable @typescript-eslint/no-redeclare */\n\nexport declare namespace InferenceSession {\n  // #region input/output types\n\n  type OnnxValueMapType = { readonly [name: string]: OnnxValue };\n  type NullableOnnxValueMapType = { readonly [name: string]: OnnxValue | null };\n\n  /**\n   * A feeds (model inputs) is an object that uses input names as keys and OnnxValue as corresponding values.\n   */\n  type FeedsType = OnnxValueMapType;\n\n  /**\n   * A fetches (model outputs) could be one of the following:\n   *\n   * - Omitted. Use model's output names definition.\n   * - An array of string indicating the output names.\n   * - An object that use output names as keys and OnnxValue or null as corresponding values.\n   *\n   * @remark\n   * different from input argument, in output, OnnxValue is optional. If an OnnxValue is present it will be\n   * used as a pre-allocated value by the inference engine; if omitted, inference engine will allocate buffer\n   * internally.\n   */\n  type FetchesType = readonly string[] | NullableOnnxValueMapType;\n\n  /**\n   * A inferencing return type is an object that uses output names as keys and OnnxValue as corresponding values.\n   */\n  type ReturnType = OnnxValueMapType;\n\n  // #endregion\n\n  // #region session options\n\n  /**\n   * A set of configurations for session behavior.\n   */\n  export interface SessionOptions extends OnnxModelOptions {\n    /**\n     * An array of execution provider options.\n     *\n     * An execution provider option can be a string indicating the name of the execution provider,\n     * or an object of corresponding type.\n     */\n    executionProviders?: readonly ExecutionProviderConfig[];\n\n    /**\n     * The intra OP threads number.\n     *\n     * This setting is available only in ONNXRuntime (Node.js binding and react-native).\n     */\n    intraOpNumThreads?: number;\n\n    /**\n     * The inter OP threads number.\n     *\n     * This setting is available only in ONNXRuntime (Node.js binding and react-native).\n     */\n    interOpNumThreads?: number;\n\n    /**\n     * The free dimension override.\n     *\n     * This setting is available only in ONNXRuntime (Node.js binding and react-native) or WebAssembly backend\n     */\n    freeDimensionOverrides?: { readonly [dimensionName: string]: number };\n\n    /**\n     * The optimization level.\n     *\n     * This setting is available only in ONNXRuntime (Node.js binding and react-native) or WebAssembly backend\n     */\n    graphOptimizationLevel?: 'disabled' | 'basic' | 'extended' | 'layout' | 'all';\n\n    /**\n     * Whether enable CPU memory arena.\n     *\n     * This setting is available only in ONNXRuntime (Node.js binding and react-native) or WebAssembly backend\n     */\n    enableCpuMemArena?: boolean;\n\n    /**\n     * Whether enable memory pattern.\n     *\n     * This setting is available only in ONNXRuntime (Node.js binding and react-native) or WebAssembly backend\n     */\n    enableMemPattern?: boolean;\n\n    /**\n     * Execution mode.\n     *\n     * This setting is available only in ONNXRuntime (Node.js binding and react-native) or WebAssembly backend\n     */\n    executionMode?: 'sequential' | 'parallel';\n\n    /**\n     * Optimized model file path.\n     *\n     * If this setting is specified, the optimized model will be dumped. In browser, a blob will be created\n     * with a pop-up window.\n     */\n    optimizedModelFilePath?: string;\n\n    /**\n     * Whether enable profiling.\n     *\n     * This setting is a placeholder for a future use.\n     */\n    enableProfiling?: boolean;\n\n    /**\n     * File prefix for profiling.\n     *\n     * This setting is a placeholder for a future use.\n     */\n    profileFilePrefix?: string;\n\n    /**\n     * Log ID.\n     *\n     * This setting is available only in ONNXRuntime (Node.js binding and react-native) or WebAssembly backend\n     */\n    logId?: string;\n\n    /**\n     * Log severity level. See\n     * https://github.com/microsoft/onnxruntime/blob/main/include/onnxruntime/core/common/logging/severity.h\n     *\n     * This setting is available only in ONNXRuntime (Node.js binding and react-native) or WebAssembly backend\n     */\n    logSeverityLevel?: 0 | 1 | 2 | 3 | 4;\n\n    /**\n     * Log verbosity level.\n     *\n     * This setting is available only in WebAssembly backend. Will support Node.js binding and react-native later\n     */\n    logVerbosityLevel?: number;\n\n    /**\n     * Specify string as a preferred data location for all outputs, or an object that use output names as keys and a\n     * preferred data location as corresponding values.\n     *\n     * This setting is available only in ONNXRuntime Web for WebGL and WebGPU EP.\n     */\n    preferredOutputLocation?: OnnxValueDataLocation | { readonly [outputName: string]: OnnxValueDataLocation };\n\n    /**\n     * Whether enable graph capture.\n     * This setting is available only in ONNXRuntime Web for WebGPU EP.\n     */\n    enableGraphCapture?: boolean;\n\n    /**\n     * Store configurations for a session. See\n     * https://github.com/microsoft/onnxruntime/blob/main/include/onnxruntime/core/session/\n     * onnxruntime_session_options_config_keys.h\n     *\n     * This setting is available only in WebAssembly backend. Will support Node.js binding and react-native later\n     *\n     * @example\n     * ```js\n     * extra: {\n     *   session: {\n     *     set_denormal_as_zero: \"1\",\n     *     disable_prepacking: \"1\"\n     *   },\n     *   optimization: {\n     *     enable_gelu_approximation: \"1\"\n     *   }\n     * }\n     * ```\n     */\n    extra?: Record<string, unknown>;\n  }\n\n  // #region execution providers\n\n  // Currently, we have the following backends to support execution providers:\n  // Backend Node.js binding: supports 'cpu', 'dml' (win32), 'coreml' (macOS) and 'cuda' (linux).\n  // Backend WebAssembly: supports 'cpu', 'wasm', 'webgpu' and 'webnn'.\n  // Backend ONNX.js: supports 'webgl'.\n  // Backend React Native: supports 'cpu', 'xnnpack', 'coreml' (iOS), 'nnapi' (Android).\n  interface ExecutionProviderOptionMap {\n    coreml: CoreMLExecutionProviderOption;\n    cpu: CpuExecutionProviderOption;\n    cuda: CudaExecutionProviderOption;\n    dml: DmlExecutionProviderOption;\n    nnapi: NnapiExecutionProviderOption;\n    tensorrt: TensorRtExecutionProviderOption;\n    wasm: WebAssemblyExecutionProviderOption;\n    webgl: WebGLExecutionProviderOption;\n    webgpu: WebGpuExecutionProviderOption;\n    webnn: WebNNExecutionProviderOption;\n    qnn: QnnExecutionProviderOption;\n    xnnpack: XnnpackExecutionProviderOption;\n  }\n\n  type ExecutionProviderName = keyof ExecutionProviderOptionMap;\n  type ExecutionProviderConfig =\n    | ExecutionProviderOptionMap[ExecutionProviderName]\n    | ExecutionProviderOption\n    | ExecutionProviderName\n    | string;\n\n  export interface ExecutionProviderOption {\n    readonly name: string;\n  }\n  export interface CpuExecutionProviderOption extends ExecutionProviderOption {\n    readonly name: 'cpu';\n    useArena?: boolean;\n  }\n  export interface CudaExecutionProviderOption extends ExecutionProviderOption {\n    readonly name: 'cuda';\n    deviceId?: number;\n  }\n  export interface DmlExecutionProviderOption extends ExecutionProviderOption {\n    readonly name: 'dml';\n    deviceId?: number;\n  }\n  export interface TensorRtExecutionProviderOption extends ExecutionProviderOption {\n    readonly name: 'tensorrt';\n    deviceId?: number;\n  }\n  export interface WebAssemblyExecutionProviderOption extends ExecutionProviderOption {\n    readonly name: 'wasm';\n  }\n  export interface WebGLExecutionProviderOption extends ExecutionProviderOption {\n    readonly name: 'webgl';\n    // TODO: add flags\n  }\n  export interface XnnpackExecutionProviderOption extends ExecutionProviderOption {\n    readonly name: 'xnnpack';\n  }\n  export interface WebGpuExecutionProviderOption extends ExecutionProviderOption {\n    readonly name: 'webgpu';\n\n    /**\n     * Specify the preferred layout when running layout sensitive operators.\n     *\n     * @default 'NCHW'\n     */\n    preferredLayout?: 'NCHW' | 'NHWC';\n\n    /**\n     * Specify a list of node names that should be executed on CPU even when WebGPU EP is used.\n     */\n    forceCpuNodeNames?: readonly string[];\n\n    /**\n     * Specify the validation mode for WebGPU execution provider.\n     * - 'disabled': Disable all validation.\n     * When used in Node.js, disable validation may cause process crash if WebGPU errors occur. Be cautious when using\n     * this mode.\n     * When used in web, this mode is equivalent to 'wgpuOnly'.\n     * - 'wgpuOnly': Perform WebGPU internal validation only.\n     * - 'basic': Perform basic validation including WebGPU internal validation. This is the default mode.\n     * - 'full': Perform full validation. This mode may have performance impact. Use it for debugging purpose.\n     *\n     * @default 'basic'\n     */\n    validationMode?: 'disabled' | 'wgpuOnly' | 'basic' | 'full';\n\n    /**\n     * Specify an optional WebGPU device to be used by the WebGPU execution provider.\n     */\n    device?: TryGetGlobalType<'GPUDevice'>;\n  }\n\n  // #region WebNN options\n\n  interface WebNNExecutionProviderName extends ExecutionProviderOption {\n    readonly name: 'webnn';\n  }\n\n  /**\n   * Represents a set of options for creating a WebNN MLContext.\n   *\n   * @see https://www.w3.org/TR/webnn/#dictdef-mlcontextoptions\n   */\n  export interface WebNNContextOptions {\n    deviceType?: 'cpu' | 'gpu' | 'npu';\n    numThreads?: number;\n    powerPreference?: 'default' | 'low-power' | 'high-performance';\n  }\n\n  /**\n   * Represents a set of options for WebNN execution provider without MLContext.\n   */\n  export interface WebNNOptionsWithoutMLContext extends WebNNExecutionProviderName, WebNNContextOptions {\n    context?: never;\n  }\n\n  /**\n   * Represents a set of options for WebNN execution provider with MLContext.\n   *\n   * When MLContext is provided, the deviceType is also required so that the WebNN EP can determine the preferred\n   * channel layout.\n   *\n   * @see https://www.w3.org/TR/webnn/#dom-ml-createcontext\n   */\n  export interface WebNNOptionsWithMLContext\n    extends WebNNExecutionProviderName,\n      Omit<WebNNContextOptions, 'deviceType'>,\n      Required<Pick<WebNNContextOptions, 'deviceType'>> {\n    context: TryGetGlobalType<'MLContext'>;\n  }\n\n  /**\n   * Represents a set of options for WebNN execution provider with MLContext which is created from GPUDevice.\n   *\n   * @see https://www.w3.org/TR/webnn/#dom-ml-createcontext-gpudevice\n   */\n  export interface WebNNOptionsWebGpu extends WebNNExecutionProviderName {\n    context: TryGetGlobalType<'MLContext'>;\n    gpuDevice: TryGetGlobalType<'GPUDevice'>;\n  }\n\n  /**\n   * Options for WebNN execution provider.\n   */\n  export type WebNNExecutionProviderOption =\n    | WebNNOptionsWithoutMLContext\n    | WebNNOptionsWithMLContext\n    | WebNNOptionsWebGpu;\n\n  // #endregion\n\n  export interface QnnExecutionProviderOption extends ExecutionProviderOption {\n    readonly name: 'qnn';\n    /**\n     * Specify the QNN backend type. E.g., 'cpu' or 'htp'.\n     * Mutually exclusive with `backendPath`.\n     *\n     * @default 'htp'\n     */\n    backendType?: string;\n    /**\n     * Specify a path to the QNN backend library.\n     * Mutually exclusive with `backendType`.\n     */\n    backendPath?: string;\n    /**\n     * Specify whether to enable HTP FP16 precision.\n     *\n     * @default true\n     */\n    enableFp16Precision?: boolean;\n  }\n  export interface CoreMLExecutionProviderOption extends ExecutionProviderOption {\n    readonly name: 'coreml';\n    /**\n     * The bit flags for CoreML execution provider.\n     *\n     * ```\n     * COREML_FLAG_USE_CPU_ONLY = 0x001\n     * COREML_FLAG_ENABLE_ON_SUBGRAPH = 0x002\n     * COREML_FLAG_ONLY_ENABLE_DEVICE_WITH_ANE = 0x004\n     * COREML_FLAG_ONLY_ALLOW_STATIC_INPUT_SHAPES = 0x008\n     * COREML_FLAG_CREATE_MLPROGRAM = 0x010\n     * COREML_FLAG_USE_CPU_AND_GPU = 0x020\n     * ```\n     *\n     * See include/onnxruntime/core/providers/coreml/coreml_provider_factory.h for more details.\n     *\n     * This flag is available only in ONNXRuntime (Node.js binding).\n     */\n    coreMlFlags?: number;\n    /**\n     * Specify whether to use CPU only in CoreML EP.\n     *\n     * This setting is available only in ONNXRuntime (react-native).\n     */\n    useCPUOnly?: boolean;\n    useCPUAndGPU?: boolean;\n    /**\n     * Specify whether to enable CoreML EP on subgraph.\n     *\n     * This setting is available only in ONNXRuntime (react-native).\n     */\n    enableOnSubgraph?: boolean;\n    /**\n     * Specify whether to only enable CoreML EP for Apple devices with ANE (Apple Neural Engine).\n     *\n     * This setting is available only in ONNXRuntime (react-native).\n     */\n    onlyEnableDeviceWithANE?: boolean;\n  }\n  export interface NnapiExecutionProviderOption extends ExecutionProviderOption {\n    readonly name: 'nnapi';\n    useFP16?: boolean;\n    useNCHW?: boolean;\n    cpuDisabled?: boolean;\n    cpuOnly?: boolean;\n  }\n  // #endregion\n\n  // #endregion\n\n  // #region run options\n\n  /**\n   * A set of configurations for inference run behavior\n   */\n  export interface RunOptions {\n    /**\n     * Log severity level. See\n     * https://github.com/microsoft/onnxruntime/blob/main/include/onnxruntime/core/common/logging/severity.h\n     *\n     * This setting is available only in ONNXRuntime (Node.js binding and react-native) or WebAssembly backend\n     */\n    logSeverityLevel?: 0 | 1 | 2 | 3 | 4;\n\n    /**\n     * Log verbosity level.\n     *\n     * This setting is available only in WebAssembly backend. Will support Node.js binding and react-native later\n     */\n    logVerbosityLevel?: number;\n\n    /**\n     * Terminate all incomplete OrtRun calls as soon as possible if true\n     *\n     * This setting is available only in WebAssembly backend. Will support Node.js binding and react-native later\n     */\n    terminate?: boolean;\n\n    /**\n     * A tag for the Run() calls using this\n     *\n     * This setting is available only in ONNXRuntime (Node.js binding and react-native) or WebAssembly backend\n     */\n    tag?: string;\n\n    /**\n     * Set a single run configuration entry. See\n     * https://github.com/microsoft/onnxruntime/blob/main/include/onnxruntime/core/session/\n     * onnxruntime_run_options_config_keys.h\n     *\n     * This setting is available only in WebAssembly backend. Will support Node.js binding and react-native later\n     *\n     * @example\n     *\n     * ```js\n     * extra: {\n     *   memory: {\n     *     enable_memory_arena_shrinkage: \"1\",\n     *   }\n     * }\n     * ```\n     */\n    extra?: Record<string, unknown>;\n  }\n\n  // #endregion\n\n  // #region value metadata\n\n  /**\n   * The common part of the value metadata type for both tensor and non-tensor values.\n   */\n  export interface ValueMetadataBase {\n    /**\n     * The name of the specified input or output.\n     */\n    readonly name: string;\n  }\n\n  /**\n   * Represents the metadata of a non-tensor value.\n   */\n  export interface NonTensorValueMetadata extends ValueMetadataBase {\n    /**\n     * Get a value indicating whether the value is a tensor.\n     */\n    readonly isTensor: false;\n  }\n\n  /**\n   * Represents the metadata of a tensor value.\n   */\n  export interface TensorValueMetadata extends ValueMetadataBase {\n    /**\n     * Get a value indicating whether the value is a tensor.\n     */\n    readonly isTensor: true;\n    /**\n     * Get the data type of the tensor.\n     */\n    readonly type: Tensor.Type;\n    /**\n     * Get the shape of the tensor.\n     *\n     * If the shape is not defined, the value will an empty array. Otherwise, it will be an array representing the shape\n     * of the tensor. Each element in the array can be a number or a string. If the element is a number, it represents\n     * the corresponding dimension size. If the element is a string, it represents a symbolic dimension.\n     */\n    readonly shape: ReadonlyArray<number | string>;\n  }\n\n  /**\n   * Represents the metadata of a value.\n   */\n  export type ValueMetadata = NonTensorValueMetadata | TensorValueMetadata;\n\n  // #endregion\n}\n\n/**\n * Represent a runtime instance of an ONNX model.\n */\nexport interface InferenceSession {\n  // #region run()\n\n  /**\n   * Execute the model asynchronously with the given feeds and options.\n   *\n   * @param feeds - Representation of the model input. See type description of `InferenceSession.InputType` for detail.\n   * @param options - Optional. A set of options that controls the behavior of model inference.\n   * @returns A promise that resolves to a map, which uses output names as keys and OnnxValue as corresponding values.\n   */\n  run(feeds: InferenceSession.FeedsType, options?: InferenceSession.RunOptions): Promise<InferenceSession.ReturnType>;\n\n  /**\n   * Execute the model asynchronously with the given feeds, fetches and options.\n   *\n   * @param feeds - Representation of the model input. See type description of `InferenceSession.InputType` for detail.\n   * @param fetches - Representation of the model output. See type description of `InferenceSession.OutputType` for\n   * detail.\n   * @param options - Optional. A set of options that controls the behavior of model inference.\n   * @returns A promise that resolves to a map, which uses output names as keys and OnnxValue as corresponding values.\n   */\n  run(\n    feeds: InferenceSession.FeedsType,\n    fetches: InferenceSession.FetchesType,\n    options?: InferenceSession.RunOptions,\n  ): Promise<InferenceSession.ReturnType>;\n\n  // #endregion\n\n  // #region release()\n\n  /**\n   * Release the inference session and the underlying resources.\n   */\n  release(): Promise<void>;\n\n  // #endregion\n\n  // #region profiling\n\n  /**\n   * Start profiling.\n   */\n  startProfiling(): void;\n\n  /**\n   * End profiling.\n   */\n  endProfiling(): void;\n\n  // #endregion\n\n  // #region metadata\n\n  /**\n   * Get input names of the loaded model.\n   */\n  readonly inputNames: readonly string[];\n\n  /**\n   * Get output names of the loaded model.\n   */\n  readonly outputNames: readonly string[];\n\n  /**\n   * Get input metadata of the loaded model.\n   */\n  readonly inputMetadata: readonly InferenceSession.ValueMetadata[];\n\n  /**\n   * Get output metadata of the loaded model.\n   */\n  readonly outputMetadata: readonly InferenceSession.ValueMetadata[];\n\n  // #endregion\n}\n\nexport interface InferenceSessionFactory {\n  // #region create()\n\n  /**\n   * Create a new inference session and load model asynchronously from an ONNX model file.\n   *\n   * @param uri - The URI or file path of the model to load.\n   * @param options - specify configuration for creating a new inference session.\n   * @returns A promise that resolves to an InferenceSession object.\n   */\n  create(uri: string, options?: InferenceSession.SessionOptions): Promise<InferenceSession>;\n\n  /**\n   * Create a new inference session and load model asynchronously from an array bufer.\n   *\n   * @param buffer - An ArrayBuffer representation of an ONNX model.\n   * @param options - specify configuration for creating a new inference session.\n   * @returns A promise that resolves to an InferenceSession object.\n   */\n  create(buffer: ArrayBufferLike, options?: InferenceSession.SessionOptions): Promise<InferenceSession>;\n\n  /**\n   * Create a new inference session and load model asynchronously from segment of an array bufer.\n   *\n   * @param buffer - An ArrayBuffer representation of an ONNX model.\n   * @param byteOffset - The beginning of the specified portion of the array buffer.\n   * @param byteLength - The length in bytes of the array buffer.\n   * @param options - specify configuration for creating a new inference session.\n   * @returns A promise that resolves to an InferenceSession object.\n   */\n  create(\n    buffer: ArrayBufferLike,\n    byteOffset: number,\n    byteLength?: number,\n    options?: InferenceSession.SessionOptions,\n  ): Promise<InferenceSession>;\n\n  /**\n   * Create a new inference session and load model asynchronously from a Uint8Array.\n   *\n   * @param buffer - A Uint8Array representation of an ONNX model.\n   * @param options - specify configuration for creating a new inference session.\n   * @returns A promise that resolves to an InferenceSession object.\n   */\n  create(buffer: Uint8Array, options?: InferenceSession.SessionOptions): Promise<InferenceSession>;\n\n  // #endregion\n}\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nexport const InferenceSession: InferenceSessionFactory = InferenceSessionImpl;\n","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\n\nimport { OptionsFormat, OptionsNormalizationParameters, OptionsTensorLayout } from './tensor-factory.js';\n\nexport interface TensorToDataUrlOptions extends OptionsTensorLayout, OptionsFormat, OptionsNormalizationParameters {}\n\nexport interface TensorToImageDataOptions extends OptionsTensorLayout, OptionsFormat, OptionsNormalizationParameters {}\n\nexport interface ConversionUtils {\n  /**\n   * creates a DataURL instance from tensor\n   *\n   * @param options - An optional object representing options for creating a DataURL instance from the tensor.\n   *\n   * The following default settings will be applied:\n   * - `format`: `'RGB'`\n   * - `tensorLayout`: `'NCHW'`\n   * @returns a DataURL string representing the image converted from tensor data\n   */\n  toDataURL(options?: TensorToDataUrlOptions): string;\n\n  /**\n   * creates an ImageData instance from tensor\n   *\n   * @param options - An optional object representing options for creating an ImageData instance from the tensor.\n   *\n   * The following default settings will be applied:\n   * - `format`: `'RGB'`\n   * - `tensorLayout`: `'NCHW'`\n   * @returns an ImageData instance representing the image converted from tensor data\n   */\n  toImageData(options?: TensorToImageDataOptions): ImageData;\n}\n","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\n\nimport { Tensor, TypedTensor } from './tensor.js';\n\nexport type ImageFormat = 'RGB' | 'RGBA' | 'BGR' | 'RBG';\nexport type ImageTensorLayout = 'NHWC' | 'NCHW';\n\n// the following region contains type definitions for constructing tensor from a specific location.\n\n// #region types for constructing a tensor from a specific location\n\n/**\n * represent common properties of the parameter for constructing a tensor from a specific location.\n */\ninterface CommonConstructorParameters<T> extends Pick<Tensor, 'dims'> {\n  /**\n   * Specify the data type of the tensor.\n   */\n  readonly type: T;\n}\n\n/**\n * represent the parameter for constructing a tensor from a GPU resource.\n */\ninterface GpuResourceConstructorParameters<T extends Tensor.Type> {\n  /**\n   * an optional callback function to download data from GPU to CPU.\n   *\n   * If not provided, the tensor treat the GPU data as external resource.\n   */\n  download?(): Promise<Tensor.DataTypeMap[T]>;\n\n  /**\n   * an optional callback function that will be called when the tensor is disposed.\n   *\n   * If not provided, the tensor treat the GPU data as external resource.\n   */\n  dispose?(): void;\n}\n\n/**\n * represent the parameter for constructing a tensor from a pinned CPU buffer\n */\nexport interface CpuPinnedConstructorParameters<T extends Tensor.CpuPinnedDataTypes = Tensor.CpuPinnedDataTypes>\n  extends CommonConstructorParameters<T> {\n  /**\n   * Specify the location of the data to be 'cpu-pinned'.\n   */\n  readonly location: 'cpu-pinned';\n  /**\n   * Specify the CPU pinned buffer that holds the tensor data.\n   */\n  readonly data: Tensor.DataTypeMap[T];\n}\n\n/**\n * represent the parameter for constructing a tensor from a WebGL texture\n */\nexport interface TextureConstructorParameters<T extends Tensor.TextureDataTypes = Tensor.TextureDataTypes>\n  extends CommonConstructorParameters<T>,\n    GpuResourceConstructorParameters<T> {\n  /**\n   * Specify the location of the data to be 'texture'.\n   */\n  readonly location: 'texture';\n  /**\n   * Specify the WebGL texture that holds the tensor data.\n   */\n  readonly texture: Tensor.TextureType;\n}\n\n/**\n * represent the parameter for constructing a tensor from a WebGPU buffer\n */\nexport interface GpuBufferConstructorParameters<T extends Tensor.GpuBufferDataTypes = Tensor.GpuBufferDataTypes>\n  extends CommonConstructorParameters<T>,\n    GpuResourceConstructorParameters<T> {\n  /**\n   * Specify the location of the data to be 'gpu-buffer'.\n   */\n  readonly location: 'gpu-buffer';\n  /**\n   * Specify the WebGPU buffer that holds the tensor data.\n   */\n  readonly gpuBuffer: Tensor.GpuBufferType;\n}\n\nexport interface MLTensorConstructorParameters<T extends Tensor.MLTensorDataTypes = Tensor.MLTensorDataTypes>\n  extends CommonConstructorParameters<T>,\n    GpuResourceConstructorParameters<T> {\n  /**\n   * Specify the location of the data to be 'ml-tensor'.\n   */\n  readonly location: 'ml-tensor';\n\n  /**\n   * Specify the WebNN MLTensor that holds the tensor data.\n   */\n  readonly mlTensor: Tensor.MLTensorType;\n}\n\n// #endregion\n\n// the following region contains type definitions of each individual options.\n// the tensor factory functions use a composition of those options as the parameter type.\n\n// #region Options fields\n\nexport interface OptionsFormat {\n  /**\n   * Describes the image format represented in RGBA color space.\n   */\n  format?: ImageFormat;\n}\n\nexport interface OptionsTensorFormat {\n  /**\n   * Describes the image format of the tensor.\n   *\n   * NOTE: this is different from option 'format'. While option 'format' represents the original image, 'tensorFormat'\n   * represents the target format of the tensor. A transpose will be performed if they are different.\n   */\n  tensorFormat?: ImageFormat;\n}\n\nexport interface OptionsTensorDataType {\n  /**\n   * Describes the data type of the tensor.\n   */\n  dataType?: 'float32' | 'uint8';\n}\n\nexport interface OptionsTensorLayout {\n  /**\n   * Describes the tensor layout when representing data of one or more image(s).\n   */\n  tensorLayout?: ImageTensorLayout;\n}\n\nexport interface OptionsDimensions {\n  /**\n   * Describes the image height in pixel\n   */\n  height?: number;\n  /**\n   * Describes the image width in pixel\n   */\n  width?: number;\n}\n\nexport interface OptionResizedDimensions {\n  /**\n   * Describes the resized height. If omitted, original height will be used.\n   */\n  resizedHeight?: number;\n  /**\n   * Describes resized width - can be accessed via tensor dimensions as well\n   */\n  resizedWidth?: number;\n}\n\nexport interface OptionsNormalizationParameters {\n  /**\n   * Describes normalization parameters when preprocessing the image as model input.\n   *\n   * Data element are ranged from 0 to 255.\n   */\n  norm?: {\n    /**\n     * The 'bias' value for image normalization.\n     * - If omitted, use default value 0.\n     * - If it's a single number, apply to each channel\n     * - If it's an array of 3 or 4 numbers, apply element-wise. Number of elements need to match the number of channels\n     * for the corresponding image format\n     */\n    bias?: number | [number, number, number] | [number, number, number, number];\n    /**\n     * The 'mean' value for image normalization.\n     * - If omitted, use default value 255.\n     * - If it's a single number, apply to each channel\n     * - If it's an array of 3 or 4 numbers, apply element-wise. Number of elements need to match the number of channels\n     * for the corresponding image format\n     */\n    mean?: number | [number, number, number] | [number, number, number, number];\n  };\n}\n\n// #endregion\n\n// #region Options composition\n\nexport interface TensorFromImageDataOptions\n  extends OptionResizedDimensions,\n    OptionsTensorFormat,\n    OptionsTensorLayout,\n    OptionsTensorDataType,\n    OptionsNormalizationParameters {}\n\nexport interface TensorFromImageElementOptions\n  extends OptionResizedDimensions,\n    OptionsTensorFormat,\n    OptionsTensorLayout,\n    OptionsTensorDataType,\n    OptionsNormalizationParameters {}\n\nexport interface TensorFromUrlOptions\n  extends OptionsDimensions,\n    OptionResizedDimensions,\n    OptionsTensorFormat,\n    OptionsTensorLayout,\n    OptionsTensorDataType,\n    OptionsNormalizationParameters {}\n\nexport interface TensorFromImageBitmapOptions\n  extends OptionResizedDimensions,\n    OptionsTensorFormat,\n    OptionsTensorLayout,\n    OptionsTensorDataType,\n    OptionsNormalizationParameters {}\n\nexport interface TensorFromTextureOptions<T extends Tensor.TextureDataTypes>\n  extends Required<OptionsDimensions>,\n    OptionsFormat,\n    GpuResourceConstructorParameters<T> /* TODO: add more */ {}\n\nexport interface TensorFromGpuBufferOptions<T extends Tensor.GpuBufferDataTypes>\n  extends Pick<Tensor, 'dims'>,\n    GpuResourceConstructorParameters<T> {\n  /**\n   * Describes the data type of the tensor.\n   */\n  dataType?: T;\n}\n\nexport interface TensorFromMLTensorOptions<T extends Tensor.MLTensorDataTypes>\n  extends Pick<Tensor, 'dims'>,\n    GpuResourceConstructorParameters<T> {\n  /**\n   * Describes the data type of the tensor.\n   */\n  dataType?: T;\n}\n\n// #endregion\n\n/**\n * type TensorFactory defines the factory functions of 'Tensor' to create tensor instances from existing data or\n * resources.\n */\nexport interface TensorFactory {\n  /**\n   * create a tensor from an ImageData object\n   *\n   * @param imageData - the ImageData object to create tensor from\n   * @param options - An optional object representing options for creating tensor from ImageData.\n   *\n   * The following default settings will be applied:\n   * - `tensorFormat`: `'RGB'`\n   * - `tensorLayout`: `'NCHW'`\n   * - `dataType`: `'float32'`\n   * @returns A promise that resolves to a tensor object\n   */\n  fromImage(\n    imageData: ImageData,\n    options?: TensorFromImageDataOptions,\n  ): Promise<TypedTensor<'float32'> | TypedTensor<'uint8'>>;\n\n  /**\n   * create a tensor from a HTMLImageElement object\n   *\n   * @param imageElement - the HTMLImageElement object to create tensor from\n   * @param options - An optional object representing options for creating tensor from HTMLImageElement.\n   *\n   * The following default settings will be applied:\n   * - `tensorFormat`: `'RGB'`\n   * - `tensorLayout`: `'NCHW'`\n   * - `dataType`: `'float32'`\n   * @returns A promise that resolves to a tensor object\n   */\n  fromImage(\n    imageElement: HTMLImageElement,\n    options?: TensorFromImageElementOptions,\n  ): Promise<TypedTensor<'float32'> | TypedTensor<'uint8'>>;\n\n  /**\n   * create a tensor from URL\n   *\n   * @param urlSource - a string as a URL to the image or a data URL containing the image data.\n   * @param options - An optional object representing options for creating tensor from URL.\n   *\n   * The following default settings will be applied:\n   * - `tensorFormat`: `'RGB'`\n   * - `tensorLayout`: `'NCHW'`\n   * - `dataType`: `'float32'`\n   * @returns A promise that resolves to a tensor object\n   */\n  fromImage(urlSource: string, options?: TensorFromUrlOptions): Promise<TypedTensor<'float32'> | TypedTensor<'uint8'>>;\n\n  /**\n   * create a tensor from an ImageBitmap object\n   *\n   * @param bitmap - the ImageBitmap object to create tensor from\n   * @param options - An optional object representing options for creating tensor from URL.\n   *\n   * The following default settings will be applied:\n   * - `tensorFormat`: `'RGB'`\n   * - `tensorLayout`: `'NCHW'`\n   * - `dataType`: `'float32'`\n   * @returns A promise that resolves to a tensor object\n   */\n  fromImage(\n    bitmap: ImageBitmap,\n    options: TensorFromImageBitmapOptions,\n  ): Promise<TypedTensor<'float32'> | TypedTensor<'uint8'>>;\n\n  /**\n   * create a tensor from a WebGL texture\n   *\n   * @param texture - the WebGLTexture object to create tensor from\n   * @param options - An optional object representing options for creating tensor from WebGL texture.\n   *\n   * The options include following properties:\n   * - `width`: the width of the texture. Required.\n   * - `height`: the height of the texture. Required.\n   * - `format`: the format of the texture. If omitted, assume 'RGBA'.\n   * - `download`: an optional function to download the tensor data from GPU to CPU. If omitted, the GPU data\n   * will not be able to download. Usually, this is provided by a GPU backend for the inference outputs. Users don't\n   * need to provide this function.\n   * - `dispose`: an optional function to dispose the tensor data on GPU. If omitted, the GPU data will not be disposed.\n   * Usually, this is provided by a GPU backend for the inference outputs. Users don't need to provide this function.\n   *\n   * @returns a tensor object\n   */\n  fromTexture<T extends Tensor.TextureDataTypes = 'float32'>(\n    texture: Tensor.TextureType,\n    options: TensorFromTextureOptions<T>,\n  ): TypedTensor<'float32'>;\n\n  /**\n   * create a tensor from a WebGPU buffer\n   *\n   * @param buffer - the GPUBuffer object to create tensor from\n   * @param options - An optional object representing options for creating tensor from WebGPU buffer.\n   *\n   * The options include following properties:\n   * - `dataType`: the data type of the tensor. If omitted, assume 'float32'.\n   * - `dims`: the dimension of the tensor. Required.\n   * - `download`: an optional function to download the tensor data from GPU to CPU. If omitted, the GPU data\n   * will not be able to download. Usually, this is provided by a GPU backend for the inference outputs. Users don't\n   * need to provide this function.\n   * - `dispose`: an optional function to dispose the tensor data on GPU. If omitted, the GPU data will not be disposed.\n   * Usually, this is provided by a GPU backend for the inference outputs. Users don't need to provide this function.\n   *\n   * @returns a tensor object\n   */\n  fromGpuBuffer<T extends Tensor.GpuBufferDataTypes>(\n    buffer: Tensor.GpuBufferType,\n    options: TensorFromGpuBufferOptions<T>,\n  ): TypedTensor<T>;\n\n  /**\n   * create a tensor from a WebNN MLTensor\n   *\n   * @param tensor - the MLTensor object to create tensor from\n   * @param options - An optional object representing options for creating tensor from a WebNN MLTensor.\n   *\n   * The options include following properties:\n   * - `dataType`: the data type of the tensor. If omitted, assume 'float32'.\n   * - `dims`: the dimension of the tensor. Required.\n   * - `download`: an optional function to download the tensor data from the MLTensor to CPU. If omitted, the MLTensor\n   * data will not be able to download. Usually, this is provided by the WebNN backend for the inference outputs.\n   * Users don't need to provide this function.\n   * - `dispose`: an optional function to dispose the tensor data on the WebNN MLTensor. If omitted, the MLTensor will\n   * not be disposed. Usually, this is provided by the WebNN backend for the inference outputs. Users don't need to\n   * provide this function.\n   *\n   * @returns a tensor object\n   */\n  fromMLTensor<T extends Tensor.MLTensorDataTypes>(\n    tensor: Tensor.MLTensorType,\n    options: TensorFromMLTensorOptions<T>,\n  ): TypedTensor<T>;\n\n  /**\n   * create a tensor from a pre-allocated buffer. The buffer will be used as a pinned buffer.\n   *\n   * @param type - the tensor element type.\n   * @param buffer - a TypedArray corresponding to the type.\n   * @param dims - specify the dimension of the tensor. If omitted, a 1-D tensor is assumed.\n   *\n   * @returns a tensor object\n   */\n  fromPinnedBuffer<T extends Exclude<Tensor.Type, 'string'>>(\n    type: T,\n    buffer: Tensor.DataTypeMap[T],\n    dims?: readonly number[],\n  ): TypedTensor<T>;\n}\n","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\n\n/**\n * A string that represents a file's URL or path.\n *\n * Path is vailable only in onnxruntime-node or onnxruntime-web running in Node.js.\n */\nexport type FileUrlOrPath = string;\n\n/**\n * A Blob object that represents a file.\n */\nexport type FileBlob = Blob;\n\n/**\n * A Uint8Array, ArrayBuffer or SharedArrayBuffer object that represents a file content.\n *\n * When it is an ArrayBuffer or SharedArrayBuffer, the whole buffer is assumed to be the file content.\n */\nexport type FileData = Uint8Array | ArrayBufferLike;\n\n/**\n * Represents a file that can be loaded by the ONNX Runtime JavaScript API.\n */\nexport type FileType = FileUrlOrPath | FileBlob | FileData;\n\n/**\n * Represents an external data file.\n */\nexport interface ExternalDataFileDescription {\n  /**\n   * Specify the external data file.\n   */\n  data: FileType;\n  /**\n   * Specify the file path.\n   */\n  path: string;\n}\n\n/**\n * Represents an external data file.\n *\n * When using a string, it should be a file URL or path that in the same directory as the model file.\n */\nexport type ExternalDataFileType = ExternalDataFileDescription | FileUrlOrPath;\n\n/**\n * Options for model loading.\n */\nexport interface OnnxModelOptions {\n  /**\n   * Specifying a list of files that represents the external data.\n   */\n  externalData?: readonly ExternalDataFileType[];\n}\n","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\n\nimport { Tensor } from './tensor.js';\n\nexport type NonTensorType = never;\n\n/**\n * Type OnnxValue Represents both tensors and non-tensors value for model's inputs/outputs.\n *\n * NOTE: currently not support non-tensor\n */\nexport type OnnxValue = Tensor | NonTensorType;\n\n/**\n * Type OnnxValueDataLocation represents the location of the data of an OnnxValue.\n */\nexport type OnnxValueDataLocation = Tensor.DataLocation;\n","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\n\n/**\n * # ONNX Runtime JavaScript API\n *\n * ONNX Runtime JavaScript API is a unified API for all JavaScript usages, including the following NPM packages:\n *\n * - [onnxruntime-node](https://www.npmjs.com/package/onnxruntime-node)\n * - [onnxruntime-web](https://www.npmjs.com/package/onnxruntime-web)\n * - [onnxruntime-react-native](https://www.npmjs.com/package/onnxruntime-react-native)\n *\n * See also:\n * - [Get Started](https://onnxruntime.ai/docs/get-started/with-javascript/)\n * - [Inference examples](https://github.com/microsoft/onnxruntime-inference-examples/tree/main/js)\n *\n * @packageDocumentation\n */\n\nexport * from './backend.js';\nexport * from './env.js';\nexport * from './inference-session.js';\nexport * from './tensor.js';\nexport * from './tensor-conversion.js';\nexport * from './tensor-factory.js';\nexport * from './trace.js';\nexport * from './onnx-model.js';\nexport * from './onnx-value.js';\n","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\n\nexport const isNode = !!(typeof process !== 'undefined' && process.versions && process.versions.node);\n","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\n\n/// <reference lib=\"webworker\" />\n\n//\n// * type hack for \"HTMLImageElement\"\n//\n// in typescript, the type of \"HTMLImageElement\" is defined in lib.dom.d.ts, which is conflict with lib.webworker.d.ts.\n// when we use webworker, the lib.webworker.d.ts will be used, which does not have HTMLImageElement defined.\n//\n// we will get the following errors complaining that HTMLImageElement is not defined:\n//\n// ====================================================================================================================\n//\n// ../common/dist/cjs/tensor-factory.d.ts:187:29 - error TS2552: Cannot find name 'HTMLImageElement'. Did you mean\n// 'HTMLLIElement'?\n//\n// 187     fromImage(imageElement: HTMLImageElement, options?: TensorFromImageElementOptions):\n// Promise<TypedTensor<'float32'> | TypedTensor<'uint8'>>;\n//                                 ~~~~~~~~~~~~~~~~\n//\n// node_modules/@webgpu/types/dist/index.d.ts:83:7 - error TS2552: Cannot find name 'HTMLImageElement'. Did you mean\n// 'HTMLLIElement'?\n//\n// 83     | HTMLImageElement\n//          ~~~~~~~~~~~~~~~~\n//\n// ====================================================================================================================\n//\n// `HTMLImageElement` is only used in type declaration and not in real code. So we define it as `unknown` here to\n// bypass the type check.\n\n//\n// * type hack for \"document\"\n//\n// in typescript, the type of \"document\" is defined in lib.dom.d.ts, so it's not available in webworker.\n//\n// we will get the following errors complaining that document is not defined:\n//\n// ====================================================================================================================\n//\n// lib/wasm/wasm-utils-import.ts:7:33 - error TS2584: Cannot find name 'document'. Do you need to change your target\n// library? Try changing the 'lib' compiler option to include 'dom'.\n//\n// 7 export const scriptSrc = typeof document !== 'undefined' ? (document?.currentScript as HTMLScriptElement)?.src :\n//                                   ~~~~~~~~\n//\n// lib/wasm/wasm-utils-import.ts:7:61 - error TS2584: Cannot find name 'document'. Do you need to change your target\n// library? Try changing the 'lib' compiler option to include 'dom'.\n//\n// 7 export const scriptSrc = typeof document !== 'undefined' ? (document?.currentScript as HTMLScriptElement)?.src :\n//                                                               ~~~~~~~~\n//\n// lib/wasm/wasm-utils-import.ts:7:88 - error TS2552: Cannot find name 'HTMLScriptElement'. Did you mean\n// 'HTMLLIElement'?\n//\n// 7 export const scriptSrc = typeof document !== 'undefined' ? (document?.currentScript as HTMLScriptElement)?.src :\n//                                                                                          ~~~~~~~~~~~~~~~~~\n// ====================================================================================================================\n//\n// `document` is used to get the current script URL, which is not available in webworker. This file is served as a\n// \"dual\" file for entries of both webworker and the esm module.\n//\ndeclare global {\n  type HTMLImageElement = unknown;\n  type HTMLScriptElement = { src?: string };\n  const document: undefined | { currentScript?: HTMLScriptElement };\n}\n\n/**\n * @summary\n *\n * This file is served as a \"dual\" file for both entries of the following:\n * - The proxy worker itself.\n *   - When used as a worker, it listens to the messages from the main thread and performs the corresponding operations.\n *   - Should be imported directly using `new Worker()` in the main thread.\n *\n * - The ESM module that creates the proxy worker (as a worker launcher).\n *   - When used as a worker launcher, it creates the proxy worker and returns it.\n *   - Should be imported using `import()` in the main thread, with the query parameter `import=1`.\n *\n * This file will be always compiling into ESM format.\n */\n\nimport type { OrtWasmMessage, SerializableTensorMetadata } from '../proxy-messages.js';\nimport {\n  createSession,\n  copyFromExternalBuffer,\n  endProfiling,\n  extractTransferableBuffers,\n  initEp,\n  initRuntime,\n  releaseSession,\n  run,\n} from '../wasm-core-impl.js';\nimport { initializeWebAssembly } from '../wasm-factory.js';\nimport { scriptSrc } from '../wasm-utils-import.js';\n\nconst WORKER_NAME = 'ort-wasm-proxy-worker';\nconst isProxyWorker = globalThis.self?.name === WORKER_NAME;\n\nif (isProxyWorker) {\n  // Worker thread\n  self.onmessage = (ev: MessageEvent<OrtWasmMessage>): void => {\n    const { type, in: message } = ev.data;\n    try {\n      switch (type) {\n        case 'init-wasm':\n          initializeWebAssembly(message!.wasm).then(\n            () => {\n              initRuntime(message!).then(\n                () => {\n                  postMessage({ type });\n                },\n                (err) => {\n                  postMessage({ type, err });\n                },\n              );\n            },\n            (err) => {\n              postMessage({ type, err });\n            },\n          );\n          break;\n        case 'init-ep': {\n          const { epName, env } = message!;\n          initEp(env, epName).then(\n            () => {\n              postMessage({ type });\n            },\n            (err) => {\n              postMessage({ type, err });\n            },\n          );\n          break;\n        }\n        case 'copy-from': {\n          const { buffer } = message!;\n          const bufferData = copyFromExternalBuffer(buffer);\n          postMessage({ type, out: bufferData } as OrtWasmMessage);\n          break;\n        }\n        case 'create': {\n          const { model, options } = message!;\n          createSession(model, options).then(\n            (sessionMetadata) => {\n              postMessage({ type, out: sessionMetadata } as OrtWasmMessage);\n            },\n            (err) => {\n              postMessage({ type, err });\n            },\n          );\n          break;\n        }\n        case 'release':\n          releaseSession(message!);\n          postMessage({ type });\n          break;\n        case 'run': {\n          const { sessionId, inputIndices, inputs, outputIndices, options } = message!;\n          run(sessionId, inputIndices, inputs, outputIndices, new Array(outputIndices.length).fill(null), options).then(\n            (outputs) => {\n              if (outputs.some((o) => o[3] !== 'cpu')) {\n                postMessage({ type, err: 'Proxy does not support non-cpu tensor location.' });\n              } else {\n                postMessage(\n                  { type, out: outputs } as OrtWasmMessage,\n                  extractTransferableBuffers([...inputs, ...outputs] as SerializableTensorMetadata[]),\n                );\n              }\n            },\n            (err) => {\n              postMessage({ type, err });\n            },\n          );\n          break;\n        }\n        case 'end-profiling':\n          endProfiling(message!);\n          postMessage({ type });\n          break;\n        default:\n      }\n    } catch (err) {\n      postMessage({ type, err } as OrtWasmMessage);\n    }\n  };\n}\n\nexport default isProxyWorker\n  ? null\n  : (urlOverride?: string) =>\n      new Worker(urlOverride ?? scriptSrc!, { type: BUILD_DEFS.IS_ESM ? 'module' : 'classic', name: WORKER_NAME });\n","async function e(e={}){var r=e,t=!!globalThis.window,n=!!globalThis.WorkerGlobalScope,a=n&&self.name?.startsWith(\"em-pthread\");r.mountExternalData=(e,t)=>{e.startsWith(\"./\")&&(e=e.substring(2)),(r.Zc||(r.Zc=new Map)).set(e,t)},r.unmountExternalData=()=>{delete r.Zc},globalThis.SharedArrayBuffer??new WebAssembly.Memory({initial:0,maximum:0,Me:!0}).buffer.constructor;let i=()=>{const e=e=>(...r)=>{const t=$r;return r=e(...r),$r!=t?new Promise(((e,r)=>{Hr={resolve:e,reject:r}})):r};(()=>{for(const t of[\"_OrtAppendExecutionProvider\",\"_OrtCreateSession\",\"_OrtRun\",\"_OrtRunWithBinding\",\"_OrtBindInput\"])r[t]=e(r[t])})(),\"undefined\"!=typeof jsepRunAsync&&(r._OrtRun=jsepRunAsync(r._OrtRun),r._OrtRunWithBinding=jsepRunAsync(r._OrtRunWithBinding)),i=void 0};r.asyncInit=()=>{i?.()};var o,u,c=(e,r)=>{throw r},s=import.meta.url,f=\"\";if(t||n){try{f=new URL(\".\",s).href}catch{}n&&(u=e=>{var r=new XMLHttpRequest;return r.open(\"GET\",e,!1),r.responseType=\"arraybuffer\",r.send(null),new Uint8Array(r.response)}),o=async e=>{if(S(e))return new Promise(((r,t)=>{var n=new XMLHttpRequest;n.open(\"GET\",e,!0),n.responseType=\"arraybuffer\",n.onload=()=>{200==n.status||0==n.status&&n.response?r(n.response):t(n.status)},n.onerror=t,n.send(null)}));var r=await fetch(e,{credentials:\"same-origin\"});if(r.ok)return r.arrayBuffer();throw Error(r.status+\" : \"+r.url)}}var l,d,m,h,p,v,g=console.log.bind(console),b=console.error.bind(console),w=g,y=b,x=!1,S=e=>e.startsWith(\"file://\");function A(){ue.buffer!=O.buffer&&_()}if(a){var B=!1;function Ro(e){try{var t=e.data,n=t.Uc;if(\"load\"===n){let e=[];self.onmessage=r=>e.push(r),v=()=>{postMessage({Uc:\"loaded\"});for(let r of e)Ro(r);self.onmessage=Ro};for(const e of t.ne)r[e]&&!r[e].proxy||(r[e]=(...r)=>{postMessage({Uc:\"callHandler\",me:e,args:r})},\"print\"==e&&(w=r[e]),\"printErr\"==e&&(y=r[e]));ue=t.we,_(),d=t.xe,z(),Eo()}else if(\"run\"===n){!function(e){var r=(A(),E)[e+52>>>2>>>0];e=(A(),E)[e+56>>>2>>>0],Ya(r,r-e),Ha(r)}(t.Sc),Ia(t.Sc,0,0,1,0,0),ae(),Mr(t.Sc),B||(da(),B=!0);try{ce(t.te,t.ad)}catch(e){if(\"unwind\"!=e)throw e}}else\"setimmediate\"!==t.target&&(\"checkMailbox\"===n?B&&Pr():n&&(y(`worker: received unknown command ${n}`),y(t)))}catch(e){throw Wa(),e}}self.onunhandledrejection=e=>{throw e.reason||e},self.onmessage=Ro}var O,T,C,M,P,E,R,U,k,D,I,W=!1;function _(){var e=ue.buffer;r.HEAP8=O=new Int8Array(e),C=new Int16Array(e),r.HEAPU8=T=new Uint8Array(e),M=new Uint16Array(e),r.HEAP32=P=new Int32Array(e),r.HEAPU32=E=new Uint32Array(e),R=new Float32Array(e),U=new Float64Array(e),k=new BigInt64Array(e),D=new BigUint64Array(e)}function L(){W=!0,a?v():zi.dc()}function $(e){throw y(e=\"Aborted(\"+e+\")\"),x=!0,e=new WebAssembly.RuntimeError(e+\". Build with -sASSERTIONS for more info.\"),p?.(e),e}function G(){return{a:{sa:Ni,g:de,K:he,f:we,n:ye,h:xe,wa:Se,b:Ae,ea:Be,Ja:Te,o:Ce,fa:Ue,Za:ke,$b:De,bc:Ie,_a:We,Xa:_e,Qa:Le,Wa:$e,qa:Ge,ac:ze,Zb:Fe,Ya:Ve,_b:Ne,db:Ye,Fa:Ke,Ub:er,Sb:cr,Ea:fr,P:lr,J:dr,Tb:pr,ma:Ar,Vb:Br,Ta:Or,Xb:Er,Ka:Ur,Pb:kr,Ha:Dr,Sa:Mr,ab:Ir,W:Xr,r:tt,c:nr,tb:nt,y:at,N:it,D:ot,m:ut,s:ct,ub:st,I:ft,V:lt,j:dt,u:mt,q:ht,k:pt,Na:vt,Oa:yt,Pa:xt,La:St,Ma:At,Rb:Tt,fb:Ct,cb:Et,$:kt,sb:Dt,na:It,bb:Mt,Y:Wt,$a:_t,Yb:Lt,G:Ot,ib:$t,_:Gt,ra:Ht,Wb:qt,hb:Yt,gb:jt,pb:hn,F:pn,va:gn,ua:bn,rb:wn,Z:yn,w:xn,ob:Sn,nb:An,mb:Bn,qb:On,lb:Tn,kb:Cn,jb:Mn,Ua:Un,Va:kn,Ia:J,ga:Dn,pa:In,Ra:Wn,oa:Ln,Eb:Mo,za:xo,Fb:Co,Aa:yo,H:fo,e:ji,t:Hi,x:Yi,B:ao,Ib:go,L:uo,v:Zi,Ba:bo,ca:So,ja:vo,Gb:To,Hb:Oo,Da:lo,Ca:po,Kb:mo,O:co,da:wo,d:Xi,A:Qi,l:qi,Db:Po,p:Ki,z:no,C:Ji,E:eo,M:io,Lb:so,U:Ao,ka:oo,ba:Bo,Mb:to,Nb:ro,R:ho,i:$n,a:ue,eb:Z,Jb:Gn,la:zn,Q:Fn,ta:Vn,Ob:Nn,S:Yn,Ab:Hn,Bb:qn,xa:jn,ha:Xn,T:Zn,Ga:Qn,ya:Jn,aa:Kn,yb:ea,cc:ra,X:ta,Cb:na,vb:aa,wb:oa,xb:ua,ia:ca,zb:sa,Qb:fa}}}async function z(){function e(e,t){var n=zi=e.exports;e={};for(let[r,t]of Object.entries(n))\"function\"==typeof t?(n=_r(t),e[r]=n):e[r]=t;return zi=e,zi=function(){var e=zi,r=e=>r=>e(r)>>>0,t=e=>()=>e()>>>0;return(e=Object.assign({},e)).ec=r(e.ec),e.Hc=t(e.Hc),e.Jc=r(e.Jc),e.vd=(e=>(r,t)=>e(r,t)>>>0)(e.vd),e.Ad=r(e.Ad),e.Bd=t(e.Bd),e.Fd=r(e.Fd),e}(),re.push(zi.md),la=(e=zi).ec,da=e.fc,r._OrtInit=e.gc,r._OrtGetLastError=e.hc,r._OrtCreateSessionOptions=e.ic,r._OrtAppendExecutionProvider=e.jc,r._OrtAddFreeDimensionOverride=e.kc,r._OrtAddSessionConfigEntry=e.lc,r._OrtReleaseSessionOptions=e.mc,r._OrtCreateSession=e.nc,r._OrtReleaseSession=e.oc,r._OrtGetInputOutputCount=e.pc,r._OrtGetInputOutputMetadata=e.qc,r._OrtFree=e.rc,r._OrtCreateTensor=e.sc,r._OrtGetTensorData=e.tc,r._OrtReleaseTensor=e.uc,r._OrtCreateRunOptions=e.vc,r._OrtAddRunConfigEntry=e.wc,r._OrtReleaseRunOptions=e.xc,r._OrtCreateBinding=e.yc,r._OrtBindInput=e.zc,r._OrtBindOutput=e.Ac,r._OrtClearBoundOutputs=e.Bc,r._OrtReleaseBinding=e.Cc,r._OrtRunWithBinding=e.Dc,r._OrtRun=e.Ec,r._OrtEndProfiling=e.Fc,ma=r._OrtGetWebGpuDevice=e.Gc,ha=e.Hc,pa=r._free=e.Ic,va=r._malloc=e.Jc,ga=r._wgpuBufferRelease=e.Kc,ba=r._wgpuCreateInstance=e.Lc,wa=e.Mc,ya=e.Nc,xa=e.Oc,Sa=e.Pc,Aa=e.Qc,Ba=e.Tc,Oa=e.bd,Ta=e.cd,Ca=e.dd,Ma=e.fd,Pa=e.gd,Ea=e.hd,Ra=e.id,Ua=e.jd,ka=e.kd,Da=e.ld,Ia=e.od,Wa=e.pd,_a=e.qd,La=e.rd,$a=e.sd,Ga=e.td,za=e.ud,Fa=e.vd,Va=e.wd,Na=e.xd,Ya=e.yd,Ha=e.zd,qa=e.Ad,ja=e.Bd,Xa=e.Cd,Za=e.Dd,Qa=e.Ed,Ja=e.Fd,Ka=e.Gd,ei=e.Hd,ri=e.Id,ti=e.Jd,ni=e.Kd,ai=e.Ld,ii=e.Md,oi=e.Nd,ui=e.Od,ci=e.Pd,si=e.Qd,fi=e.Rd,li=e.Sd,di=e.Td,mi=e.Ud,hi=e.Vd,pi=e.Wd,vi=e.Yd,gi=e.Zd,bi=e._d,wi=e.$d,yi=e.be,xi=e.ce,Si=e.de,Ai=e.ee,Bi=e.fe,Oi=e.ge,Ti=e.qe,Ci=e.ve,Mi=e.ye,Pi=e.ze,Ei=e.Ae,Ri=e.Be,Ui=e.Ce,ki=e.De,Di=e.Ee,Ii=e.Fe,Wi=e.Ge,_i=e.ef,Li=e.ff,$i=e.gf,Gi=e.hf,d=t,zi}var t,n=G();return r.instantiateWasm?new Promise((t=>{r.instantiateWasm(n,((r,n)=>{t(e(r,n))}))})):a?e(new WebAssembly.Instance(d,G()),d):(I??=r.locateFile?r.locateFile?r.locateFile(\"ort-wasm-simd-threaded.asyncify.wasm\",f):f+\"ort-wasm-simd-threaded.asyncify.wasm\":new URL(\"ort-wasm-simd-threaded.asyncify.wasm\",import.meta.url).href,t=await async function(e){var r=I;if(!l&&!S(r))try{var t=fetch(r,{credentials:\"same-origin\"});return await WebAssembly.instantiateStreaming(t,e)}catch(e){y(`wasm streaming compile failed: ${e}`),y(\"falling back to ArrayBuffer instantiation\")}return async function(e,r){try{var t=await async function(e){if(!l)try{var r=await o(e);return new Uint8Array(r)}catch{}if(e==I&&l)e=new Uint8Array(l);else{if(!u)throw\"both async and sync fetching of the wasm failed\";e=u(e)}return e}(e);return await WebAssembly.instantiate(t,r)}catch(e){y(`failed to asynchronously prepare wasm: ${e}`),$(e)}}(r,e)}(n),e(t.instance,t.module))}class F{name=\"ExitStatus\";constructor(e){this.message=`Program terminated with exit(${e})`,this.status=e}}var V=e=>{e.terminate(),e.onmessage=()=>{}},N=[],Y=0,H=null,q=e=>{0==K.length&&(oe(),ie(K[0]));var r=K.pop();if(!r)return 6;ee.push(r),te[e.Sc]=r,r.Sc=e.Sc;var t={Uc:\"run\",te:e.se,ad:e.ad,Sc:e.Sc};return r.postMessage(t,e.he),0},j=0,X=(e,r,...t)=>{var n,a=16*t.length,i=ja(),o=qa(a),u=o>>>3;for(n of t)\"bigint\"==typeof n?((A(),k)[u++>>>0]=1n,(A(),k)[u++>>>0]=n):((A(),k)[u++>>>0]=0n,(A(),U)[u++>>>0]=n);return e=_a(e,0,a,o,r),Ha(i),e};function Z(e){if(a)return X(0,1,e);if(m=e,!(0<j)){for(var r of ee)V(r);for(r of K)V(r);K=[],ee=[],te={},x=!0}c(0,new F(e))}function Q(e){if(a)return X(1,0,e);J(e)}var J=e=>{if(m=e,a)throw Q(e),\"unwind\";Z(e)},K=[],ee=[],re=[],te={},ne=e=>{var r=e.Sc;delete te[r],K.push(e),ee.splice(ee.indexOf(e),1),e.Sc=0,La(r)};function ae(){re.forEach((e=>e()))}var ie=e=>new Promise((t=>{e.onmessage=n=>{var a=n.data;if(n=a.Uc,a.$c&&a.$c!=ha()){var i=te[a.$c];i?i.postMessage(a,a.he):y(`Internal error! Worker sent a message \"${n}\" to target pthread ${a.$c}, but that thread no longer exists!`)}else\"checkMailbox\"===n?Pr():\"spawnThread\"===n?q(a):\"cleanupThread\"===n?Tr((()=>{ne(te[a.ue])})):\"loaded\"===n?(e.loaded=!0,t(e)):\"setimmediate\"===a.target?e.postMessage(a):\"uncaughtException\"===n?e.onerror(a.error):\"callHandler\"===n?r[a.me](...a.args):n&&y(`worker sent an unknown command ${n}`)},e.onerror=e=>{throw y(`worker sent an error! ${e.filename}:${e.lineno}: ${e.message}`),e};var n,a=[];for(n of[])r.propertyIsEnumerable(n)&&a.push(n);e.postMessage({Uc:\"load\",ne:a,we:ue,xe:d})}));function oe(){var e=new Worker((()=>{const e=URL;return import.meta.url>\"file:\"&&import.meta.url<\"file;\"?new e(BUILD_DEFS.BUNDLE_FILENAME,import.meta.url):new URL(import.meta.url)})(),{type:\"module\",workerData:\"em-pthread\",name:\"em-pthread\"});K.push(e)}var ue,ce=(e,r)=>{j=0,e=ei(e,r),0<j?m=e:$a(e)},se=[],fe=0,le=e=>-9007199254740992>e||9007199254740992<e?NaN:Number(e);function de(e){var r=new ge(e>>>=0);return 0==(A(),O)[r.Vc+12>>>0]&&(pe(r,!0),fe--),ve(r,!1),se.push(r),Ja(e)}var me=0,he=()=>{Va(0,0);var e=se.pop();Xa(e.nd),me=0};function pe(e,r){r=r?1:0,(A(),O)[e.Vc+12>>>0]=r}function ve(e,r){r=r?1:0,(A(),O)[e.Vc+13>>>0]=r}class ge{constructor(e){this.nd=e,this.Vc=e-24}}var be=e=>{var r=me;if(!r)return Na(0),0;var t=new ge(r);(A(),E)[t.Vc+16>>>2>>>0]=r;var n=(A(),E)[t.Vc+4>>>2>>>0];if(!n)return Na(0),r;for(var a of e){if(0===a||a===n)break;if(Qa(a,n,t.Vc+16))return Na(a),r}return Na(n),r};function we(){return be([])}function ye(e){return be([e>>>0])}function xe(e,r,t,n){return be([e>>>0,r>>>0,t>>>0,n>>>0])}var Se=()=>{var e=se.pop();e||$(\"no exception to throw\");var r=e.nd;throw 0==(A(),O)[e.Vc+13>>>0]&&(se.push(e),ve(e,!0),pe(e,!1),fe++),Za(r),me=r};function Ae(e,r,t){var n=new ge(e>>>=0);throw r>>>=0,t>>>=0,(A(),E)[n.Vc+16>>>2>>>0]=0,(A(),E)[n.Vc+4>>>2>>>0]=r,(A(),E)[n.Vc+8>>>2>>>0]=t,Za(e),fe++,me=e}var Be=()=>fe;function Oe(e,r,t,n){return a?X(2,1,e,r,t,n):Te(e,r,t,n)}function Te(e,r,t,n){if(e>>>=0,r>>>=0,t>>>=0,n>>>=0,!globalThis.SharedArrayBuffer)return 6;var i=[];return a&&0===i.length?Oe(e,r,t,n):(e={se:t,Sc:e,ad:n,he:i},a?(e.Uc=\"spawnThread\",postMessage(e,i),0):q(e))}function Ce(e){throw me||=e>>>0,me}var Me=globalThis.TextDecoder&&new TextDecoder,Pe=(e,r,t,n)=>{if(t=r+t,n)return t;for(;e[r]&&!(r>=t);)++r;return r},Ee=(e,r=0,t,n)=>{if(16<(t=Pe(e,r>>>=0,t,n))-r&&e.buffer&&Me)return Me.decode(e.buffer instanceof ArrayBuffer?e.subarray(r,t):e.slice(r,t));for(n=\"\";r<t;){var a=e[r++];if(128&a){var i=63&e[r++];if(192==(224&a))n+=String.fromCharCode((31&a)<<6|i);else{var o=63&e[r++];65536>(a=224==(240&a)?(15&a)<<12|i<<6|o:(7&a)<<18|i<<12|o<<6|63&e[r++])?n+=String.fromCharCode(a):(a-=65536,n+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else n+=String.fromCharCode(a)}return n},Re=(e,r,t)=>(e>>>=0)?Ee((A(),T),e,r,t):\"\";function Ue(e,r,t){return a?X(3,1,e,r,t):0}function ke(e,r){if(a)return X(4,1,e,r)}function De(e,r){if(a)return X(5,1,e,r)}function Ie(e,r,t){if(a)return X(6,1,e,r,t)}function We(e,r,t){return a?X(7,1,e,r,t):0}function _e(e,r){if(a)return X(8,1,e,r)}function Le(e,r,t){if(a)return X(9,1,e,r,t)}function $e(e,r,t,n){if(a)return X(10,1,e,r,t,n)}function Ge(e,r,t,n){if(a)return X(11,1,e,r,t,n)}function ze(e,r,t,n){if(a)return X(12,1,e,r,t,n)}function Fe(e){if(a)return X(13,1,e)}function Ve(e,r){if(a)return X(14,1,e,r)}function Ne(e,r,t){if(a)return X(15,1,e,r,t)}var Ye=()=>$(\"\"),He=e=>{e>>>=0;for(var r=\"\";;){var t=(A(),T)[e++>>>0];if(!t)return r;r+=String.fromCharCode(t)}},qe={},je={},Xe={},Ze=class extends Error{constructor(e){super(e),this.name=\"BindingError\"}};function Qe(e,r,t={}){return function(e,r,t={}){var n=r.name;if(!e)throw new Ze(`type \"${n}\" must have a positive integer typeid pointer`);if(je.hasOwnProperty(e)){if(t.oe)return;throw new Ze(`Cannot register type '${n}' twice`)}je[e]=r,delete Xe[e],qe.hasOwnProperty(e)&&(r=qe[e],delete qe[e],r.forEach((e=>e())))}(e,r,t)}var Je=(e,r,t)=>{switch(r){case 1:return t?e=>(A(),O)[e>>>0]:e=>(A(),T)[e>>>0];case 2:return t?e=>(A(),C)[e>>>1>>>0]:e=>(A(),M)[e>>>1>>>0];case 4:return t?e=>(A(),P)[e>>>2>>>0]:e=>(A(),E)[e>>>2>>>0];case 8:return t?e=>(A(),k)[e>>>3>>>0]:e=>(A(),D)[e>>>3>>>0];default:throw new TypeError(`invalid integer width (${r}): ${e}`)}};function Ke(e,r,t,n,a){e>>>=0,t>>>=0,r=He(r>>>0);let i=e=>e;if(n=0n===n){const e=8*t;i=r=>BigInt.asUintN(e,r),a=i(a)}Qe(e,{name:r,Rc:i,Xc:(e,r)=>(\"number\"==typeof r&&(r=BigInt(r)),r),Wc:Je(r,t,!n),Yc:null})}function er(e,r,t,n){Qe(e>>>=0,{name:r=He(r>>>0),Rc:function(e){return!!e},Xc:function(e,r){return r?t:n},Wc:function(e){return this.Rc((A(),T)[e>>>0])},Yc:null})}var rr=[],tr=[0,1,,1,null,1,!0,1,!1,1];function nr(e){9<(e>>>=0)&&0==--tr[e+1]&&(tr[e]=void 0,rr.push(e))}var ar=e=>{if(!e)throw new Ze(`Cannot use deleted val. handle = ${e}`);return tr[e]},ir=e=>{switch(e){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:const r=rr.pop()||tr.length;return tr[r]=e,tr[r+1]=1,r}};function or(e){return this.Rc((A(),E)[e>>>2>>>0])}var ur={name:\"emscripten::val\",Rc:e=>{var r=ar(e);return nr(e),r},Xc:(e,r)=>ir(r),Wc:or,Yc:null};function cr(e){return Qe(e>>>0,ur)}var sr=(e,r)=>{switch(r){case 4:return function(e){return this.Rc((A(),R)[e>>>2>>>0])};case 8:return function(e){return this.Rc((A(),U)[e>>>3>>>0])};default:throw new TypeError(`invalid float width (${r}): ${e}`)}};function fr(e,r,t){t>>>=0,Qe(e>>>=0,{name:r=He(r>>>0),Rc:e=>e,Xc:(e,r)=>r,Wc:sr(r,t),Yc:null})}function lr(e,r,t,n,a){e>>>=0,t>>>=0,r=He(r>>>0);let i=e=>e;if(0===n){var o=32-8*t;i=e=>e<<o>>>o,a=i(a)}Qe(e,{name:r,Rc:i,Xc:(e,r)=>r,Wc:Je(r,t,0!==n),Yc:null})}function dr(e,r,t){function n(e){var r=(A(),E)[e>>>2>>>0];return e=(A(),E)[e+4>>>2>>>0],new a((A(),O).buffer,e,r)}var a=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array][r];Qe(e>>>=0,{name:t=He(t>>>0),Rc:n,Wc:n},{oe:!0})}var mr=(e,r,t)=>{var n=(A(),T);if(r>>>=0,0<t){var a=r;t=r+t-1;for(var i=0;i<e.length;++i){var o=e.codePointAt(i);if(127>=o){if(r>=t)break;n[r++>>>0]=o}else if(2047>=o){if(r+1>=t)break;n[r++>>>0]=192|o>>6,n[r++>>>0]=128|63&o}else if(65535>=o){if(r+2>=t)break;n[r++>>>0]=224|o>>12,n[r++>>>0]=128|o>>6&63,n[r++>>>0]=128|63&o}else{if(r+3>=t)break;n[r++>>>0]=240|o>>18,n[r++>>>0]=128|o>>12&63,n[r++>>>0]=128|o>>6&63,n[r++>>>0]=128|63&o,i++}}n[r>>>0]=0,e=r-a}else e=0;return e},hr=e=>{for(var r=0,t=0;t<e.length;++t){var n=e.charCodeAt(t);127>=n?r++:2047>=n?r+=2:55296<=n&&57343>=n?(r+=4,++t):r+=3}return r};function pr(e,r){Qe(e>>>=0,{name:r=He(r>>>0),Rc(e){var r=(A(),E)[e>>>2>>>0];return r=Re(e+4,r,!0),pa(e),r},Xc(e,r){r instanceof ArrayBuffer&&(r=new Uint8Array(r));var t=\"string\"==typeof r;if(!(t||ArrayBuffer.isView(r)&&1==r.BYTES_PER_ELEMENT))throw new Ze(\"Cannot pass non-string to std::string\");var n=t?hr(r):r.length,a=va(4+n+1),i=a+4;return(A(),E)[a>>>2>>>0]=n,t?mr(r,i,n+1):(A(),T).set(r,i>>>0),null!==e&&e.push(pa,a),a},Wc:or,Yc(e){pa(e)}})}var vr=globalThis.TextDecoder?new TextDecoder(\"utf-16le\"):void 0,gr=(e,r,t)=>{if(e>>>=1,16<(r=Pe((A(),M),e,r/2,t))-e&&vr)return vr.decode((A(),M).slice(e,r));for(t=\"\";e<r;++e){var n=(A(),M)[e>>>0];t+=String.fromCharCode(n)}return t},br=(e,r,t)=>{if(t??=2147483647,2>t)return 0;var n=r;t=(t-=2)<2*e.length?t/2:e.length;for(var a=0;a<t;++a){var i=e.charCodeAt(a);(A(),C)[r>>>1>>>0]=i,r+=2}return(A(),C)[r>>>1>>>0]=0,r-n},wr=e=>2*e.length,yr=(e,r,t)=>{var n=\"\";e>>>=2;for(var a=0;!(a>=r/4);a++){var i=(A(),E)[e+a>>>0];if(!i&&!t)break;n+=String.fromCodePoint(i)}return n},xr=(e,r,t)=>{if(r>>>=0,t??=2147483647,4>t)return 0;var n=r;t=n+t-4;for(var a=0;a<e.length;++a){var i=e.codePointAt(a);if(65535<i&&a++,(A(),P)[r>>>2>>>0]=i,(r+=4)+4>t)break}return(A(),P)[r>>>2>>>0]=0,r-n},Sr=e=>{for(var r=0,t=0;t<e.length;++t)65535<e.codePointAt(t)&&t++,r+=4;return r};function Ar(e,r,t){if(e>>>=0,r>>>=0,t=He(t>>>=0),2===r)var n=gr,a=br,i=wr;else n=yr,a=xr,i=Sr;Qe(e,{name:t,Rc:e=>{var t=(A(),E)[e>>>2>>>0];return t=n(e+4,t*r,!0),pa(e),t},Xc:(e,n)=>{if(\"string\"!=typeof n)throw new Ze(`Cannot pass non-string to C++ string type ${t}`);var o=i(n),u=va(4+o+r);return(A(),E)[u>>>2>>>0]=o/r,a(n,u+4,o+r),null!==e&&e.push(pa,u),u},Wc:or,Yc(e){pa(e)}})}function Br(e,r){Qe(e>>>=0,{pe:!0,name:r=He(r>>>0),Rc:()=>{},Xc:()=>{}})}function Or(e){Ia(e>>>0,!n,1,!t,131072,!1),ae()}var Tr=e=>{if(!x)try{if(e(),!(0<j))try{a?ha()&&$a(m):J(m)}catch(e){e instanceof F||\"unwind\"==e||c(0,e)}}catch(e){e instanceof F||\"unwind\"==e||c(0,e)}},Cr=!Atomics.waitAsync||globalThis.navigator?.userAgent&&91>Number((navigator.userAgent.match(/Chrom(e|ium)\\/([0-9]+)\\./)||[])[2]);function Mr(e){e>>>=0,Cr||(Atomics.waitAsync((A(),P),e>>>2,e).value.then(Pr),e+=128,Atomics.store((A(),P),e>>>2,1))}var Pr=()=>Tr((()=>{var e=ha();e&&(Mr(e),za())}));function Er(e,r){(e>>>=0)==r>>>0?setTimeout(Pr):a?postMessage({$c:e,Uc:\"checkMailbox\"}):(e=te[e])&&e.postMessage({Uc:\"checkMailbox\"})}var Rr=[];function Ur(e,r,t,n,a){for(r>>>=0,a>>>=0,Rr.length=0,t=a>>>3,n=a+n>>>3;t<n;){var i;i=(A(),k)[t++>>>0]?(A(),k)[t++>>>0]:(A(),U)[t++>>>0],Rr.push(i)}return(r?Vi[r]:Fi[e])(...Rr)}var kr=()=>{j=0};function Dr(e){e>>>=0,a?postMessage({Uc:\"cleanupThread\",ue:e}):ne(te[e])}function Ir(e){}var Wr=e=>{try{e()}catch(e){$(e)}};function _r(e){var r=(...r)=>{zr.push(e);try{return e(...r)}finally{x||(zr.pop(),$r&&1===Lr&&0===zr.length&&(Lr=0,j+=1,Wr(Li),\"undefined\"!=typeof Fibers&&Fibers.Oe()))}};return Nr.set(e,r),r}var Lr=0,$r=null,Gr=0,zr=[],Fr=new Map,Vr=new Map,Nr=new Map,Yr=0,Hr=null,qr=[];var jr=e=>function(e){if(!x){if(0===Lr){var r=!1,t=!1;e(((e=0)=>{if(!x&&(Gr=e,r=!0,t)){Lr=2,Wr((()=>$i($r))),\"undefined\"!=typeof MainLoop&&MainLoop.le&&MainLoop.resume(),e=!1;try{var n=function(){var e=(A(),P)[$r+8>>>2>>>0];return e=Vr.get(e),e=Nr.get(e),--j,e()}()}catch(r){n=r,e=!0}var a=!1;if(!$r){var i=Hr;i&&(Hr=null,(e?i.reject:i.resolve)(n),a=!0)}if(e&&!a)throw n}})),t=!0,r||(Lr=1,$r=function(){var e=va(65548),r=e+12;if((A(),E)[e>>>2>>>0]=r,(A(),E)[e+4>>>2>>>0]=r+65536,r=zr[0],!Fr.has(r)){var t=Yr++;Fr.set(r,t),Vr.set(t,r)}return r=Fr.get(r),(A(),P)[e+8>>>2>>>0]=r,e}(),\"undefined\"!=typeof MainLoop&&MainLoop.le&&MainLoop.pause(),Wr((()=>_i($r))))}else 2===Lr?(Lr=0,Wr(Gi),pa($r),$r=null,qr.forEach(Tr)):$(`invalid state: ${Lr}`);return Gr}}((r=>{e().then(r)}));function Xr(e){return e>>>=0,jr((async()=>{var r=await ar(e);return ir(r)}))}var Zr=[],Qr=e=>{var r=Zr.length;return Zr.push(e),r},Jr=(e,r)=>{for(var t=Array(e),n=0;n<e;++n){var a=n,i=(A(),E)[r+4*n>>>2>>>0],o=je[i];if(void 0===o)throw e=`parameter ${n}`,i=la(i),r=He(i),pa(i),new Ze(`${e} has unknown type ${r}`);t[a]=o}return t},Kr=(e,r,t)=>{var n=[];return e=e(n,t),n.length&&((A(),E)[r>>>2>>>0]=ir(n)),e},et={},rt=e=>{var r=et[e];return void 0===r?He(e):r};function tt(e,r,t){var[n,...a]=Jr(e,r>>>0);r=n.Xc.bind(n);var i=a.map((e=>e.Wc.bind(e)));e--;var o={toValue:ar};switch(e=i.map(((e,r)=>{var t=`argFromPtr${r}`;return o[t]=e,`${t}(args${r?\"+\"+8*r:\"\"})`})),t){case 0:var u=\"toValue(handle)\";break;case 2:u=\"new (toValue(handle))\";break;case 3:u=\"\";break;case 1:o.getStringOrSymbol=rt,u=\"toValue(handle)[getStringOrSymbol(methodName)]\"}return u+=`(${e})`,n.pe||(o.toReturnWire=r,o.emval_returnValue=Kr,u=`return emval_returnValue(toReturnWire, destructorsRef, ${u})`),u=`return function (handle, methodName, destructorsRef, args) {\\n  ${u}\\n  }`,t=new Function(Object.keys(o),u)(...Object.values(o)),u=`methodCaller<(${a.map((e=>e.name))}) => ${n.name}>`,Qr(Object.defineProperty(t,\"name\",{value:u}))}function nt(e,r){return r>>>=0,(e=ar(e>>>0))==ar(r)}function at(e){return(e>>>=0)?(e=rt(e),ir(globalThis[e])):ir(globalThis)}function it(e){return e=rt(e>>>0),ir(r[e])}function ot(e,r){return r>>>=0,e=ar(e>>>0),r=ar(r),ir(e[r])}function ut(e){9<(e>>>=0)&&(tr[e+1]+=1)}function ct(e,r,t,n,a){return Zr[e>>>0](r>>>0,t>>>0,n>>>0,a>>>0)}function st(e,r,t,n,a){return ct(e>>>0,r>>>0,t>>>0,n>>>0,a>>>0)}function ft(){return ir([])}function lt(e){e=ar(e>>>0);for(var r=Array(e.length),t=0;t<e.length;t++)r[t]=e[t];return ir(r)}function dt(e){return ir(rt(e>>>0))}function mt(){return ir({})}function ht(e){for(var r=ar(e>>>=0);r.length;){var t=r.pop();r.pop()(t)}nr(e)}function pt(e,r,t){r>>>=0,t>>>=0,e=ar(e>>>0),r=ar(r),t=ar(t),e[r]=t}function vt(e,r){e=le(e),r>>>=0,e=new Date(1e3*e),(A(),P)[r>>>2>>>0]=e.getUTCSeconds(),(A(),P)[r+4>>>2>>>0]=e.getUTCMinutes(),(A(),P)[r+8>>>2>>>0]=e.getUTCHours(),(A(),P)[r+12>>>2>>>0]=e.getUTCDate(),(A(),P)[r+16>>>2>>>0]=e.getUTCMonth(),(A(),P)[r+20>>>2>>>0]=e.getUTCFullYear()-1900,(A(),P)[r+24>>>2>>>0]=e.getUTCDay(),e=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,(A(),P)[r+28>>>2>>>0]=e}var gt=e=>0==e%4&&(0!=e%100||0==e%400),bt=[0,31,60,91,121,152,182,213,244,274,305,335],wt=[0,31,59,90,120,151,181,212,243,273,304,334];function yt(e,r){e=le(e),r>>>=0,e=new Date(1e3*e),(A(),P)[r>>>2>>>0]=e.getSeconds(),(A(),P)[r+4>>>2>>>0]=e.getMinutes(),(A(),P)[r+8>>>2>>>0]=e.getHours(),(A(),P)[r+12>>>2>>>0]=e.getDate(),(A(),P)[r+16>>>2>>>0]=e.getMonth(),(A(),P)[r+20>>>2>>>0]=e.getFullYear()-1900,(A(),P)[r+24>>>2>>>0]=e.getDay();var t=(gt(e.getFullYear())?bt:wt)[e.getMonth()]+e.getDate()-1|0;(A(),P)[r+28>>>2>>>0]=t,(A(),P)[r+36>>>2>>>0]=-60*e.getTimezoneOffset(),t=new Date(e.getFullYear(),6,1).getTimezoneOffset();var n=new Date(e.getFullYear(),0,1).getTimezoneOffset();e=0|(t!=n&&e.getTimezoneOffset()==Math.min(n,t)),(A(),P)[r+32>>>2>>>0]=e}function xt(e){e>>>=0;var r=new Date((A(),P)[e+20>>>2>>>0]+1900,(A(),P)[e+16>>>2>>>0],(A(),P)[e+12>>>2>>>0],(A(),P)[e+8>>>2>>>0],(A(),P)[e+4>>>2>>>0],(A(),P)[e>>>2>>>0],0),t=(A(),P)[e+32>>>2>>>0],n=r.getTimezoneOffset(),a=new Date(r.getFullYear(),6,1).getTimezoneOffset(),i=new Date(r.getFullYear(),0,1).getTimezoneOffset(),o=Math.min(i,a);return 0>t?(A(),P)[e+32>>>2>>>0]=Number(a!=i&&o==n):0<t!=(o==n)&&(a=Math.max(i,a),r.setTime(r.getTime()+6e4*((0<t?o:a)-n))),(A(),P)[e+24>>>2>>>0]=r.getDay(),t=(gt(r.getFullYear())?bt:wt)[r.getMonth()]+r.getDate()-1|0,(A(),P)[e+28>>>2>>>0]=t,(A(),P)[e>>>2>>>0]=r.getSeconds(),(A(),P)[e+4>>>2>>>0]=r.getMinutes(),(A(),P)[e+8>>>2>>>0]=r.getHours(),(A(),P)[e+12>>>2>>>0]=r.getDate(),(A(),P)[e+16>>>2>>>0]=r.getMonth(),(A(),P)[e+20>>>2>>>0]=r.getYear(),e=r.getTime(),BigInt(isNaN(e)?-1:e/1e3)}function St(e,r,t,n,i,o,u){return a?X(16,1,e,r,t,n,i,o,u):-52}function At(e,r,t,n,i,o){if(a)return X(17,1,e,r,t,n,i,o)}var Bt={},Ot=()=>performance.timeOrigin+performance.now();function Tt(e,r){if(a)return X(18,1,e,r);if(Bt[e]&&(clearTimeout(Bt[e].id),delete Bt[e]),!r)return 0;var t=setTimeout((()=>{delete Bt[e],Tr((()=>Ga(e,performance.timeOrigin+performance.now())))}),r);return Bt[e]={id:t,Ne:r},0}function Ct(e,r,t,n){e>>>=0,r>>>=0,t>>>=0,n>>>=0;var a=(new Date).getFullYear(),i=new Date(a,0,1).getTimezoneOffset();a=new Date(a,6,1).getTimezoneOffset();var o=Math.max(i,a);(A(),E)[e>>>2>>>0]=60*o,(A(),P)[r>>>2>>>0]=Number(i!=a),e=(r=e=>{var r=Math.abs(e);return`UTC${0<=e?\"-\":\"+\"}${String(Math.floor(r/60)).padStart(2,\"0\")}${String(r%60).padStart(2,\"0\")}`})(i),r=r(a),a<i?(mr(e,t,17),mr(r,n,17)):(mr(e,n,17),mr(r,t,17))}var Mt=()=>Date.now(),Pt=1;function Et(e,r,t){if(t>>>=0,!(0<=e&&3>=e))return 28;if(0===e)e=Date.now();else{if(!Pt)return 52;e=performance.timeOrigin+performance.now()}return e=Math.round(1e6*e),(A(),k)[t>>>3>>>0]=BigInt(e),0}var Rt=[],Ut=(e,r)=>{Rt.length=0;for(var t;t=(A(),T)[e++>>>0];){var n=105!=t;r+=(n&=112!=t)&&r%8?4:0,Rt.push(112==t?(A(),E)[r>>>2>>>0]:106==t?(A(),k)[r>>>3>>>0]:105==t?(A(),P)[r>>>2>>>0]:(A(),U)[r>>>3>>>0]),r+=n?8:4}return Rt};function kt(e,r,t){return e>>>=0,r=Ut(r>>>0,t>>>0),Vi[e](...r)}function Dt(e,r,t){return e>>>=0,r=Ut(r>>>0,t>>>0),Vi[e](...r)}var It=()=>{};function Wt(e,r){return y(Re(e>>>0,r>>>0))}var _t=()=>{throw j+=1,\"unwind\"};function Lt(){return 4294901760}var $t=()=>1,Gt=()=>navigator.hardwareConcurrency,zt={},Ft=e=>{var r=hr(e)+1,t=va(r);return t&&mr(e,t,r),t},Vt=e=>{var r;return(r=/\\bwasm-function\\[\\d+\\]:(0x[0-9a-f]+)/.exec(e))?+r[1]:(r=/:(\\d+):\\d+(?:\\)|$)/.exec(e))?2147483648|+r[1]:0},Nt=e=>{for(var r of e)(e=Vt(r))&&(zt[e]=r)};function Yt(){var e=Error().stack.toString().split(\"\\n\");return\"Error\"==e[0]&&e.shift(),Nt(e),zt.Xd=Vt(e[3]),zt.re=e,zt.Xd}function Ht(e){if(!(e=zt[e>>>0]))return 0;var r;if(r=/^\\s+at .*\\.wasm\\.(.*) \\(.*\\)$/.exec(e))e=r[1];else if(r=/^\\s+at (.*) \\(.*\\)$/.exec(e))e=r[1];else{if(!(r=/^(.+?)@/.exec(e)))return 0;e=r[1]}return pa(Ht.ae??0),Ht.ae=Ft(e),Ht.ae}function qt(e){e>>>=0;var r=(A(),T).length;if(e<=r||4294901760<e)return!1;for(var t=1;4>=t;t*=2){var n=r*(1+.2/t);n=Math.min(n,e+100663296);e:{n=(Math.min(4294901760,65536*Math.ceil(Math.max(e,n)/65536))-ue.buffer.byteLength+65535)/65536|0;try{ue.grow(n),_();var a=1;break e}catch(e){}a=void 0}if(a)return!0}return!1}function jt(e,r,t){if(e>>>=0,r>>>=0,zt.Xd==e)var n=zt.re;else\"Error\"==(n=Error().stack.toString().split(\"\\n\"))[0]&&n.shift(),Nt(n);for(var a=3;n[a]&&Vt(n[a])!=e;)++a;for(e=0;e<t&&n[e+a];++e)(A(),P)[r+4*e>>>2>>>0]=Vt(n[e+a]);return e}var Xt=e=>{var r=hr(e)+1,t=qa(r);return mr(e,t,r),t},Zt=[],Qt=(e,r)=>{Zt[e>>>=0]=r},Jt=[],Kt=[],en=(e,r)=>{Kt[e]=new Promise((t=>r.finally((()=>t(e)))))},rn=e=>{if(e)return Zt[e>>>0]},tn=(e,r,t)=>{(A(),E)[e>>>2>>>0]=r,(A(),E)[e+4>>>2>>>0]=t},nn=e=>{var r=(A(),E)[e>>>2>>>0];return e=(A(),E)[e+4>>>2>>>0],Re(r,e)},an=e=>{var r=(A(),E)[e>>>2>>>0];return e=(A(),E)[e+4>>>2>>>0],r?Re(r,e):0===e?\"\":void 0},on=e=>{var r=an(e+4),t=(t=(A(),E)[e+12>>>2>>>0])?rn(t):\"auto\";if(e+=16){var n=rn((A(),E)[e+4>>>2>>>0]),a=(A(),E)[e+16>>>2>>>0],i=(A(),E)[e+20>>>2>>>0];if(a){for(var o={},u=0;u<a;++u){var c=i+24*u;o[nn(c+4)]=(A(),U)[c+16>>>3>>>0]}a=o}else a=void 0;e={module:n,constants:a,entryPoint:an(e+8)}}else e=void 0;return{label:r,layout:t,compute:e}},un=(e,r)=>{function t(t,n){t=e[t],(A(),P)[r+n>>>2>>>0]=t}function n(t,n){t=e[t],(A(),k)[r+n>>>3>>>0]=BigInt(t)}t(\"maxTextureDimension1D\",4),t(\"maxTextureDimension2D\",8),t(\"maxTextureDimension3D\",12),t(\"maxTextureArrayLayers\",16),t(\"maxBindGroups\",20),t(\"maxBindGroupsPlusVertexBuffers\",24),t(\"maxBindingsPerBindGroup\",28),t(\"maxDynamicUniformBuffersPerPipelineLayout\",32),t(\"maxDynamicStorageBuffersPerPipelineLayout\",36),t(\"maxSampledTexturesPerShaderStage\",40),t(\"maxSamplersPerShaderStage\",44),t(\"maxStorageBuffersPerShaderStage\",48),t(\"maxStorageTexturesPerShaderStage\",52),t(\"maxUniformBuffersPerShaderStage\",56),t(\"minUniformBufferOffsetAlignment\",80),t(\"minStorageBufferOffsetAlignment\",84),n(\"maxUniformBufferBindingSize\",64),n(\"maxStorageBufferBindingSize\",72),t(\"maxVertexBuffers\",88),n(\"maxBufferSize\",96),t(\"maxVertexAttributes\",104),t(\"maxVertexBufferArrayStride\",108),t(\"maxInterStageShaderVariables\",112),t(\"maxColorAttachments\",116),t(\"maxColorAttachmentBytesPerSample\",120),t(\"maxComputeWorkgroupStorageSize\",124),t(\"maxComputeInvocationsPerWorkgroup\",128),t(\"maxComputeWorkgroupSizeX\",132),t(\"maxComputeWorkgroupSizeY\",136),t(\"maxComputeWorkgroupSizeZ\",140),t(\"maxComputeWorkgroupsPerDimension\",144),void 0!==e.Le&&t(\"maxImmediateSize\",148)},cn=[,\"validation\",\"out-of-memory\",\"internal\"],sn=[,\"compatibility\",\"core\"],fn={1:\"core-features-and-limits\",2:\"depth-clip-control\",3:\"depth32float-stencil8\",4:\"texture-compression-bc\",5:\"texture-compression-bc-sliced-3d\",6:\"texture-compression-etc2\",7:\"texture-compression-astc\",8:\"texture-compression-astc-sliced-3d\",9:\"timestamp-query\",10:\"indirect-first-instance\",11:\"shader-f16\",12:\"rg11b10ufloat-renderable\",13:\"bgra8unorm-storage\",14:\"float32-filterable\",15:\"float32-blendable\",16:\"clip-distances\",17:\"dual-source-blending\",18:\"subgroups\",19:\"texture-formats-tier1\",20:\"texture-formats-tier2\",21:\"primitive-index\",327692:\"chromium-experimental-unorm16-texture-formats\",327693:\"chromium-experimental-snorm16-texture-formats\",327732:\"chromium-experimental-multi-draw-indirect\"},ln=[,\"low-power\",\"high-performance\"],dn=[,\"occlusion\",\"timestamp\"],mn={undefined:1,unknown:1,destroyed:2};function hn(e,r,t,n,a,i){r=le(r),t=le(t),n>>>=0,a>>>=0,i>>>=0;var o=rn(e>>>0);if(e={},i){var u=(A(),E)[i+12>>>2>>>0];if(u){var c=(A(),E)[i+16>>>2>>>0];e.requiredFeatures=Array.from((A(),E).subarray(c>>>2>>>0,c+4*u>>>2>>>0),(e=>fn[e]))}var s=(A(),E)[i+20>>>2>>>0];if(s){var f={};function l(e,r,t=!1){r=s+r,4294967295==(r=(A(),E)[r>>>2>>>0])||t&&0==r||(f[e]=r)}function d(e,r){r=s+r;var t=(A(),E)[r>>>2>>>0],n=(A(),E)[r+4>>>2>>>0];4294967295==t&&4294967295==n||(f[e]=4294967296*(A(),E)[r+4>>>2>>>0]+(A(),E)[r>>>2>>>0])}l(\"maxTextureDimension1D\",4),l(\"maxTextureDimension2D\",8),l(\"maxTextureDimension3D\",12),l(\"maxTextureArrayLayers\",16),l(\"maxBindGroups\",20),l(\"maxBindGroupsPlusVertexBuffers\",24),l(\"maxDynamicUniformBuffersPerPipelineLayout\",32),l(\"maxDynamicStorageBuffersPerPipelineLayout\",36),l(\"maxSampledTexturesPerShaderStage\",40),l(\"maxSamplersPerShaderStage\",44),l(\"maxStorageBuffersPerShaderStage\",48),l(\"maxStorageTexturesPerShaderStage\",52),l(\"maxUniformBuffersPerShaderStage\",56),l(\"minUniformBufferOffsetAlignment\",80),l(\"minStorageBufferOffsetAlignment\",84),d(\"maxUniformBufferBindingSize\",64),d(\"maxStorageBufferBindingSize\",72),l(\"maxVertexBuffers\",88),d(\"maxBufferSize\",96),l(\"maxVertexAttributes\",104),l(\"maxVertexBufferArrayStride\",108),l(\"maxInterStageShaderVariables\",112),l(\"maxColorAttachments\",116),l(\"maxColorAttachmentBytesPerSample\",120),l(\"maxComputeWorkgroupStorageSize\",124),l(\"maxComputeInvocationsPerWorkgroup\",128),l(\"maxComputeWorkgroupSizeX\",132),l(\"maxComputeWorkgroupSizeY\",136),l(\"maxComputeWorkgroupSizeZ\",140),l(\"maxComputeWorkgroupsPerDimension\",144),l(\"maxImmediateSize\",148,!0),e.requiredLimits=f}(u=(A(),E)[i+24>>>2>>>0])&&(u={label:an(u+4)},e.defaultQueue=u),e.label=an(i+4)}j+=1,en(r,o.requestDevice(e).then((e=>{--j,Qt(a,e.queue),Qt(n,e),t&&(j+=1,en(t,e.lost.then((r=>{--j,e.onuncapturederror=()=>{};var n=ja(),a=Xt(r.message);Pa(t,mn[r.reason],a),Ha(n)})))),e.onuncapturederror=e=>{var r=5;e.error instanceof GPUValidationError?r=2:e.error instanceof GPUOutOfMemoryError?r=3:e.error instanceof GPUInternalError&&(r=4);var t=ja();e=Xt(e.error.message),Da(n,r,e),Ha(t)},\"adapterInfo\"in e||(e.adapterInfo=o.info),ka(r,1,n,0)}),(e=>{--j;var a=ja();e=Xt(e.message),ka(r,3,n,e),t&&Pa(t,4,e),Ha(a)})))}function pn(e){var r=rn(e>>>=0),t=Jt[e];if(t){for(var n=0;n<t.length;++n)t[n]();delete Jt[e]}r.destroy()}var vn=()=>{var e=\"getMappedRange size=0 no longer means WGPU_WHOLE_MAP_SIZE\";vn.ed||(vn.ed={}),vn.ed[e]||(vn.ed[e]=1,y(e))};function gn(e,r,t){r>>>=0,t>>>=0;var n=rn(e>>>=0);0===t&&vn(),4294967295==t&&(t=void 0);try{var a=n.getMappedRange(r,t)}catch(e){return 0}var i=Fa(16,a.byteLength);return(A(),T).set(new Uint8Array(a),i>>>0),Jt[e].push((()=>pa(i))),i}function bn(e,r,t){r>>>=0,t>>>=0;var n=rn(e>>>=0);0===t&&vn(),4294967295==t&&(t=void 0);try{var a=n.getMappedRange(r,t)}catch(e){return 0}var i=Fa(16,a.byteLength);return(A(),T).fill(0,i,a.byteLength),Jt[e].push((()=>{new Uint8Array(a).set((A(),T).subarray(i>>>0,i+a.byteLength>>>0)),pa(i)})),i}function wn(e,r,t,n,a){e>>>=0,r=le(r),t=le(t),a>>>=0;var i=rn(e);Jt[e]=[],4294967295==a&&(a=void 0),j+=1,en(r,i.mapAsync(t,n>>>0,a).then((()=>{--j,Ea(r,1,0)}),(t=>{--j,ja();var n=Xt(t.message);Ea(r,\"AbortError\"===t.name?4:\"OperationError\"===t.name?3:0,n),delete Jt[e]})))}function yn(e){var r=rn(e>>>=0),t=Jt[e];if(t){for(var n=0;n<t.length;++n)t[n]();delete Jt[e],r.unmap()}}function xn(e){delete Zt[e>>>0]}function Sn(e,r,t){e>>>=0,r>>>=0,t>>>=0;var n=!!(A(),E)[r+32>>>2>>>0];r={label:an(r+4),usage:(A(),E)[r+16>>>2>>>0],size:4294967296*(A(),E)[r+28>>>2>>>0]+(A(),E)[r+24>>>2>>>0],mappedAtCreation:n},e=rn(e);try{var a=e.createBuffer(r)}catch(e){return!1}return Qt(t,a),n&&(Jt[t]=[]),!0}function An(e,r,t,n){e>>>=0,r=le(r),n>>>=0,t=on(t>>>0),e=rn(e),j+=1,en(r,e.createComputePipelineAsync(t).then((e=>{--j,Qt(n,e),Ma(r,1,n,0)}),(e=>{--j;var t=ja(),a=Xt(e.message);Ma(r,\"validation\"===e.reason?3:\"internal\"===e.reason?4:0,n,a),Ha(t)})))}function Bn(e,r,t){e>>>=0,r>>>=0,t>>>=0;var n=(A(),E)[r>>>2>>>0],a=(A(),E)[n+4>>>2>>>0];r={label:an(r+4),code:\"\"},2===a&&(r.code=nn(n+8)),Qt(t,rn(e).createShaderModule(r))}var On=e=>{(e=rn(e)).onuncapturederror=null,e.destroy()};function Tn(e,r){r=le(r),e=rn(e>>>0),j+=1,en(r,e.popErrorScope().then((e=>{--j;var t=5;e?e instanceof GPUValidationError?t=2:e instanceof GPUOutOfMemoryError?t=3:e instanceof GPUInternalError&&(t=4):t=1;var n=ja();e=e?Xt(e.message):0,Ra(r,1,t,e),Ha(n)}),(e=>{--j;var t=ja();e=Xt(e.message),Ra(r,1,5,e),Ha(t)})))}function Cn(e,r,t,n){if(r=le(r),n>>>=0,t>>>=0){var a=(A(),E)[t+4>>>2>>>0];a={featureLevel:sn[a],powerPreference:ln[(A(),E)[t+8>>>2>>>0]],forceFallbackAdapter:!!(A(),E)[t+12>>>2>>>0]},0!==(t=(A(),E)[t>>>2>>>0])&&(A(),a.Qe=!!(A(),E)[t+8>>>2>>>0])}\"gpu\"in navigator?(j+=1,en(r,navigator.gpu.requestAdapter(a).then((e=>{if(--j,e)Qt(n,e),Ua(r,1,n,0);else{e=ja();var t=Xt(\"WebGPU not available on this browser (requestAdapter returned null)\");Ua(r,3,n,t),Ha(e)}}),(e=>{--j;var t=ja();e=Xt(e.message),Ua(r,4,n,e),Ha(t)})))):(t=ja(),a=Xt(\"WebGPU not available on this browser (navigator.gpu is not available)\"),Ua(r,3,n,a),Ha(t))}function Mn(e,r,t){return e>>>=0,r>>>=0,t>>>=0,jr((async()=>{var n=[];if(t){var a=(A(),P)[t>>>2>>>0];n.length=r+1,n[r]=new Promise((e=>setTimeout(e,a,0)))}else n.length=r;for(var i=0;i<r;++i){var o=4294967296*(A(),E)[e+8*i+4>>>2>>>0]+(A(),E)[e+8*i>>>2>>>0];if(!(o in Kt))return o;n[i]=Kt[o]}return n=await Promise.race(n),delete Kt[n],n}))}var Pn,En={},Rn=()=>{if(!Pn){var e,r={USER:\"web_user\",LOGNAME:\"web_user\",PATH:\"/\",PWD:\"/\",HOME:\"/home/web_user\",LANG:(globalThis.navigator?.language??\"C\").replace(\"-\",\"_\")+\".UTF-8\",_:\"./this.program\"};for(e in En)void 0===En[e]?delete r[e]:r[e]=En[e];var t=[];for(e in r)t.push(`${e}=${r[e]}`);Pn=t}return Pn};function Un(e,r){if(a)return X(19,1,e,r);e>>>=0,r>>>=0;var t,n=0,i=0;for(t of Rn()){var o=r+n;(A(),E)[e+i>>>2>>>0]=o,n+=mr(t,o,1/0)+1,i+=4}return 0}function kn(e,r){if(a)return X(20,1,e,r);e>>>=0,r>>>=0;var t=Rn();for(var n of((A(),E)[e>>>2>>>0]=t.length,e=0,t))e+=hr(n)+1;return(A(),E)[r>>>2>>>0]=e,0}function Dn(e){return a?X(21,1,e):52}function In(e,r,t,n){return a?X(22,1,e,r,t,n):52}function Wn(e,r,t,n){return a?X(23,1,e,r,t,n):70}var _n=[null,[],[]];function Ln(e,r,t,n){if(a)return X(24,1,e,r,t,n);r>>>=0,t>>>=0,n>>>=0;for(var i=0,o=0;o<t;o++){var u=(A(),E)[r>>>2>>>0],c=(A(),E)[r+4>>>2>>>0];r+=8;for(var s=0;s<c;s++){var f=e,l=(A(),T)[u+s>>>0],d=_n[f];0===l||10===l?((1===f?w:y)(Ee(d)),d.length=0):d.push(l)}i+=c}return(A(),E)[n>>>2>>>0]=i,0}function $n(e){return e>>>0}function Gn(e,r){return un(rn(e>>>0).limits,r>>>0),1}function zn(e,r){return rn(e>>>0).features.has(fn[r])}function Fn(e){return BigInt(rn(e>>>0).size)}function Vn(e){return BigInt(rn(e>>>0).usage)}function Nn(e,r){if(e>>>=0,r>>>=0){var t=an(r+4);t={label:t,timestampWrites:r=0!==(r=(A(),E)[r+12>>>2>>>0])?{querySet:rn((A(),E)[r+4>>>2>>>0]),beginningOfPassWriteIndex:(A(),E)[r+8>>>2>>>0],endOfPassWriteIndex:(A(),E)[r+12>>>2>>>0]}:void 0}}return e=rn(e),r=Aa(0),Qt(r,e.beginComputePass(t)),r}function Yn(e,r,t,n,a,i){t=le(t),a=le(a),i=le(i),rn(e>>>0).copyBufferToBuffer(rn(r>>>0),t,rn(n>>>0),a,i)}function Hn(e){e=rn(e>>>0);var r=xa(0);return Qt(r,e.finish()),r}function qn(e,r,t,n,a,i){i=le(i),rn(e>>>0).resolveQuerySet(rn(r>>>0),t,n,rn(a>>>0),i)}function jn(e,r,t,n){rn(e>>>0).dispatchWorkgroups(r,t,n)}function Xn(e,r,t){t=le(t),rn(e>>>0).dispatchWorkgroupsIndirect(rn(r>>>0),t)}function Zn(e){rn(e>>>0).end()}function Qn(e,r,t,n,a){n>>>=0,a>>>=0,e=rn(e>>>0),t=rn(t>>>0),0==n?e.setBindGroup(r,t):e.setBindGroup(r,t,(A(),E),a>>>2,n)}function Jn(e,r){rn(e>>>0).setPipeline(rn(r>>>0))}function Kn(e,r,t){rn(e>>>0).Pe(rn(r>>>0),t)}function ea(e,r){e=rn(e>>>0);var t=ya(0);return Qt(t,e.getBindGroupLayout(r)),t}function ra(e,r){e>>>=0;var t=an(4+(r>>>=0)),n=rn((A(),E)[r+12>>>2>>>0]),a=(A(),E)[r+16>>>2>>>0];r=(A(),E)[r+20>>>2>>>0];for(var i=[],o=0;o<a;++o){var u=i,c=u.push,s=r+40*o,f=(A(),E)[s+8>>>2>>>0],l=(A(),E)[s+32>>>2>>>0],d=(A(),E)[s+36>>>2>>>0],m=(A(),E)[s+4>>>2>>>0];f?(l=s+24,-1==(l=(A(),E)[l>>>2>>>0]+4294967296*(A(),P)[l+4>>>2>>>0])&&(l=void 0),s={binding:m,resource:{buffer:rn(f),offset:4294967296*(A(),E)[s+4+16>>>2>>>0]+(A(),E)[s+16>>>2>>>0],size:l}}):s=l?{binding:m,resource:rn(l)}:{binding:m,resource:rn(d)},c.call(u,s)}return t={label:t,layout:n,entries:i},e=rn(e),n=wa(0),Qt(n,e.createBindGroup(t)),n}function ta(e,r){var t;return e>>>=0,(r>>>=0)&&(t={label:an(r+4)}),e=rn(e),r=Sa(0),Qt(r,e.createCommandEncoder(t)),r}function na(e,r){e>>>=0,r>>>=0,r={type:dn[(A(),E)[r+12>>>2>>>0]],count:(A(),E)[r+16>>>2>>>0]},e=rn(e);var t=Ba(0);return Qt(t,e.createQuerySet(r)),t}function aa(e,r){e=rn(e>>>0).adapterInfo,r>>>=0,(A(),P)[r+52>>>2>>>0]=e.subgroupMinSize,(A(),P)[r+56>>>2>>>0]=e.subgroupMaxSize;var t=Ft(e.vendor+e.architecture+e.device+e.description),n=hr(e.vendor);return tn(r+4,t,n),t+=n,n=hr(e.architecture),tn(r+12,t,n),t+=n,n=hr(e.device),tn(r+20,t,n),tn(r+28,t+n,hr(e.description)),(A(),P)[r+36>>>2>>>0]=2,e=e.isFallbackAdapter?3:4,(A(),P)[r+40>>>2>>>0]=e,(A(),P)[r+44>>>2>>>0]=0,(A(),P)[r+48>>>2>>>0]=0,1}var ia={\"core-features-and-limits\":1,\"depth-clip-control\":2,\"depth32float-stencil8\":3,\"texture-compression-bc\":4,\"texture-compression-bc-sliced-3d\":5,\"texture-compression-etc2\":6,\"texture-compression-astc\":7,\"texture-compression-astc-sliced-3d\":8,\"timestamp-query\":9,\"indirect-first-instance\":10,\"shader-f16\":11,\"rg11b10ufloat-renderable\":12,\"bgra8unorm-storage\":13,\"float32-filterable\":14,\"float32-blendable\":15,\"clip-distances\":16,\"dual-source-blending\":17,subgroups:18,\"texture-formats-tier1\":19,\"texture-formats-tier2\":20,\"primitive-index\":21,\"chromium-experimental-unorm16-texture-formats\":327692,\"chromium-experimental-snorm16-texture-formats\":327693,\"chromium-experimental-multi-draw-indirect\":327732};function oa(e,r){r>>>=0,e=rn(e>>>0);var t=va(4*e.features.size),n=0,a=0;e.features.forEach((e=>{0<=(e=ia[e])&&((A(),P)[t+n>>>2>>>0]=e,n+=4,a++)})),(A(),E)[r+4>>>2>>>0]=t,(A(),E)[r>>>2>>>0]=a}function ua(e,r){return un(rn(e>>>0).limits,r>>>0),1}function ca(e,r){rn(e>>>0).pushErrorScope(cn[r])}function sa(e,r,t){r>>>=0,t>>>=0,e=rn(e>>>0),r=Array.from((A(),P).subarray(t>>>2>>>0,t+4*r>>>2>>>0),(e=>rn(e))),e.submit(r)}function fa(e,r,t,n,a){t=le(t),n>>>=0,a>>>=0,e=rn(e>>>0),r=rn(r>>>0),n=(A(),T).subarray(n>>>0,n+a>>>0),e.writeBuffer(r,t,n,0,a)}a||function(){for(var e=r.numThreads-1;e--;)oe();N.push((async()=>{var e=async function(){if(!a)return Promise.all(K.map(ie))}();Y++,await e,0==--Y&&H&&(e=H,H=null,e())}))}(),a||(ue=new WebAssembly.Memory({initial:256,maximum:65536,shared:!0}),_()),r.wasmBinary&&(l=r.wasmBinary),r.stackSave=()=>ja(),r.stackRestore=e=>Ha(e),r.stackAlloc=e=>qa(e),r.setValue=function(e,r,t=\"i8\"){switch(t.endsWith(\"*\")&&(t=\"*\"),t){case\"i1\":case\"i8\":(A(),O)[e>>>0]=r;break;case\"i16\":(A(),C)[e>>>1>>>0]=r;break;case\"i32\":(A(),P)[e>>>2>>>0]=r;break;case\"i64\":(A(),k)[e>>>3>>>0]=BigInt(r);break;case\"float\":(A(),R)[e>>>2>>>0]=r;break;case\"double\":(A(),U)[e>>>3>>>0]=r;break;case\"*\":(A(),E)[e>>>2>>>0]=r;break;default:$(`invalid type for setValue: ${t}`)}},r.getValue=function(e,r=\"i8\"){switch(r.endsWith(\"*\")&&(r=\"*\"),r){case\"i1\":case\"i8\":return(A(),O)[e>>>0];case\"i16\":return(A(),C)[e>>>1>>>0];case\"i32\":return(A(),P)[e>>>2>>>0];case\"i64\":return(A(),k)[e>>>3>>>0];case\"float\":return(A(),R)[e>>>2>>>0];case\"double\":return(A(),U)[e>>>3>>>0];case\"*\":return(A(),E)[e>>>2>>>0];default:$(`invalid type for getValue: ${r}`)}},r.UTF8ToString=Re,r.stringToUTF8=mr,r.lengthBytesUTF8=hr;var la,da,ma,ha,pa,va,ga,ba,wa,ya,xa,Sa,Aa,Ba,Oa,Ta,Ca,Ma,Pa,Ea,Ra,Ua,ka,Da,Ia,Wa,_a,La,$a,Ga,za,Fa,Va,Na,Ya,Ha,qa,ja,Xa,Za,Qa,Ja,Ka,ei,ri,ti,ni,ai,ii,oi,ui,ci,si,fi,li,di,mi,hi,pi,vi,gi,bi,wi,yi,xi,Si,Ai,Bi,Oi,Ti,Ci,Mi,Pi,Ei,Ri,Ui,ki,Di,Ii,Wi,_i,Li,$i,Gi,zi,Fi=[Z,Q,Oe,Ue,ke,De,Ie,We,_e,Le,$e,Ge,ze,Fe,Ve,Ne,St,At,Tt,Un,kn,Dn,In,Wn,Ln],Vi={1116828:(e,t,n,a,i)=>{if(void 0===r||!r.Zc)return 1;if((e=Re(Number(e>>>0))).startsWith(\"./\")&&(e=e.substring(2)),!(e=r.Zc.get(e)))return 2;if(t=Number(t>>>0),n=Number(n>>>0),a=Number(a>>>0),t+n>e.byteLength)return 3;try{const o=e.subarray(t,t+n);switch(i){case 0:(A(),T).set(o,a>>>0);break;case 1:r.ie?r.ie(a,o):r.Ke(a,o);break;default:return 4}return 0}catch{return 4}},1117652:(e,t,n)=>{r.ke(e,(A(),T).subarray(t>>>0,t+n>>>0))},1117716:()=>r.Ie(),1117758:e=>{r.je(e)},1117795:()=>\"undefined\"!=typeof wasmOffsetConverter};function Ni(){return\"undefined\"!=typeof wasmOffsetConverter}function Yi(e,r,t,n){var a=ja();try{return ci(e,r,t,n)}catch(e){if(Ha(a),e!==e+0)throw e;Va(1,0)}}function Hi(e,r,t){var n=ja();try{return ii(e,r,t)}catch(e){if(Ha(n),e!==e+0)throw e;Va(1,0)}}function qi(e,r,t){var n=ja();try{Ka(e,r,t)}catch(e){if(Ha(n),e!==e+0)throw e;Va(1,0)}}function ji(e,r){var t=ja();try{return ei(e,r)}catch(e){if(Ha(t),e!==e+0)throw e;Va(1,0)}}function Xi(e){var r=ja();try{ri(e)}catch(e){if(Ha(r),e!==e+0)throw e;Va(1,0)}}function Zi(e,r,t,n,a,i,o){var u=ja();try{return ai(e,r,t,n,a,i,o)}catch(e){if(Ha(u),e!==e+0)throw e;Va(1,0)}}function Qi(e,r){var t=ja();try{si(e,r)}catch(e){if(Ha(t),e!==e+0)throw e;Va(1,0)}}function Ji(e,r,t,n,a,i){var o=ja();try{ti(e,r,t,n,a,i)}catch(e){if(Ha(o),e!==e+0)throw e;Va(1,0)}}function Ki(e,r,t,n){var a=ja();try{ui(e,r,t,n)}catch(e){if(Ha(a),e!==e+0)throw e;Va(1,0)}}function eo(e,r,t,n,a,i,o){var u=ja();try{li(e,r,t,n,a,i,o)}catch(e){if(Ha(u),e!==e+0)throw e;Va(1,0)}}function ro(e,r,t,n,a,i,o){var u=ja();try{di(e,r,t,n,a,i,o)}catch(e){if(Ha(u),e!==e+0)throw e;Va(1,0)}}function to(e,r,t,n,a,i,o,u){var c=ja();try{Si(e,r,t,n,a,i,o,u)}catch(e){if(Ha(c),e!==e+0)throw e;Va(1,0)}}function no(e,r,t,n,a){var i=ja();try{ni(e,r,t,n,a)}catch(e){if(Ha(i),e!==e+0)throw e;Va(1,0)}}function ao(e,r,t,n,a){var i=ja();try{return fi(e,r,t,n,a)}catch(e){if(Ha(i),e!==e+0)throw e;Va(1,0)}}function io(e,r,t,n,a,i,o,u){var c=ja();try{Ai(e,r,t,n,a,i,o,u)}catch(e){if(Ha(c),e!==e+0)throw e;Va(1,0)}}function oo(e,r,t,n,a,i,o,u,c,s,f,l){var d=ja();try{mi(e,r,t,n,a,i,o,u,c,s,f,l)}catch(e){if(Ha(d),e!==e+0)throw e;Va(1,0)}}function uo(e,r,t,n,a,i){var o=ja();try{return yi(e,r,t,n,a,i)}catch(e){if(Ha(o),e!==e+0)throw e;Va(1,0)}}function co(e,r,t){var n=ja();try{return gi(e,r,t)}catch(e){if(Ha(n),e!==e+0)throw e;return Va(1,0),0n}}function so(e,r,t,n,a,i,o,u,c){var s=ja();try{oi(e,r,t,n,a,i,o,u,c)}catch(e){if(Ha(s),e!==e+0)throw e;Va(1,0)}}function fo(e){var r=ja();try{return pi(e)}catch(e){if(Ha(r),e!==e+0)throw e;Va(1,0)}}function lo(e,r,t){var n=ja();try{return Bi(e,r,t)}catch(e){if(Ha(n),e!==e+0)throw e;Va(1,0)}}function mo(e,r){var t=ja();try{return Wi(e,r)}catch(e){if(Ha(t),e!==e+0)throw e;return Va(1,0),0n}}function ho(e,r,t,n,a){var i=ja();try{Oi(e,r,t,n,a)}catch(e){if(Ha(i),e!==e+0)throw e;Va(1,0)}}function po(e){var r=ja();try{return hi(e)}catch(e){if(Ha(r),e!==e+0)throw e;return Va(1,0),0n}}function vo(e,r,t,n,a,i){var o=ja();try{return Mi(e,r,t,n,a,i)}catch(e){if(Ha(o),e!==e+0)throw e;Va(1,0)}}function go(e,r,t,n,a,i){var o=ja();try{return Pi(e,r,t,n,a,i)}catch(e){if(Ha(o),e!==e+0)throw e;Va(1,0)}}function bo(e,r,t,n,a,i,o,u){var c=ja();try{return xi(e,r,t,n,a,i,o,u)}catch(e){if(Ha(c),e!==e+0)throw e;Va(1,0)}}function wo(e,r,t,n,a){var i=ja();try{return Ei(e,r,t,n,a)}catch(e){if(Ha(i),e!==e+0)throw e;return Va(1,0),0n}}function yo(e,r,t,n){var a=ja();try{return Ri(e,r,t,n)}catch(e){if(Ha(a),e!==e+0)throw e;Va(1,0)}}function xo(e,r,t,n){var a=ja();try{return Ui(e,r,t,n)}catch(e){if(Ha(a),e!==e+0)throw e;Va(1,0)}}function So(e,r,t,n,a,i,o,u,c,s,f,l){var d=ja();try{return ki(e,r,t,n,a,i,o,u,c,s,f,l)}catch(e){if(Ha(d),e!==e+0)throw e;Va(1,0)}}function Ao(e,r,t,n,a,i,o,u,c,s,f){var l=ja();try{Ti(e,r,t,n,a,i,o,u,c,s,f)}catch(e){if(Ha(l),e!==e+0)throw e;Va(1,0)}}function Bo(e,r,t,n,a,i,o,u,c,s,f,l,d,m,h,p){var v=ja();try{Ci(e,r,t,n,a,i,o,u,c,s,f,l,d,m,h,p)}catch(e){if(Ha(v),e!==e+0)throw e;Va(1,0)}}function Oo(e,r,t,n){var a=ja();try{return Di(e,r,t,n)}catch(e){if(Ha(a),e!==e+0)throw e;Va(1,0)}}function To(e,r,t,n,a){var i=ja();try{return Ii(e,r,t,n,a)}catch(e){if(Ha(i),e!==e+0)throw e;Va(1,0)}}function Co(e,r,t){var n=ja();try{return vi(e,r,t)}catch(e){if(Ha(n),e!==e+0)throw e;Va(1,0)}}function Mo(e,r,t){var n=ja();try{return bi(e,r,t)}catch(e){if(Ha(n),e!==e+0)throw e;Va(1,0)}}function Po(e,r,t,n){var a=ja();try{wi(e,r,t,n)}catch(e){if(Ha(a),e!==e+0)throw e;Va(1,0)}}function Eo(){if(0<Y)H=Eo;else if(a)h?.(r),L();else{for(var e=N;0<e.length;)e.shift()(r);0<Y?H=Eo:(r.calledRun=!0,x||(L(),h?.(r)))}}return a||(zi=await z(),Eo()),r.PTR_SIZE=4,r.webgpuInit=e=>{const t=new WeakMap;let n,a,i=1;r.webgpuRegisterDevice=e=>{if(void 0!==a)throw Error(\"another WebGPU EP inference session is being created.\");if(e){var r=t.get(e);if(!r){const n=((e,r=0)=>{var t=Ca(r);return r=Ta(r,t),Qt(t,e.queue),Qt(r,e),r})(e,r=ba(0));r=[i++,r,n],t.set(e,r)}return n=e,a=r[0],r}n=void 0,a=0};const o=new Map;r.webgpuOnCreateSession=r=>{if(void 0!==a){var t=a;if(a=void 0,r){const a=ma(t);o.set(r,a),0===t&&e(n??rn(a))}n=void 0}},r.webgpuOnReleaseSession=e=>{o.delete(e)};const u=Symbol(\"gpuBufferMetadata\");r.webgpuRegisterBuffer=(e,r,t)=>{if(t)return e[u]=[t,NaN],t;if(t=e[u])return t[1]++,t[0];if(void 0===(r=o.get(r)))throw Error(\"Invalid session handle passed to webgpuRegisterBuffer\");return r=((e,r=0)=>(\"pending\"!=e.mapState||$(),r=Oa(r,\"mapped\"==e.mapState?3:1),Qt(r,e),\"mapped\"==e.mapState&&(Jt[r]=[]),r))(e,r),e[u]=[r,1],r},r.webgpuUnregisterBuffer=e=>{const r=e[u];if(!r)throw Error(\"Buffer is not registered\");r[1]--,0===r[1]&&(ga(r[0]),delete e[u])},r.webgpuGetBuffer=e=>rn(e),r.webgpuCreateDownloader=(e,r,t)=>{if(void 0===(t=o.get(t)))throw Error(\"Invalid session handle passed to webgpuRegisterBuffer\");const n=rn(t),a=16*Math.ceil(Number(r)/16);return async()=>{const t=n.createBuffer({size:a,usage:9});try{const i=n.createCommandEncoder();return i.copyBufferToBuffer(e,0,t,0,a),n.queue.submit([i.finish()]),await t.mapAsync(GPUMapMode.READ),t.getMappedRange().slice(0,r)}finally{t.destroy()}}},r.ie=(e,r)=>{var t=r.buffer;const i=r.byteOffset,o=r.byteLength;if(r=16*Math.ceil(Number(o)/16),e=rn(e),!n){var u=ma(a);n=rn(u)}const c=(u=n.createBuffer({mappedAtCreation:!0,size:r,usage:6})).getMappedRange();new Uint8Array(c).set(new Uint8Array(t,i,o)),u.unmap(),(t=n.createCommandEncoder()).copyBufferToBuffer(u,0,e,0,r),n.queue.submit([t.finish()]),u.destroy()}},r.webnnInit=e=>{const t=e[0];[r.Ie,r.je,r.webnnEnsureTensor,r.ke,r.webnnDownloadTensor,r.He,r.webnnEnableTraceEvent]=e.slice(1),r.webnnReleaseTensorId=r.je,r.webnnUploadTensor=r.ke,r.webnnRegisterMLContext=r.He,r.webnnOnRunStart=e=>t.onRunStart(e),r.webnnOnRunEnd=t.onRunEnd.bind(t),r.webnnOnReleaseSession=e=>{t.onReleaseSession(e)},r.webnnCreateMLTensorDownloader=(e,r)=>t.createMLTensorDownloader(e,r),r.webnnRegisterMLTensor=(e,r,n,a)=>t.registerMLTensor(e,r,n,a),r.webnnCreateMLContext=e=>t.createMLContext(e),r.webnnRegisterMLConstant=(e,n,a,i,o,u)=>t.registerMLConstant(e,n,a,i,o,r.Zc,u),r.webnnRegisterGraphInput=t.registerGraphInput.bind(t),r.webnnIsGraphInput=t.isGraphInput.bind(t),r.webnnRegisterGraphOutput=t.registerGraphOutput.bind(t),r.webnnIsGraphOutput=t.isGraphOutput.bind(t),r.webnnCreateTemporaryTensor=t.createTemporaryTensor.bind(t),r.webnnIsGraphInputOutputTypeSupported=t.isGraphInputOutputTypeSupported.bind(t)},W?r:new Promise(((e,r)=>{h=e,p=r}))}export default e;var r=globalThis.self?.name?.startsWith(\"em-pthread\");r&&e();","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\n\nimport type { OrtWasmModule } from './wasm-types';\nimport { isNode } from './wasm-utils-env';\n\n/**\n * The origin of the current location.\n *\n * In Node.js, this is undefined.\n */\nconst origin = isNode || typeof location === 'undefined' ? undefined : location.origin;\n\n/**\n * Some bundlers (eg. Webpack) will rewrite `import.meta.url` to a file URL at compile time.\n *\n * This function checks if `import.meta.url` starts with `file:`, but using the `>` and `<` operators instead of\n * `startsWith` function so that code minimizers can remove the dead code correctly.\n *\n * For example, if we use terser to minify the following code:\n * ```js\n * if (\"file://hard-coded-filename\".startsWith(\"file:\")) {\n *   console.log(1)\n * } else {\n *   console.log(2)\n * }\n *\n * if (\"file://hard-coded-filename\" > \"file:\" && \"file://hard-coded-filename\" < \"file;\") {\n *   console.log(3)\n * } else {\n *   console.log(4)\n * }\n * ```\n *\n * The minified code will be:\n * ```js\n * \"file://hard-coded-filename\".startsWith(\"file:\")?console.log(1):console.log(2),console.log(3);\n * ```\n *\n * (use Terser 5.39.0 with default options, https://try.terser.org/)\n *\n * @returns true if the import.meta.url is hardcoded as a file URI.\n */\nexport const isEsmImportMetaUrlHardcodedAsFileUri =\n  BUILD_DEFS.IS_ESM && BUILD_DEFS.ESM_IMPORT_META_URL! > 'file:' && BUILD_DEFS.ESM_IMPORT_META_URL! < 'file;';\n\nconst getScriptSrc = (): string | undefined => {\n  // if Nodejs, return undefined\n  if (isNode) {\n    return undefined;\n  }\n  // if It's ESM, use import.meta.url\n  if (BUILD_DEFS.IS_ESM) {\n    // For ESM, if the import.meta.url is a file URL, this usually means the bundler rewrites `import.meta.url` to\n    // the file path at compile time. In this case, this file path cannot be used to determine the runtime URL.\n    //\n    // We need to use the URL constructor like this:\n    // ```js\n    // new URL('actual-bundle-name.js', import.meta.url).href\n    // ```\n    // So that bundler can preprocess the URL correctly.\n    if (isEsmImportMetaUrlHardcodedAsFileUri) {\n      // if the rewritten URL is a relative path, we need to use the origin to resolve the URL.\n\n      // The following is a workaround for Vite.\n      //\n      // Vite uses a bundler(rollup/rolldown) that does not rewrite `import.meta.url` to a file URL. So in theory, this\n      // code path should not be executed in Vite. However, the bundler does not know it and it still try to load the\n      // following pattern:\n      // - `return new URL('filename', import.meta.url).href`\n      //\n      // By replacing the pattern above with the following code, we can skip the resource loading behavior:\n      // - `const URL2 = URL; return new URL2('filename', import.meta.url).href;`\n      //\n      // And it still works in Webpack.\n      const URL2 = URL;\n      return new URL(new URL2(BUILD_DEFS.BUNDLE_FILENAME, BUILD_DEFS.ESM_IMPORT_META_URL).href, origin).href;\n    }\n\n    return BUILD_DEFS.ESM_IMPORT_META_URL;\n  }\n\n  return typeof document !== 'undefined'\n    ? (document.currentScript as HTMLScriptElement)?.src\n    : // use `self.location.href` if available\n      typeof self !== 'undefined'\n      ? self.location?.href\n      : undefined;\n};\n\n/**\n * The classic script source URL. This is not always available in non ESModule environments.\n *\n * In Node.js, this is undefined.\n */\nexport const scriptSrc = getScriptSrc();\n\n/**\n * Infer the wasm path prefix from the script source URL.\n *\n * @returns The inferred wasm path prefix, or undefined if the script source URL is not available or is a blob URL.\n */\nexport const inferWasmPathPrefixFromScriptSrc = (): string | undefined => {\n  if (scriptSrc && !scriptSrc.startsWith('blob:')) {\n    return scriptSrc.substring(0, scriptSrc.lastIndexOf('/') + 1);\n  }\n  return undefined;\n};\n\n/**\n * Check if the given filename with prefix is from the same origin.\n */\nconst isSameOrigin = (filename: string, prefixOverride?: string) => {\n  try {\n    const baseUrl = prefixOverride ?? scriptSrc;\n    const url = baseUrl ? new URL(filename, baseUrl) : new URL(filename);\n    return url.origin === origin;\n  } catch {\n    return false;\n  }\n};\n\n/**\n * Normalize the inputs to an absolute URL with the given prefix override. If failed, return undefined.\n */\nconst normalizeUrl = (filename: string, prefixOverride?: string) => {\n  const baseUrl = prefixOverride ?? scriptSrc;\n  try {\n    const url = baseUrl ? new URL(filename, baseUrl) : new URL(filename);\n    return url.href;\n  } catch {\n    return undefined;\n  }\n};\n\n/**\n * Create a fallback URL if an absolute URL cannot be created by the normalizeUrl function.\n */\nconst fallbackUrl = (filename: string, prefixOverride?: string) => `${prefixOverride ?? './'}${filename}`;\n\n/**\n * This helper function is used to preload a module from a URL.\n *\n * If the origin of the worker URL is different from the current origin, the worker cannot be loaded directly.\n * See discussions in https://github.com/webpack-contrib/worker-loader/issues/154\n *\n * In this case, we will fetch the worker URL and create a new Blob URL with the same origin as a workaround.\n *\n * @param absoluteUrl - The absolute URL to preload.\n *\n * @returns - A promise that resolves to a new Blob URL\n */\nconst preload = async (absoluteUrl: string): Promise<string> => {\n  const response = await fetch(absoluteUrl, { credentials: 'same-origin' });\n  const blob = await response.blob();\n  return URL.createObjectURL(blob);\n};\n\n/**\n * This helper function is used to dynamically import a module from a URL.\n *\n * The build script has special handling for this function to ensure that the URL is not bundled into the final output.\n *\n * @param url - The URL to import.\n *\n * @returns - A promise that resolves to the default export of the module.\n */\nconst dynamicImportDefault = async <T>(url: string): Promise<T> =>\n  (await import(/* webpackIgnore: true */ /* @vite-ignore */ url)).default;\n\n/**\n * The proxy worker factory imported from the proxy worker module.\n *\n * This is only available when the WebAssembly proxy is not disabled.\n */\nconst createProxyWorker: ((urlOverride?: string) => Worker) | undefined =\n  // eslint-disable-next-line @typescript-eslint/no-require-imports, @typescript-eslint/no-var-requires\n  BUILD_DEFS.DISABLE_WASM_PROXY ? undefined : require('./proxy-worker/main').default;\n\n/**\n * Import the proxy worker.\n *\n * This function will perform the following steps:\n * 1. If a preload is needed, it will preload the module and return the object URL.\n * 2. Use the proxy worker factory to create the proxy worker.\n *\n * @returns - A promise that resolves to a tuple of 2 elements:\n *            - The object URL of the preloaded module, or undefined if no preload is needed.\n *            - The proxy worker.\n */\nexport const importProxyWorker = async (): Promise<[undefined | string, Worker]> => {\n  if (!scriptSrc) {\n    throw new Error('Failed to load proxy worker: cannot determine the script source URL.');\n  }\n\n  // If the script source is from the same origin, we can use the embedded proxy module directly.\n  if (isSameOrigin(scriptSrc)) {\n    return [undefined, createProxyWorker!()];\n  }\n\n  // Otherwise, need to preload\n  const url = await preload(scriptSrc);\n  return [url, createProxyWorker!(url)];\n};\n\n/**\n * The embedded WebAssembly module.\n *\n * This is only available in ESM and when embedding is not disabled.\n */\nconst embeddedWasmModule: EmscriptenModuleFactory<OrtWasmModule> | undefined =\n  BUILD_DEFS.IS_ESM && BUILD_DEFS.ENABLE_BUNDLE_WASM_JS\n    ? // eslint-disable-next-line @typescript-eslint/no-require-imports, @typescript-eslint/no-var-requires\n      require(\n        !BUILD_DEFS.DISABLE_JSEP\n          ? '../../dist/ort-wasm-simd-threaded.jsep.mjs'\n          : BUILD_DEFS.ENABLE_JSPI\n            ? '../../dist/ort-wasm-simd-threaded.jspi.mjs'\n            : !BUILD_DEFS.DISABLE_WEBGPU\n              ? '../../dist/ort-wasm-simd-threaded.asyncify.mjs'\n              : '../../dist/ort-wasm-simd-threaded.mjs',\n      ).default\n    : undefined;\n\n/**\n * Import the WebAssembly module.\n *\n * This function will perform the following steps:\n * 1. If the embedded module exists and no custom URL is specified, use the embedded module.\n * 2. If a preload is needed, it will preload the module and return the object URL.\n * 3. Otherwise, it will perform a dynamic import of the module.\n *\n * @returns - A promise that resolves to a tuple of 2 elements:\n *            - The object URL of the preloaded module, or undefined if no preload is needed.\n *            - The default export of the module, which is a factory function to create the WebAssembly module.\n */\nexport const importWasmModule = async (\n  urlOverride: string | undefined,\n  prefixOverride: string | undefined,\n  isMultiThreaded: boolean,\n  isWasmOverridden: boolean,\n): Promise<[undefined | string, EmscriptenModuleFactory<OrtWasmModule>]> => {\n  //\n  // Check if we should use the embedded module.\n  //\n\n  // To use the embedded module, it should be available, and no URL override or prefix override should be specified.\n  let useEmbeddedModule = embeddedWasmModule && !(urlOverride || prefixOverride);\n  if (useEmbeddedModule) {\n    if (!scriptSrc) {\n      // no URL info available.\n      //\n      // Note: when the embedded module is available, it means the current script is ESM. Usually, in ESM, the\n      // `import.meta.url` is available. But in some cases (eg. Cloudflare Workers), the value of `import.meta.url`\n      // can be `null` or `undefined`. In this case, we can only load the embedded module when:\n      //\n      // 1. The WebAssembly module binary is overridden:\n      //    ```js\n      //    env.wasm.wasmPaths = undefined;  // or not specified\n      //    env.wasm.wasmBinary = /* a Uint8Array containing the WebAssembly binary */;\n      //    ```\n      //\n      // 2. The \".wasm\" only is overridden.\n      //    ```js\n      //    env.wasm.wasmPaths = { wasm: /* URL of the .wasm file */ };\n      //    ```\n      //\n      if (isWasmOverridden && !isMultiThreaded) {\n        useEmbeddedModule = true;\n      } else {\n        throw new Error('cannot determine the script source URL.');\n      }\n    } else {\n      // if the script source is available, we can check if it is from the same origin.\n      useEmbeddedModule = isSameOrigin(scriptSrc);\n    }\n  }\n  if (useEmbeddedModule) {\n    return [undefined, embeddedWasmModule!];\n  } else {\n    const wasmModuleFilename = !BUILD_DEFS.DISABLE_JSEP\n      ? 'ort-wasm-simd-threaded.jsep.mjs'\n      : BUILD_DEFS.ENABLE_JSPI\n        ? 'ort-wasm-simd-threaded.jspi.mjs'\n        : !BUILD_DEFS.DISABLE_WEBGPU\n          ? 'ort-wasm-simd-threaded.asyncify.mjs'\n          : 'ort-wasm-simd-threaded.mjs';\n    const wasmModuleUrl = urlOverride ?? normalizeUrl(wasmModuleFilename, prefixOverride);\n    // need to preload if all of the following conditions are met:\n    // 1. not in Node.js.\n    //    - Node.js does not have the same origin policy for creating workers.\n    // 2. multi-threaded is enabled.\n    //    - If multi-threaded is disabled, no worker will be created. So we don't need to preload the module.\n    // 3. the absolute URL is available.\n    //    - If the absolute URL is failed to be created, the origin cannot be determined. In this case, we will not\n    //    preload the module.\n    // 4. the worker URL is not from the same origin.\n    //    - If the worker URL is from the same origin, we can create the worker directly.\n    const needPreload = !isNode && isMultiThreaded && wasmModuleUrl && !isSameOrigin(wasmModuleUrl, prefixOverride);\n    const url = needPreload\n      ? await preload(wasmModuleUrl)\n      : (wasmModuleUrl ?? fallbackUrl(wasmModuleFilename, prefixOverride));\n    return [needPreload ? url : undefined, await dynamicImportDefault<EmscriptenModuleFactory<OrtWasmModule>>(url)];\n  }\n};\n","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\n\nimport { Env } from 'onnxruntime-common';\n\nimport type { OrtWasmModule } from './wasm-types';\nimport { importWasmModule, inferWasmPathPrefixFromScriptSrc } from './wasm-utils-import';\n\nlet wasm: OrtWasmModule | undefined;\nlet initialized = false;\nlet initializing = false;\nlet aborted = false;\n\nconst isMultiThreadSupported = (): boolean => {\n  // If 'SharedArrayBuffer' is not available, WebAssembly threads will not work.\n  if (typeof SharedArrayBuffer === 'undefined') {\n    return false;\n  }\n\n  try {\n    // Test for transferability of SABs (for browsers. needed for Firefox)\n    // https://groups.google.com/forum/#!msg/mozilla.dev.platform/IHkBZlHETpA/dwsMNchWEQAJ\n    if (typeof MessageChannel !== 'undefined') {\n      new MessageChannel().port1.postMessage(new SharedArrayBuffer(1));\n    }\n\n    // Test for WebAssembly threads capability (for both browsers and Node.js)\n    // This typed array is a WebAssembly program containing threaded instructions.\n    return WebAssembly.validate(\n      new Uint8Array([\n        0, 97, 115, 109, 1, 0, 0, 0, 1, 4, 1, 96, 0, 0, 3, 2, 1, 0, 5, 4, 1, 3, 1, 1, 10, 11, 1, 9, 0, 65, 0, 254, 16,\n        2, 0, 26, 11,\n      ]),\n    );\n  } catch {\n    return false;\n  }\n};\n\nconst isSimdSupported = (): boolean => {\n  try {\n    // Test for WebAssembly SIMD capability (for both browsers and Node.js)\n    // This typed array is a WebAssembly program containing SIMD instructions.\n\n    // The binary data is generated from the following code by wat2wasm:\n    //\n    // (module\n    //   (type $t0 (func))\n    //   (func $f0 (type $t0)\n    //     (drop\n    //       (i32x4.dot_i16x8_s\n    //         (i8x16.splat\n    //           (i32.const 0))\n    //         (v128.const i32x4 0x00000000 0x00000000 0x00000000 0x00000000)))))\n\n    return WebAssembly.validate(\n      new Uint8Array([\n        0, 97, 115, 109, 1, 0, 0, 0, 1, 4, 1, 96, 0, 0, 3, 2, 1, 0, 10, 30, 1, 28, 0, 65, 0, 253, 15, 253, 12, 0, 0, 0,\n        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 253, 186, 1, 26, 11,\n      ]),\n    );\n  } catch {\n    return false;\n  }\n};\n\nconst isRelaxedSimdSupported = (): boolean => {\n  try {\n    // Test for WebAssembly Relaxed SIMD capability (for both browsers and Node.js)\n    // This typed array is a WebAssembly program containing Relaxed SIMD instructions.\n\n    // The binary data is generated from the following code by wat2wasm:\n    // (module\n    //   (func (result v128)\n    //      i32.const 1\n    //      i8x16.splat\n    //      i32.const 2\n    //      i8x16.splat\n    //      i32.const 3\n    //      i8x16.splat\n    //      i32x4.relaxed_dot_i8x16_i7x16_add_s\n    //   )\n    //  )\n    return WebAssembly.validate(\n      new Uint8Array([\n        0, 97, 115, 109, 1, 0, 0, 0, 1, 5, 1, 96, 0, 1, 123, 3, 2, 1, 0, 10, 19, 1, 17, 0, 65, 1, 253, 15, 65, 2, 253,\n        15, 65, 3, 253, 15, 253, 147, 2, 11,\n      ]),\n    );\n  } catch {\n    return false;\n  }\n};\n\nexport const initializeWebAssembly = async (flags: Env.WebAssemblyFlags): Promise<void> => {\n  if (initialized) {\n    return Promise.resolve();\n  }\n  if (initializing) {\n    throw new Error(\"multiple calls to 'initializeWebAssembly()' detected.\");\n  }\n  if (aborted) {\n    throw new Error(\"previous call to 'initializeWebAssembly()' failed.\");\n  }\n\n  initializing = true;\n\n  // wasm flags are already initialized\n  const timeout = flags.initTimeout!;\n  let numThreads = flags.numThreads!;\n\n  // ensure SIMD is supported\n  if (flags.simd === false) {\n    // skip SIMD feature checking as it is disabled explicitly by user\n  } else if (flags.simd === 'relaxed') {\n    // check if relaxed SIMD is supported\n    if (!isRelaxedSimdSupported()) {\n      throw new Error('Relaxed WebAssembly SIMD is not supported in the current environment.');\n    }\n  } else if (!isSimdSupported()) {\n    throw new Error('WebAssembly SIMD is not supported in the current environment.');\n  }\n\n  if (BUILD_DEFS.ENABLE_JSPI) {\n    if (!('Suspending' in WebAssembly)) {\n      throw new Error('WebAssembly JSPI is not supported in the current environment.');\n    }\n  }\n\n  // check if multi-threading is supported\n  const multiThreadSupported = isMultiThreadSupported();\n  if (numThreads > 1 && !multiThreadSupported) {\n    if (typeof self !== 'undefined' && !self.crossOriginIsolated) {\n      // eslint-disable-next-line no-console\n      console.warn(\n        'env.wasm.numThreads is set to ' +\n          numThreads +\n          ', but this will not work unless you enable crossOriginIsolated mode. ' +\n          'See https://web.dev/cross-origin-isolation-guide/ for more info.',\n      );\n    }\n\n    // eslint-disable-next-line no-console\n    console.warn(\n      'WebAssembly multi-threading is not supported in the current environment. ' + 'Falling back to single-threading.',\n    );\n\n    // set flags.numThreads to 1 so that OrtInit() will not create a global thread pool.\n    flags.numThreads = numThreads = 1;\n  }\n\n  const wasmPaths = flags.wasmPaths;\n  const wasmPrefixOverride = typeof wasmPaths === 'string' ? wasmPaths : undefined;\n  const mjsPathOverrideFlag = (wasmPaths as Env.WasmFilePaths)?.mjs;\n  const mjsPathOverride = (mjsPathOverrideFlag as URL)?.href ?? mjsPathOverrideFlag;\n  const wasmPathOverrideFlag = (wasmPaths as Env.WasmFilePaths)?.wasm;\n  const wasmPathOverride = (wasmPathOverrideFlag as URL)?.href ?? wasmPathOverrideFlag;\n  const wasmBinaryOverride = flags.wasmBinary;\n\n  const [objectUrl, ortWasmFactory] = await importWasmModule(\n    mjsPathOverride,\n    wasmPrefixOverride,\n    numThreads > 1,\n    !!wasmBinaryOverride || !!wasmPathOverride,\n  );\n\n  let isTimeout = false;\n\n  const tasks: Array<Promise<void>> = [];\n\n  // promise for timeout\n  if (timeout > 0) {\n    tasks.push(\n      new Promise((resolve) => {\n        setTimeout(() => {\n          isTimeout = true;\n          resolve();\n        }, timeout);\n      }),\n    );\n  }\n\n  // promise for module initialization\n  tasks.push(\n    new Promise((resolve, reject) => {\n      const config: Partial<OrtWasmModule> = {\n        /**\n         * The number of threads. WebAssembly will create (Module.numThreads - 1) workers. If it is 1, no worker will be\n         * created.\n         */\n        numThreads,\n      };\n\n      if (wasmBinaryOverride) {\n        // Set a custom buffer which contains the WebAssembly binary. This will skip the wasm file fetching.\n        config.wasmBinary = wasmBinaryOverride;\n      } else if (wasmPathOverride || wasmPrefixOverride) {\n        // A callback function to locate the WebAssembly file. The function should return the full path of the file.\n        //\n        // Since Emscripten 3.1.58, this function is only called for the .wasm file.\n        config.locateFile = (fileName) => wasmPathOverride ?? wasmPrefixOverride + fileName;\n      } else if (mjsPathOverride && mjsPathOverride.indexOf('blob:') !== 0) {\n        // if mjs path is specified, use it as the base path for the .wasm file.\n        config.locateFile = (fileName) => new URL(fileName, mjsPathOverride).href;\n      } else if (objectUrl) {\n        const inferredWasmPathPrefix = inferWasmPathPrefixFromScriptSrc();\n        if (inferredWasmPathPrefix) {\n          // if the wasm module is preloaded, use the inferred wasm path as the base path for the .wasm file.\n          config.locateFile = (fileName) => inferredWasmPathPrefix + fileName;\n        }\n      }\n\n      ortWasmFactory(config).then(\n        // wasm module initialized successfully\n        (module) => {\n          initializing = false;\n          initialized = true;\n          wasm = module;\n          resolve();\n          if (objectUrl) {\n            URL.revokeObjectURL(objectUrl);\n          }\n        },\n        // wasm module failed to initialize\n        (what) => {\n          initializing = false;\n          aborted = true;\n          reject(what);\n        },\n      );\n    }),\n  );\n\n  await Promise.race(tasks);\n\n  if (isTimeout) {\n    throw new Error(`WebAssembly backend initializing failed due to timeout: ${timeout}ms`);\n  }\n};\n\nexport const getInstance = (): OrtWasmModule => {\n  if (initialized && wasm) {\n    return wasm;\n  }\n\n  throw new Error('WebAssembly is not initialized yet.');\n};\n\nexport const dispose = (): void => {\n  if (initialized && !initializing && !aborted) {\n    // TODO: currently \"PThread.terminateAllThreads()\" is not exposed in the wasm module.\n    //       And this function is not yet called by any code.\n    //       If it is needed in the future, we should expose it in the wasm module and uncomment the following line.\n\n    // wasm?.PThread?.terminateAllThreads();\n    wasm = undefined;\n\n    initializing = false;\n    initialized = false;\n    aborted = true;\n  }\n};\n","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\n\nimport { getInstance } from './wasm-factory';\n\nexport const allocWasmString = (data: string, allocs: number[]): number => {\n  const wasm = getInstance();\n\n  const dataLength = wasm.lengthBytesUTF8(data) + 1;\n  const dataOffset = wasm._malloc(dataLength);\n  wasm.stringToUTF8(data, dataOffset, dataLength);\n  allocs.push(dataOffset);\n\n  return dataOffset;\n};\n\ninterface ExtraOptionsHandler {\n  (name: string, value: string): void;\n}\n\nexport const iterateExtraOptions = (\n  options: Record<string, unknown>,\n  prefix: string,\n  seen: WeakSet<Record<string, unknown>>,\n  handler: ExtraOptionsHandler,\n): void => {\n  if (typeof options == 'object' && options !== null) {\n    if (seen.has(options)) {\n      throw new Error('Circular reference in options');\n    } else {\n      seen.add(options);\n    }\n  }\n\n  Object.entries(options).forEach(([key, value]) => {\n    const name = prefix ? prefix + key : key;\n    if (typeof value === 'object') {\n      iterateExtraOptions(value as Record<string, unknown>, name + '.', seen, handler);\n    } else if (typeof value === 'string' || typeof value === 'number') {\n      handler(name, value.toString());\n    } else if (typeof value === 'boolean') {\n      handler(name, value ? '1' : '0');\n    } else {\n      throw new Error(`Can't handle extra config type: ${typeof value}`);\n    }\n  });\n};\n\n/**\n * check web assembly API's last error and throw error if any error occurred.\n * @param message a message used when an error occurred.\n */\nexport const checkLastError = (message: string): void => {\n  const wasm = getInstance();\n\n  const stack = wasm.stackSave();\n  try {\n    const ptrSize = wasm.PTR_SIZE;\n    const paramsOffset = wasm.stackAlloc(2 * ptrSize);\n    wasm._OrtGetLastError(paramsOffset, paramsOffset + ptrSize);\n    const errorCode = Number(wasm.getValue(paramsOffset, ptrSize === 4 ? 'i32' : 'i64'));\n    const errorMessagePointer = wasm.getValue(paramsOffset + ptrSize, '*');\n    const errorMessage = errorMessagePointer ? wasm.UTF8ToString(errorMessagePointer) : '';\n    throw new Error(`${message} ERROR_CODE: ${errorCode}, ERROR_MESSAGE: ${errorMessage}`);\n  } finally {\n    wasm.stackRestore(stack);\n  }\n};\n","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\n\nimport { InferenceSession } from 'onnxruntime-common';\n\nimport { getInstance } from './wasm-factory';\nimport { allocWasmString, checkLastError, iterateExtraOptions } from './wasm-utils';\n\nexport const setRunOptions = (options: InferenceSession.RunOptions): [number, number[]] => {\n  const wasm = getInstance();\n  let runOptionsHandle = 0;\n  const allocs: number[] = [];\n\n  const runOptions: InferenceSession.RunOptions = options || {};\n\n  try {\n    if (options?.logSeverityLevel === undefined) {\n      runOptions.logSeverityLevel = 2; // Default to warning\n    } else if (\n      typeof options.logSeverityLevel !== 'number' ||\n      !Number.isInteger(options.logSeverityLevel) ||\n      options.logSeverityLevel < 0 ||\n      options.logSeverityLevel > 4\n    ) {\n      throw new Error(`log severity level is not valid: ${options.logSeverityLevel}`);\n    }\n\n    if (options?.logVerbosityLevel === undefined) {\n      runOptions.logVerbosityLevel = 0; // Default to 0\n    } else if (typeof options.logVerbosityLevel !== 'number' || !Number.isInteger(options.logVerbosityLevel)) {\n      throw new Error(`log verbosity level is not valid: ${options.logVerbosityLevel}`);\n    }\n\n    if (options?.terminate === undefined) {\n      runOptions.terminate = false;\n    }\n\n    let tagDataOffset = 0;\n    if (options?.tag !== undefined) {\n      tagDataOffset = allocWasmString(options.tag, allocs);\n    }\n\n    runOptionsHandle = wasm._OrtCreateRunOptions(\n      runOptions.logSeverityLevel!,\n      runOptions.logVerbosityLevel!,\n      !!runOptions.terminate!,\n      tagDataOffset,\n    );\n    if (runOptionsHandle === 0) {\n      checkLastError(\"Can't create run options.\");\n    }\n\n    if (options?.extra !== undefined) {\n      iterateExtraOptions(options.extra, '', new WeakSet<Record<string, unknown>>(), (key, value) => {\n        const keyDataOffset = allocWasmString(key, allocs);\n        const valueDataOffset = allocWasmString(value, allocs);\n\n        if (wasm._OrtAddRunConfigEntry(runOptionsHandle, keyDataOffset, valueDataOffset) !== 0) {\n          checkLastError(`Can't set a run config entry: ${key} - ${value}.`);\n        }\n      });\n    }\n\n    return [runOptionsHandle, allocs];\n  } catch (e) {\n    if (runOptionsHandle !== 0) {\n      wasm._OrtReleaseRunOptions(runOptionsHandle);\n    }\n    allocs.forEach((alloc) => wasm._free(alloc));\n    throw e;\n  }\n};\n","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\n\nimport type { InferenceSession } from 'onnxruntime-common';\n\nimport { getInstance } from './wasm-factory';\nimport { allocWasmString, checkLastError, iterateExtraOptions } from './wasm-utils';\n\nconst getGraphOptimzationLevel = (graphOptimizationLevel: string | unknown): number => {\n  switch (graphOptimizationLevel) {\n    case 'disabled':\n      return 0;\n    case 'basic':\n      return 1;\n    case 'extended':\n      return 2;\n    case 'layout':\n      return 3;\n    case 'all':\n      return 99;\n    default:\n      throw new Error(`unsupported graph optimization level: ${graphOptimizationLevel}`);\n  }\n};\n\nconst getExecutionMode = (executionMode: 'sequential' | 'parallel'): number => {\n  switch (executionMode) {\n    case 'sequential':\n      return 0;\n    case 'parallel':\n      return 1;\n    default:\n      throw new Error(`unsupported execution mode: ${executionMode}`);\n  }\n};\n\nconst appendDefaultOptions = (options: InferenceSession.SessionOptions): void => {\n  if (!options.extra) {\n    options.extra = {};\n  }\n  if (!options.extra.session) {\n    options.extra.session = {};\n  }\n  const session = options.extra.session as Record<string, string>;\n  if (!session.use_ort_model_bytes_directly) {\n    // eslint-disable-next-line camelcase\n    session.use_ort_model_bytes_directly = '1';\n  }\n\n  // if using JSEP with WebGPU, always disable memory pattern\n  if (\n    options.executionProviders &&\n    options.executionProviders.some((ep) => (typeof ep === 'string' ? ep : ep.name) === 'webgpu')\n  ) {\n    options.enableMemPattern = false;\n  }\n};\n\nconst appendSessionConfig = (sessionOptionsHandle: number, key: string, value: string, allocs: number[]): void => {\n  const keyDataOffset = allocWasmString(key, allocs);\n  const valueDataOffset = allocWasmString(value, allocs);\n  if (getInstance()._OrtAddSessionConfigEntry(sessionOptionsHandle, keyDataOffset, valueDataOffset) !== 0) {\n    checkLastError(`Can't set a session config entry: ${key} - ${value}.`);\n  }\n};\n\nconst appendEpOption = (epOptions: Array<[number, number]>, key: string, value: string, allocs: number[]): void => {\n  const keyDataOffset = allocWasmString(key, allocs);\n  const valueDataOffset = allocWasmString(value, allocs);\n  epOptions.push([keyDataOffset, valueDataOffset]);\n};\n\nconst setExecutionProviders = async (\n  sessionOptionsHandle: number,\n  sessionOptions: InferenceSession.SessionOptions,\n  allocs: number[],\n): Promise<void> => {\n  const executionProviders = sessionOptions.executionProviders!;\n  for (const ep of executionProviders) {\n    let epName = typeof ep === 'string' ? ep : ep.name;\n    const epOptions: Array<[number, number]> = [];\n\n    // check EP name\n    switch (epName) {\n      case 'webnn':\n        epName = 'WEBNN';\n        if (typeof ep !== 'string') {\n          const webnnOptions = ep as InferenceSession.WebNNExecutionProviderOption;\n          // const context = (webnnOptions as InferenceSession.WebNNOptionsWithMLContext)?.context;\n          const deviceType = (webnnOptions as InferenceSession.WebNNContextOptions)?.deviceType;\n          if (deviceType) {\n            appendSessionConfig(sessionOptionsHandle, 'deviceType', deviceType, allocs);\n          }\n        }\n        break;\n      case 'webgpu':\n        if (!BUILD_DEFS.DISABLE_WEBGPU) {\n          epName = 'WebGPU';\n          let customDevice: GPUDevice | undefined;\n\n          if (typeof ep !== 'string') {\n            const webgpuOptions = ep as InferenceSession.WebGpuExecutionProviderOption;\n\n            // set custom GPU device\n            if (webgpuOptions.device) {\n              if (typeof GPUDevice !== 'undefined' && webgpuOptions.device instanceof GPUDevice) {\n                customDevice = webgpuOptions.device;\n              } else {\n                throw new Error('Invalid GPU device set in WebGPU EP options.');\n              }\n            }\n\n            // set graph capture option from session options\n            const { enableGraphCapture } = sessionOptions;\n            if (typeof enableGraphCapture === 'boolean' && enableGraphCapture) {\n              appendEpOption(epOptions, 'enableGraphCapture', '1', allocs);\n            }\n\n            // set layout option\n            if (typeof webgpuOptions.preferredLayout === 'string') {\n              appendEpOption(epOptions, 'preferredLayout', webgpuOptions.preferredLayout, allocs);\n            }\n\n            // set force CPU fallback nodes\n            if (webgpuOptions.forceCpuNodeNames) {\n              const names = Array.isArray(webgpuOptions.forceCpuNodeNames)\n                ? webgpuOptions.forceCpuNodeNames\n                : [webgpuOptions.forceCpuNodeNames];\n\n              appendEpOption(epOptions, 'forceCpuNodeNames', names.join('\\n'), allocs);\n            }\n\n            // set validation mode\n            if (webgpuOptions.validationMode) {\n              appendEpOption(epOptions, 'validationMode', webgpuOptions.validationMode, allocs);\n            }\n          }\n\n          const info = getInstance().webgpuRegisterDevice!(customDevice);\n          if (info) {\n            const [deviceId, instanceHandle, deviceHandle] = info;\n            appendEpOption(epOptions, 'deviceId', deviceId.toString(), allocs);\n            appendEpOption(epOptions, 'webgpuInstance', instanceHandle.toString(), allocs);\n            appendEpOption(epOptions, 'webgpuDevice', deviceHandle.toString(), allocs);\n          }\n        } else {\n          epName = 'JS';\n          if (typeof ep !== 'string') {\n            const webgpuOptions = ep as InferenceSession.WebGpuExecutionProviderOption;\n            if (webgpuOptions?.preferredLayout) {\n              if (webgpuOptions.preferredLayout !== 'NCHW' && webgpuOptions.preferredLayout !== 'NHWC') {\n                throw new Error(`preferredLayout must be either 'NCHW' or 'NHWC': ${webgpuOptions.preferredLayout}`);\n              }\n              appendSessionConfig(sessionOptionsHandle, 'preferredLayout', webgpuOptions.preferredLayout, allocs);\n            }\n          }\n        }\n        break;\n      case 'wasm':\n      case 'cpu':\n        continue;\n      default:\n        throw new Error(`not supported execution provider: ${epName}`);\n    }\n\n    const epNameDataOffset = allocWasmString(epName, allocs);\n    const epOptionsCount = epOptions.length;\n    let keysOffset = 0;\n    let valuesOffset = 0;\n    if (epOptionsCount > 0) {\n      keysOffset = getInstance()._malloc(epOptionsCount * getInstance().PTR_SIZE);\n      allocs.push(keysOffset);\n      valuesOffset = getInstance()._malloc(epOptionsCount * getInstance().PTR_SIZE);\n      allocs.push(valuesOffset);\n      for (let i = 0; i < epOptionsCount; i++) {\n        getInstance().setValue(keysOffset + i * getInstance().PTR_SIZE, epOptions[i][0], '*');\n        getInstance().setValue(valuesOffset + i * getInstance().PTR_SIZE, epOptions[i][1], '*');\n      }\n    }\n    if (\n      (await getInstance()._OrtAppendExecutionProvider(\n        sessionOptionsHandle,\n        epNameDataOffset,\n        keysOffset,\n        valuesOffset,\n        epOptionsCount,\n      )) !== 0\n    ) {\n      checkLastError(`Can't append execution provider: ${epName}.`);\n    }\n  }\n};\n\nexport const setSessionOptions = async (options?: InferenceSession.SessionOptions): Promise<[number, number[]]> => {\n  const wasm = getInstance();\n  let sessionOptionsHandle = 0;\n  const allocs: number[] = [];\n\n  const sessionOptions: InferenceSession.SessionOptions = options || {};\n  appendDefaultOptions(sessionOptions);\n\n  try {\n    const graphOptimizationLevel = getGraphOptimzationLevel(sessionOptions.graphOptimizationLevel ?? 'all');\n    const executionMode = getExecutionMode(sessionOptions.executionMode ?? 'sequential');\n    const logIdDataOffset =\n      typeof sessionOptions.logId === 'string' ? allocWasmString(sessionOptions.logId, allocs) : 0;\n\n    const logSeverityLevel = sessionOptions.logSeverityLevel ?? 2; // Default to 2 - warning\n    if (!Number.isInteger(logSeverityLevel) || logSeverityLevel < 0 || logSeverityLevel > 4) {\n      throw new Error(`log severity level is not valid: ${logSeverityLevel}`);\n    }\n\n    const logVerbosityLevel = sessionOptions.logVerbosityLevel ?? 0; // Default to 0 - verbose\n    if (!Number.isInteger(logVerbosityLevel) || logVerbosityLevel < 0 || logVerbosityLevel > 4) {\n      throw new Error(`log verbosity level is not valid: ${logVerbosityLevel}`);\n    }\n\n    const optimizedModelFilePathOffset =\n      typeof sessionOptions.optimizedModelFilePath === 'string'\n        ? allocWasmString(sessionOptions.optimizedModelFilePath, allocs)\n        : 0;\n\n    sessionOptionsHandle = wasm._OrtCreateSessionOptions(\n      graphOptimizationLevel,\n      !!sessionOptions.enableCpuMemArena,\n      !!sessionOptions.enableMemPattern,\n      executionMode,\n      !!sessionOptions.enableProfiling,\n      0,\n      logIdDataOffset,\n      logSeverityLevel,\n      logVerbosityLevel,\n      optimizedModelFilePathOffset,\n    );\n    if (sessionOptionsHandle === 0) {\n      checkLastError(\"Can't create session options.\");\n    }\n\n    if (sessionOptions.executionProviders) {\n      await setExecutionProviders(sessionOptionsHandle, sessionOptions, allocs);\n    }\n\n    if (sessionOptions.enableGraphCapture !== undefined) {\n      if (typeof sessionOptions.enableGraphCapture !== 'boolean') {\n        throw new Error(`enableGraphCapture must be a boolean value: ${sessionOptions.enableGraphCapture}`);\n      }\n      appendSessionConfig(\n        sessionOptionsHandle,\n        'enableGraphCapture',\n        sessionOptions.enableGraphCapture.toString(),\n        allocs,\n      );\n    }\n\n    if (sessionOptions.freeDimensionOverrides) {\n      for (const [name, value] of Object.entries(sessionOptions.freeDimensionOverrides)) {\n        if (typeof name !== 'string') {\n          throw new Error(`free dimension override name must be a string: ${name}`);\n        }\n        if (typeof value !== 'number' || !Number.isInteger(value) || value < 0) {\n          throw new Error(`free dimension override value must be a non-negative integer: ${value}`);\n        }\n        const nameOffset = allocWasmString(name, allocs);\n        if (wasm._OrtAddFreeDimensionOverride(sessionOptionsHandle, nameOffset, value) !== 0) {\n          checkLastError(`Can't set a free dimension override: ${name} - ${value}.`);\n        }\n      }\n    }\n\n    if (sessionOptions.extra !== undefined) {\n      iterateExtraOptions(sessionOptions.extra, '', new WeakSet<Record<string, unknown>>(), (key, value) => {\n        appendSessionConfig(sessionOptionsHandle, key, value, allocs);\n      });\n    }\n\n    return [sessionOptionsHandle, allocs];\n  } catch (e) {\n    if (sessionOptionsHandle !== 0) {\n      if (wasm._OrtReleaseSessionOptions(sessionOptionsHandle) !== 0) {\n        checkLastError(\"Can't release session options.\");\n      }\n    }\n    allocs.forEach((alloc) => wasm._free(alloc));\n    throw e;\n  }\n};\n","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\n\nimport { Tensor } from 'onnxruntime-common';\n\n// a dummy type declaration for Float16Array in case any polyfill is available.\ndeclare global {\n  // eslint-disable-next-line @typescript-eslint/naming-convention, @typescript-eslint/no-explicit-any\n  const Float16Array: any;\n}\n\n// This file includes common definitions. They do NOT have dependency on the WebAssembly instance.\n\n/**\n * Copied from ONNX definition. Use this to drop dependency 'onnx_proto' to decrease compiled .js file size.\n */\nexport const enum DataType {\n  undefined = 0,\n  float = 1,\n  uint8 = 2,\n  int8 = 3,\n  uint16 = 4,\n  int16 = 5,\n  int32 = 6,\n  int64 = 7,\n  string = 8,\n  bool = 9,\n  float16 = 10,\n  double = 11,\n  uint32 = 12,\n  uint64 = 13,\n  complex64 = 14,\n  complex128 = 15,\n  bfloat16 = 16,\n\n  // 4-bit data-types\n  uint4 = 21,\n  int4 = 22,\n}\n\n/**\n * Map string tensor data to enum value\n */\nexport const tensorDataTypeStringToEnum = (type: string): DataType => {\n  switch (type) {\n    case 'int8':\n      return DataType.int8;\n    case 'uint8':\n      return DataType.uint8;\n    case 'bool':\n      return DataType.bool;\n    case 'int16':\n      return DataType.int16;\n    case 'uint16':\n      return DataType.uint16;\n    case 'int32':\n      return DataType.int32;\n    case 'uint32':\n      return DataType.uint32;\n    case 'float16':\n      return DataType.float16;\n    case 'float32':\n      return DataType.float;\n    case 'float64':\n      return DataType.double;\n    case 'string':\n      return DataType.string;\n    case 'int64':\n      return DataType.int64;\n    case 'uint64':\n      return DataType.uint64;\n    case 'int4':\n      return DataType.int4;\n    case 'uint4':\n      return DataType.uint4;\n\n    default:\n      throw new Error(`unsupported data type: ${type}`);\n  }\n};\n\n/**\n * Map enum value to string tensor data\n */\nexport const tensorDataTypeEnumToString = (typeProto: DataType): Tensor.Type => {\n  switch (typeProto) {\n    case DataType.int8:\n      return 'int8';\n    case DataType.uint8:\n      return 'uint8';\n    case DataType.bool:\n      return 'bool';\n    case DataType.int16:\n      return 'int16';\n    case DataType.uint16:\n      return 'uint16';\n    case DataType.int32:\n      return 'int32';\n    case DataType.uint32:\n      return 'uint32';\n    case DataType.float16:\n      return 'float16';\n    case DataType.float:\n      return 'float32';\n    case DataType.double:\n      return 'float64';\n    case DataType.string:\n      return 'string';\n    case DataType.int64:\n      return 'int64';\n    case DataType.uint64:\n      return 'uint64';\n    case DataType.int4:\n      return 'int4';\n    case DataType.uint4:\n      return 'uint4';\n\n    default:\n      throw new Error(`unsupported data type: ${typeProto}`);\n  }\n};\n\n/**\n * get tensor size in bytes by the given data type and dimensions\n * @returns size in integer or undefined if the data type is not supported\n */\nexport const calculateTensorSizeInBytes = (\n  dateType: number,\n  dimsOrSize: readonly number[] | number,\n): number | undefined => {\n  const elementSize = [\n    -1, // undefined = 0\n    4, // float = 1\n    1, // uint8 = 2\n    1, // int8 = 3\n    2, // uint16 = 4\n    2, // int16 = 5\n    4, // int32 = 6\n    8, // int64 = 7\n    -1, // string = 8\n    1, // bool = 9\n    2, // float16 = 10\n    8, // double = 11\n    4, // uint32 = 12\n    8, // uint64 = 13\n    -1, // complex64 = 14\n    -1, // complex128 = 15\n    -1, // bfloat16 = 16\n    -1, // FLOAT8E4M3FN = 17\n    -1, // FLOAT8E4M3FNUZ = 18\n    -1, // FLOAT8E5M2 = 19\n    -1, // FLOAT8E5M2FNUZ = 20\n    0.5, // uint4 = 21\n    0.5, // int4 = 22\n  ][dateType];\n\n  const size = typeof dimsOrSize === 'number' ? dimsOrSize : dimsOrSize.reduce((a, b) => a * b, 1);\n  return elementSize > 0 ? Math.ceil(size * elementSize) : undefined;\n};\n\n/**\n * get typed array constructor by the given tensor type\n */\nexport const tensorTypeToTypedArrayConstructor = (\n  type: Tensor.Type,\n):\n  | Float32ArrayConstructor\n  | Uint8ArrayConstructor\n  | Int8ArrayConstructor\n  | Uint16ArrayConstructor\n  | Int16ArrayConstructor\n  | Int32ArrayConstructor\n  | BigInt64ArrayConstructor\n  | Uint8ArrayConstructor\n  | Float64ArrayConstructor\n  | Uint32ArrayConstructor\n  | BigUint64ArrayConstructor => {\n  switch (type) {\n    case 'float16':\n      // allow Float16Array polyfill.\n      return typeof Float16Array !== 'undefined' && Float16Array.from ? Float16Array : Uint16Array;\n    case 'float32':\n      return Float32Array;\n    case 'uint8':\n      return Uint8Array;\n    case 'int8':\n      return Int8Array;\n    case 'uint16':\n      return Uint16Array;\n    case 'int16':\n      return Int16Array;\n    case 'int32':\n      return Int32Array;\n    case 'bool':\n      return Uint8Array;\n    case 'float64':\n      return Float64Array;\n    case 'uint32':\n      return Uint32Array;\n    case 'int64':\n      return BigInt64Array;\n    case 'uint64':\n      return BigUint64Array;\n    default:\n      throw new Error(`unsupported type: ${type}`);\n  }\n};\n\n/**\n * Map string log level to integer value\n */\nexport const logLevelStringToEnum = (logLevel?: 'verbose' | 'info' | 'warning' | 'error' | 'fatal'): number => {\n  switch (logLevel) {\n    case 'verbose':\n      return 0;\n    case 'info':\n      return 1;\n    case 'warning':\n      return 2;\n    case 'error':\n      return 3;\n    case 'fatal':\n      return 4;\n    default:\n      throw new Error(`unsupported logging level: ${logLevel}`);\n  }\n};\n\n/**\n * Check whether the given tensor type is supported by GPU buffer\n */\nexport const isGpuBufferSupportedType = (type: Tensor.Type): type is Tensor.GpuBufferDataTypes =>\n  type === 'float32' ||\n  type === 'float16' ||\n  type === 'int32' ||\n  type === 'int64' ||\n  type === 'uint32' ||\n  type === 'uint8' ||\n  type === 'bool' ||\n  type === 'uint4' ||\n  type === 'int4';\n\n/**\n * Check whether the given tensor type is supported by WebNN MLTensor\n */\nexport const isMLTensorSupportedType = (type: Tensor.Type): type is Tensor.MLTensorDataTypes =>\n  type === 'float32' ||\n  type === 'float16' ||\n  type === 'int32' ||\n  type === 'int64' ||\n  type === 'uint32' ||\n  type === 'uint64' ||\n  type === 'int8' ||\n  type === 'uint8' ||\n  type === 'bool' ||\n  type === 'uint4' ||\n  type === 'int4';\n\n/**\n * Map string data location to integer value\n */\nexport const dataLocationStringToEnum = (location: Tensor.DataLocation): number => {\n  switch (location) {\n    case 'none':\n      return 0;\n    case 'cpu':\n      return 1;\n    case 'cpu-pinned':\n      return 2;\n    case 'texture':\n      return 3;\n    case 'gpu-buffer':\n      return 4;\n    case 'ml-tensor':\n      return 5;\n    default:\n      throw new Error(`unsupported data location: ${location}`);\n  }\n};\n\n/**\n * Map integer data location to string value\n */\nexport const dataLocationEnumToString = (location: number): Tensor.DataLocation | undefined =>\n  (['none', 'cpu', 'cpu-pinned', 'texture', 'gpu-buffer', 'ml-tensor'] as const)[location];\n","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\n\nimport { isNode } from './wasm-utils-env';\n\n/**\n * Load a file into a Uint8Array.\n *\n * @param file - the file to load. Can be a URL/path, a Blob, an ArrayBuffer, or a Uint8Array.\n * @returns a Uint8Array containing the file data.\n */\nexport const loadFile = async (file: string | Blob | ArrayBufferLike | Uint8Array): Promise<Uint8Array> => {\n  if (typeof file === 'string') {\n    if (isNode) {\n      // load file into ArrayBuffer in Node.js\n      try {\n        const { readFile } = require('node:fs/promises');\n        return new Uint8Array(await readFile(file));\n      } catch (e) {\n        if (e.code === 'ERR_FS_FILE_TOO_LARGE') {\n          // file is too large, use fs.createReadStream instead\n          const { createReadStream } = require('node:fs');\n          const stream = createReadStream(file);\n          const chunks: Uint8Array[] = [];\n          for await (const chunk of stream) {\n            chunks.push(chunk);\n          }\n          return new Uint8Array(Buffer.concat(chunks));\n        }\n        throw e;\n      }\n    } else {\n      // load file into ArrayBuffer in browsers\n      const response = await fetch(file);\n      if (!response.ok) {\n        throw new Error(`failed to load external data file: ${file}`);\n      }\n      const contentLengthHeader = response.headers.get('Content-Length');\n      const fileSize = contentLengthHeader ? parseInt(contentLengthHeader, 10) : 0;\n      if (fileSize < 1073741824 /* 1GB */) {\n        // when Content-Length header is not set, we cannot determine the file size. We assume it is small enough to\n        // load into memory.\n        return new Uint8Array(await response.arrayBuffer());\n      } else {\n        // file is too large, use stream instead\n        if (!response.body) {\n          throw new Error(`failed to load external data file: ${file}, no response body.`);\n        }\n        const reader = response.body.getReader();\n\n        let buffer;\n        try {\n          // try to create ArrayBuffer directly\n          buffer = new ArrayBuffer(fileSize);\n        } catch (e) {\n          if (e instanceof RangeError) {\n            // use WebAssembly Memory to allocate larger ArrayBuffer\n            const pages = Math.ceil(fileSize / 65536);\n            buffer = new WebAssembly.Memory({ initial: pages, maximum: pages }).buffer;\n          } else {\n            throw e;\n          }\n        }\n\n        let offset = 0;\n        while (true) {\n          const { done, value } = await reader.read();\n          if (done) {\n            break;\n          }\n          const chunkSize = value.byteLength;\n          const chunk = new Uint8Array(buffer, offset, chunkSize);\n          chunk.set(value);\n          offset += chunkSize;\n        }\n        return new Uint8Array(buffer, 0, fileSize);\n      }\n    }\n  } else if (file instanceof Blob) {\n    return new Uint8Array(await file.arrayBuffer());\n  } else if (file instanceof Uint8Array) {\n    return file;\n  } else {\n    return new Uint8Array(file);\n  }\n};\n","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\n\nimport { Tensor } from 'onnxruntime-common';\n\nimport { tensorTypeToTypedArrayConstructor } from '../wasm-common';\n\nexport const createView = (\n  dataBuffer: ArrayBuffer,\n  type: Tensor.Type,\n):\n  | Int32Array\n  | Uint32Array\n  | BigInt64Array\n  | BigUint64Array\n  | Uint8Array\n  | Float32Array\n  | Float64Array\n  | Int8Array\n  | Int16Array\n  | Uint16Array => new (tensorTypeToTypedArrayConstructor(type))(dataBuffer);\n\n/**\n * a TensorView does not own the data.\n */\nexport interface TensorView {\n  readonly data: number;\n  readonly dataType: number;\n  readonly dims: readonly number[];\n\n  /**\n   * get a Float16Array data view of the tensor data. tensor data must be on CPU.\n   */\n  getUint16Array(): Uint16Array;\n\n  /**\n   * get a Float32Array data view of the tensor data. tensor data must be on CPU.\n   */\n  getFloat32Array(): Float32Array;\n\n  /**\n   * get a BigInt64Array data view of the tensor data. tensor data must be on CPU.\n   */\n  getBigInt64Array(): BigInt64Array;\n\n  /**\n   * get a Int32Array data view of the tensor data. tensor data must be on CPU.\n   */\n  getInt32Array(): Int32Array;\n\n  /**\n   * get a Uint16Array data view of the tensor data. tensor data must be on CPU.\n   */\n  getUint16Array(): Uint16Array;\n\n  /**\n   * create a new tensor view with the same data but different dimensions.\n   */\n  reshape(newDims: readonly number[]): TensorView;\n}\n","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\n\nimport { Env } from 'onnxruntime-common';\n\nimport { logLevelStringToEnum } from '../wasm-common';\n\ntype LogLevel = NonNullable<Env['logLevel']>;\ntype MessageString = string;\ntype MessageFunction = () => string;\ntype Message = MessageString | MessageFunction;\n\nconst logLevelPrefix = ['V', 'I', 'W', 'E', 'F'];\n\nconst doLog = (level: number, message: string): void => {\n  // eslint-disable-next-line no-console\n  console.log(`[${logLevelPrefix[level]},${new Date().toISOString()}]${message}`);\n};\n\nlet configLogLevel: LogLevel | undefined;\nlet debug: boolean | undefined;\n\nexport const configureLogger = ($configLogLevel: LogLevel, $debug: boolean): void => {\n  configLogLevel = $configLogLevel;\n  debug = $debug;\n};\n\n/**\n * A simple logging utility to log messages to the console.\n */\nexport const LOG = (logLevel: LogLevel, msg: Message): void => {\n  const messageLevel = logLevelStringToEnum(logLevel);\n  const configLevel = logLevelStringToEnum(configLogLevel);\n  if (messageLevel >= configLevel) {\n    doLog(messageLevel, typeof msg === 'function' ? msg() : msg);\n  }\n};\n\n/**\n * A simple logging utility to log messages to the console. Only logs when debug is enabled.\n */\nexport const LOG_DEBUG: typeof LOG = (...args: Parameters<typeof LOG>) => {\n  if (debug) {\n    LOG(...args);\n  }\n};\n","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\n\nimport { WebNNBackend } from '../backend-webnn';\nimport { tensorTypeToTypedArrayConstructor } from '../../wasm-common';\nimport { LOG_DEBUG } from '../log';\n\n// WebNN API currently does not have a TypeScript definition file. This file is a workaround with types generated from\n// WebNN API specification.\n// https://github.com/webmachinelearning/webnn/issues/677\n/// <reference path=\"webnn.d.ts\" />\n\n/**\n * Map from MLOperandDataType to size in bits. Using bits instead of bytes to avoid possible precision loss on int4 and uint4.\n */\nconst webnnDataTypeToSize = new Map<MLOperandDataType, number>([\n  ['float32', 32],\n  ['float16', 16],\n  ['int32', 32],\n  ['uint32', 32],\n  ['int64', 64],\n  ['uint64', 64],\n  ['int8', 8],\n  ['uint8', 8],\n  ['int4', 4],\n  ['uint4', 4],\n]);\n\n// Convert integer data to an Int32Array buffer.\n// Supports conversion from int64, uint64, uint32, int8 and uint8 to int32.\nexport const convertDataToInt32 = (data: Uint8Array, dataType: MLOperandDataType): Uint8Array => {\n  if (dataType === 'int32') {\n    return data;\n  }\n\n  const dataTypeSize = webnnDataTypeToSize.get(dataType);\n  if (!dataTypeSize) {\n    throw new Error(`WebNN backend does not support data type: ${dataType}`);\n  }\n  const bytesPerElement = dataTypeSize / 8;\n  // Make sure the data length is a multiple of the data type size.\n  if (data.byteLength % bytesPerElement !== 0) {\n    throw new Error(`Invalid Uint8Array length - must be a multiple of ${bytesPerElement}.`);\n  }\n\n  // Convert Uint8Array to original typed array.\n  const numElements = data.byteLength / bytesPerElement;\n  const originalArray = new (tensorTypeToTypedArrayConstructor(dataType))(data.buffer, data.byteOffset, numElements);\n\n  switch (dataType) {\n    case 'int64':\n    case 'uint64': {\n      // Convert original typed array to Int32Array.\n      const int32Array = new Int32Array(numElements);\n      for (let i = 0; i < numElements; i++) {\n        const value = originalArray[i];\n\n        // Check for overflow.\n        if (value > 2147483647n || value < -2147483648n) {\n          throw new Error(`Can not convert int64 data to int32 - value out of range.`);\n        }\n\n        int32Array[i] = Number(value);\n      }\n\n      return new Uint8Array(int32Array.buffer);\n    }\n    case 'int8':\n    case 'uint8':\n    case 'uint32': {\n      // Check for overflow.\n      if (dataType === 'uint32') {\n        if (originalArray.some((value) => value > 2147483647)) {\n          throw new Error(`Can not convert uint32 data to int32 - value out of range.`);\n        }\n      }\n      // Convert original typed array to Int32Array.\n      const int32Array = Int32Array.from(originalArray, Number);\n      return new Uint8Array(int32Array.buffer);\n    }\n    default:\n      throw new Error(`Unsupported data conversion from ${dataType} to 'int32'`);\n  }\n};\n\n// Convert Int32Array data to original integer data buffer.\n// Supports conversion from int32 to int64, uint64, uint32, int8 and uint8.\nexport const convertInt32ToData = (data: Uint8Array, dataType: MLOperandDataType): Uint8Array => {\n  if (dataType === 'int32') {\n    return data;\n  }\n\n  // Make sure the data length is a multiple of 4 bytes (Int32Array).\n  if (data.byteLength % 4 !== 0) {\n    throw new Error('Invalid Uint8Array length - must be a multiple of 4 (int32).');\n  }\n\n  // Convert Uint8Array to Int32Array.\n  const numElements = data.byteLength / 4;\n  const int32Array = new Int32Array(data.buffer, data.byteOffset, numElements);\n\n  switch (dataType) {\n    case 'int64': {\n      const bigInt64Array = BigInt64Array.from(int32Array, BigInt);\n      return new Uint8Array(bigInt64Array.buffer);\n    }\n    case 'uint64': {\n      if (int32Array.some((value) => value < 0)) {\n        throw new Error('Can not convert int32 data to uin64 - negative value found.');\n      }\n      const bigUint64Array = BigUint64Array.from(int32Array, BigInt);\n      return new Uint8Array(bigUint64Array.buffer);\n    }\n    case 'int8': {\n      if (int32Array.some((value) => value < -128 || value > 127)) {\n        throw new Error('Can not convert int32 data to int8 - value out of range.');\n      }\n      const int8Array = Int8Array.from(int32Array, Number);\n      return new Uint8Array(int8Array.buffer);\n    }\n    case 'uint8': {\n      if (int32Array.some((value) => value < 0 || value > 255)) {\n        throw new Error('Can not convert int32 data to uint8 - value out of range.');\n      }\n      return Uint8Array.from(int32Array, Number);\n    }\n    case 'uint32': {\n      if (int32Array.some((value) => value < 0)) {\n        throw new Error('Can not convert int32 data to uint32 - negative value found.');\n      }\n      const uint32Array = Uint32Array.from(int32Array, Number);\n      return new Uint8Array(uint32Array.buffer);\n    }\n    default:\n      throw new Error(`Unsupported data conversion from 'int32' to ${dataType}`);\n  }\n};\n\nexport type TensorId = number;\n\n/**\n * Manages TensorId to MLTensor mapping.\n */\nexport interface TensorManager {\n  /**\n   * Reserve a new TensorId.\n   */\n  reserveTensorId(): TensorId;\n  /**\n   * Release a TensorId.\n   */\n  releaseTensorId(tensorId: TensorId): void;\n  /**\n   * Ensure a MLTensor is created for the TensorId.\n   */\n  ensureTensor(\n    sessionId: number,\n    tensorId: TensorId,\n    dataType: MLOperandDataType,\n    shape: readonly number[],\n    copyOld: boolean,\n  ): Promise<MLTensor>;\n  /**\n   * Upload data to a MLTensor.\n   */\n  upload(tensorId: TensorId, data: Uint8Array): void;\n  /**\n   * Download data from a MLTensor.\n   */\n  download(tensorId: TensorId): Promise<ArrayBuffer>;\n  download(tensorId: TensorId, dstTensor: ArrayBufferView | ArrayBuffer): Promise<undefined>;\n  /**\n   * Release all tensors for a given session.\n   */\n  releaseTensorsForSession(session: number): void;\n  /**\n   * Register an externally created MLTensor with a given session id and return a TensorId.\n   */\n  registerTensor(sessionId: number, mlTensor: MLTensor, dataType: MLOperandDataType, shape: number[]): TensorId;\n}\n\nlet tensorGuid = 1;\nconst createNewTensorId = (): TensorId => tensorGuid++;\n\n/**\n * Map from data type to fallback data type.\n * When the context does not support the original data type, use fallback data type as workaround.\n * Note: Currently, we only support fallback to int32 for certain integer data types.\n */\nconst webnnDataTypeToFallback = new Map<MLOperandDataType, MLOperandDataType>([\n  ['int8', 'int32'],\n  ['uint8', 'int32'],\n  ['uint32', 'int32'],\n  ['int64', 'int32'],\n]);\n\n/**\n * Calculate the byte length of a tensor with the given data type and shape.\n */\nconst calculateByteLength = (dataType: MLOperandDataType, shape: readonly number[]): number => {\n  const dataTypeSize = webnnDataTypeToSize.get(dataType);\n  if (!dataTypeSize) {\n    throw new Error(`WebNN backend does not support data type: ${dataType}`);\n  }\n  return shape.length > 0 ? Math.ceil((shape.reduce((a, b) => a * b) * dataTypeSize) / 8) : 0;\n};\n\n/**\n * TensorWrapper wraps an MLTensor and provides a way to track the last session that used it.\n */\nclass TensorWrapper {\n  // The id of the last session that used this tensor.\n  public sessionId: number;\n  // This flag is used to indicate whether the data has been converted to fallback data type.\n  public isDataConverted = false;\n\n  private mlContext: MLContext;\n  private mlTensor: MLTensor;\n  private dataType: MLOperandDataType;\n  // Fallback data type to use when the context does not support the original data type.\n  private fallbackDataType: MLOperandDataType | undefined;\n  private tensorShape: readonly number[];\n\n  constructor(descriptor: {\n    sessionId: number;\n    context: MLContext;\n    tensor: MLTensor;\n    dataType: MLOperandDataType;\n    shape: readonly number[];\n    fallbackDataType?: MLOperandDataType;\n  }) {\n    const { sessionId, context, tensor, dataType, shape, fallbackDataType } = descriptor;\n    this.sessionId = sessionId;\n    this.mlContext = context;\n    this.mlTensor = tensor;\n    this.dataType = dataType;\n    this.tensorShape = shape;\n    this.fallbackDataType = fallbackDataType;\n  }\n\n  public get tensor(): MLTensor {\n    return this.mlTensor;\n  }\n\n  public get type(): MLOperandDataType {\n    return this.dataType;\n  }\n\n  public get fallbackType(): MLOperandDataType | undefined {\n    return this.fallbackDataType;\n  }\n\n  public get shape(): readonly number[] {\n    return this.tensorShape;\n  }\n\n  public get byteLength(): number {\n    return calculateByteLength(this.dataType, this.tensorShape);\n  }\n\n  public destroy(): void {\n    LOG_DEBUG('verbose', () => '[WebNN] TensorWrapper.destroy');\n    this.mlTensor.destroy();\n  }\n\n  public write(data: Uint8Array): void {\n    this.mlContext.writeTensor(this.mlTensor, data);\n  }\n\n  public async read(): Promise<ArrayBuffer>;\n  public async read(dstBuffer?: ArrayBufferView | ArrayBuffer): Promise<ArrayBuffer | undefined>;\n  public async read(dstBuffer?: ArrayBufferView | ArrayBuffer): Promise<ArrayBuffer | undefined> {\n    if (this.fallbackDataType) {\n      // This tensor has been fallback to int32 as workaround, we need to read it as its original integer data type.\n      const data = await this.mlContext.readTensor(this.mlTensor);\n      const originalData = convertInt32ToData(new Uint8Array(data), this.dataType);\n\n      if (dstBuffer) {\n        const targetBuffer =\n          dstBuffer instanceof ArrayBuffer\n            ? new Uint8Array(dstBuffer)\n            : new Uint8Array(dstBuffer.buffer, dstBuffer.byteOffset, dstBuffer.byteLength);\n        targetBuffer.set(originalData);\n        return undefined;\n      } else {\n        return originalData.buffer;\n      }\n    } else {\n      return dstBuffer ? this.mlContext.readTensor(this.mlTensor, dstBuffer) : this.mlContext.readTensor(this.mlTensor);\n    }\n  }\n\n  public canReuseTensor(context: MLContext, dataType: MLOperandDataType, shape: readonly number[]): boolean {\n    return (\n      this.mlContext === context &&\n      this.dataType === dataType &&\n      this.tensorShape.length === shape.length &&\n      this.tensorShape.every((v, i) => v === shape[i])\n    );\n  }\n\n  public setIsDataConverted(isConverted: boolean): void {\n    this.isDataConverted = isConverted;\n  }\n}\n\n/**\n * TensorTracker tracks the MLTensor and pending upload data.\n *\n * We need to track the MLTensor and pending upload data because we delay the creation of MLTensor until\n * we know the data type and shape. This is because WebNN only support creating MLTensors with dataTypes and shape.\n */\nclass TensorIdTracker {\n  private activeUpload?: Uint8Array;\n\n  constructor(\n    private tensorManager: TensorManagerImpl,\n    private wrapper?: TensorWrapper,\n  ) {}\n\n  public get tensorWrapper(): TensorWrapper | undefined {\n    return this.wrapper;\n  }\n\n  public releaseTensor(): void {\n    if (this.tensorWrapper) {\n      this.tensorManager.releaseTensor(this.tensorWrapper);\n      this.wrapper = undefined;\n    }\n  }\n\n  public async ensureTensor(\n    sessionId: number,\n    dataType: MLOperandDataType,\n    shape: readonly number[],\n    copyOld: boolean,\n  ): Promise<MLTensor> {\n    const context = this.tensorManager.getMLContext(sessionId);\n    const opLimits = this.tensorManager.getMLOpSupportLimits(sessionId);\n    let fallbackDataType: MLOperandDataType | undefined;\n    // Check if the context supports the data type. If not, try to use the fallback data type.\n    if (!opLimits?.input.dataTypes.includes(dataType)) {\n      fallbackDataType = webnnDataTypeToFallback.get(dataType);\n      if (!fallbackDataType || opLimits?.input.dataTypes.includes(fallbackDataType)) {\n        throw new Error(`WebNN backend does not support data type: ${dataType}`);\n      }\n      LOG_DEBUG(\n        'verbose',\n        () => `[WebNN] TensorIdTracker.ensureTensor: fallback dataType from ${dataType} to ${fallbackDataType}`,\n      );\n    }\n\n    if (this.wrapper) {\n      if (this.wrapper.canReuseTensor(context, dataType, shape)) {\n        return this.wrapper.tensor;\n      } else {\n        if (copyOld) {\n          if (this.wrapper.byteLength !== calculateByteLength(dataType, shape)) {\n            throw new Error('Unable to copy data to tensor with different size.');\n          }\n          this.activeUpload = new Uint8Array(await this.wrapper.read());\n        }\n        this.tensorManager.releaseTensor(this.wrapper);\n      }\n    }\n\n    // eslint-disable-next-line no-bitwise\n    const usage = typeof MLTensorUsage == 'undefined' ? undefined : MLTensorUsage.READ | MLTensorUsage.WRITE;\n    this.wrapper = await this.tensorManager.getCachedTensor(\n      sessionId,\n      dataType,\n      shape,\n      usage,\n      true,\n      true,\n      fallbackDataType,\n    );\n\n    if (copyOld && this.activeUpload) {\n      // We don't need to convert the original integer data to int32,\n      // because it has been converted when it was uploaded.\n      this.wrapper.write(this.activeUpload);\n      this.activeUpload = undefined;\n    }\n\n    return this.wrapper.tensor;\n  }\n\n  public upload(data: Uint8Array): void {\n    let newData = data;\n    if (this.wrapper) {\n      if (this.wrapper.fallbackType) {\n        if (this.wrapper.fallbackType === 'int32') {\n          // Convert original integer data to int32.\n          newData = convertDataToInt32(data, this.wrapper.type);\n          this.wrapper.setIsDataConverted(true);\n        } else {\n          throw new Error(`Unsupported fallback data type: ${this.wrapper.fallbackType}`);\n        }\n      }\n\n      // Check if the data size matches the tensor size.\n      if (data.byteLength === this.wrapper.byteLength) {\n        // Write the newData to the tensor.\n        this.wrapper.write(newData);\n        return;\n      } else {\n        LOG_DEBUG('verbose', () => 'Data size does not match tensor size. Releasing tensor.');\n        this.releaseTensor();\n      }\n    }\n\n    if (this.activeUpload) {\n      this.activeUpload.set(newData);\n    } else {\n      this.activeUpload = new Uint8Array(newData);\n    }\n  }\n\n  public async download(dstBuffer?: ArrayBufferView | ArrayBuffer): Promise<ArrayBuffer | undefined> {\n    if (this.activeUpload) {\n      // If this.activeUpload has been converted to int32, we need to convert it back to original integer data type.\n      const dstData = this.wrapper?.isDataConverted\n        ? convertInt32ToData(this.activeUpload, this.wrapper?.type)\n        : this.activeUpload;\n\n      if (dstBuffer) {\n        if (dstBuffer instanceof ArrayBuffer) {\n          new Uint8Array(dstBuffer).set(dstData);\n        } else {\n          new Uint8Array(dstBuffer.buffer, dstBuffer.byteOffset, dstBuffer.byteLength).set(dstData);\n        }\n        return;\n      } else {\n        return dstData.buffer;\n      }\n    }\n    if (!this.wrapper) {\n      throw new Error('Tensor has not been created.');\n    }\n\n    if (!dstBuffer) {\n      return this.wrapper.read();\n    }\n    return this.wrapper.read(dstBuffer);\n  }\n}\n\nclass TensorManagerImpl implements TensorManager {\n  private tensorTrackersById: Map<TensorId, TensorIdTracker> = new Map();\n  private freeTensors: TensorWrapper[] = [];\n  private externalTensors: Set<TensorWrapper> = new Set();\n\n  constructor(private backend: WebNNBackend) {}\n\n  public getMLContext(sessionId: number): MLContext {\n    const context = this.backend.getMLContext(sessionId);\n    if (!context) {\n      throw new Error('MLContext not found for session.');\n    }\n    return context;\n  }\n\n  public getMLOpSupportLimits(sessionId: number): MLOpSupportLimits | undefined {\n    return this.backend.getMLOpSupportLimits(sessionId);\n  }\n\n  public reserveTensorId(): TensorId {\n    const tensorId = createNewTensorId();\n    this.tensorTrackersById.set(tensorId, new TensorIdTracker(this));\n    return tensorId;\n  }\n\n  public releaseTensorId(tensorId: TensorId): void {\n    const tensorTracker = this.tensorTrackersById.get(tensorId);\n    if (!tensorTracker) {\n      return;\n    }\n    this.tensorTrackersById.delete(tensorId);\n    if (tensorTracker.tensorWrapper) {\n      this.releaseTensor(tensorTracker.tensorWrapper);\n    }\n  }\n\n  public async ensureTensor(\n    sessionId: number,\n    tensorId: TensorId,\n    dataType: MLOperandDataType,\n    shape: number[],\n    copyOld: boolean,\n  ): Promise<MLTensor> {\n    LOG_DEBUG(\n      'verbose',\n      () =>\n        `[WebNN] TensorManager.ensureTensor {tensorId: ${tensorId}, dataType: ${\n          dataType\n        }, shape: ${shape}, copyOld: ${copyOld}}`,\n    );\n    const tensor = this.tensorTrackersById.get(tensorId);\n    if (!tensor) {\n      throw new Error('Tensor not found.');\n    }\n    return tensor.ensureTensor(sessionId, dataType, shape, copyOld);\n  }\n\n  public upload(tensorId: TensorId, data: Uint8Array): void {\n    const tensor = this.tensorTrackersById.get(tensorId);\n    if (!tensor) {\n      throw new Error('Tensor not found.');\n    }\n    tensor.upload(data);\n  }\n\n  public async download(tensorId: TensorId): Promise<ArrayBuffer>;\n  public async download(tensorId: TensorId, dstBuffer: ArrayBufferView | ArrayBuffer): Promise<undefined>;\n  async download(tensorId: TensorId, dstBuffer?: ArrayBufferView | ArrayBuffer): Promise<ArrayBuffer | undefined> {\n    LOG_DEBUG(\n      'verbose',\n      () => `[WebNN] TensorManager.download {tensorId: ${tensorId}, dstBuffer: ${dstBuffer?.byteLength}}`,\n    );\n    const tensorTracker = this.tensorTrackersById.get(tensorId);\n    if (!tensorTracker) {\n      throw new Error('Tensor not found.');\n    }\n    return tensorTracker.download(dstBuffer);\n  }\n\n  public releaseTensorsForSession(sessionId: number): void {\n    for (const tensor of this.freeTensors) {\n      if (tensor.sessionId === sessionId) {\n        tensor.destroy();\n      }\n    }\n    this.freeTensors = this.freeTensors.filter((tensor) => tensor.sessionId !== sessionId);\n  }\n\n  public registerTensor(\n    sessionId: number,\n    mlTensor: MLTensor,\n    dataType: MLOperandDataType,\n    shape: readonly number[],\n  ): TensorId {\n    const context = this.getMLContext(sessionId);\n    const tensorId = createNewTensorId();\n    // Defaulting to READ | WRITE if usage is not provided.\n    const wrapper = new TensorWrapper({\n      sessionId,\n      context,\n      tensor: mlTensor,\n      dataType,\n      shape,\n    });\n    this.tensorTrackersById.set(tensorId, new TensorIdTracker(this, wrapper));\n    this.externalTensors.add(wrapper);\n    return tensorId;\n  }\n\n  /**\n   * Get or create an MLTensor with the given data type and shape.\n   */\n  public async getCachedTensor(\n    sessionId: number,\n    dataType: MLOperandDataType,\n    shape: readonly number[],\n    usage: MLTensorUsageFlags | undefined,\n    writable: boolean,\n    readable: boolean,\n    fallbackDataType?: MLOperandDataType,\n  ): Promise<TensorWrapper> {\n    const context = this.getMLContext(sessionId);\n    for (const [index, tensor] of this.freeTensors.entries()) {\n      if (tensor.canReuseTensor(context, dataType, shape)) {\n        LOG_DEBUG(\n          'verbose',\n          () =>\n            `[WebNN] Reusing tensor {dataType: ${dataType}, ${\n              fallbackDataType ? `fallbackDataType: ${fallbackDataType},` : ''\n            } shape: ${shape}`,\n        );\n        const wrapper = this.freeTensors.splice(index, 1)[0];\n        wrapper.sessionId = sessionId;\n        return wrapper;\n      }\n    }\n    LOG_DEBUG(\n      'verbose',\n      () =>\n        `[WebNN] MLContext.createTensor {dataType: ${dataType}, ${\n          fallbackDataType ? `fallbackDataType: ${fallbackDataType},` : ''\n        } shape: ${shape}}`,\n    );\n    const tensor = await context.createTensor({\n      dataType: fallbackDataType ?? dataType, // If fallback data type is provided, use it.\n      shape,\n      dimensions: shape,\n      usage,\n      writable,\n      readable,\n    });\n    return new TensorWrapper({ sessionId, context, tensor, dataType, shape, fallbackDataType });\n  }\n\n  /**\n   * Release tensor for reuse unless external.\n   */\n  public releaseTensor(tensorWrapper: TensorWrapper) {\n    if (this.externalTensors.has(tensorWrapper)) {\n      this.externalTensors.delete(tensorWrapper);\n    }\n    this.freeTensors.push(tensorWrapper);\n  }\n}\n\nexport const createTensorManager = (...args: ConstructorParameters<typeof TensorManagerImpl>): TensorManager =>\n  new TensorManagerImpl(...args);\n","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\n\n// WebNN API currently does not have a TypeScript definition file. This file is a workaround with types generated from\n// WebNN API specification.\n// https://github.com/webmachinelearning/webnn/issues/677\n/// <reference path=\"webnn/webnn.d.ts\" />\n\nimport { Env, Tensor } from 'onnxruntime-common';\n\nimport { DataType, tensorDataTypeStringToEnum } from '../wasm-common';\nimport { getInstance } from '../wasm-factory';\n\nimport { createView } from './tensor-view';\nimport { TensorId, createTensorManager, convertDataToInt32 } from './webnn/tensor-manager';\nimport { configureLogger, LOG_DEBUG } from './log';\n\n/*\n * TensorProto::data_type to WebNN OperandType mapping.\n */\nconst onnxDataTypeToWebnnDataType = new Map<DataType, MLOperandDataType>([\n  [DataType.float, 'float32'],\n  [DataType.float16, 'float16'],\n  [DataType.int32, 'int32'],\n  [DataType.uint32, 'uint32'],\n  [DataType.int64, 'int64'],\n  [DataType.uint64, 'uint64'],\n  [DataType.int4, 'int4'],\n  [DataType.uint4, 'uint4'],\n  [DataType.int8, 'int8'],\n  [DataType.uint8, 'uint8'],\n  [DataType.bool, 'uint8'],\n]);\n\ntype MLContextEntry = {\n  gpuDevice?: GPUDevice;\n  options?: MLContextOptions;\n  mlContext: MLContext;\n};\n\nconst compareMLContextOptions = (a?: MLContextOptions, b?: MLContextOptions): boolean => {\n  if (a === b) {\n    return true;\n  }\n  if (a === undefined || b === undefined) {\n    return false;\n  }\n  const aKeys = Object.keys(a).sort() as Array<keyof typeof a>;\n  const bKeys = Object.keys(b).sort() as Array<keyof typeof b>;\n  return aKeys.length === bKeys.length && aKeys.every((key, index) => key === bKeys[index] && a[key] === b[key]);\n};\n\n/**\n * WebNN backend implementation. This class is used to keep track of the MLTensors created by the backend and keep track\n * of the current MLContext being used by the sessions.\n */\nexport class WebNNBackend {\n  /**\n   * Tensor managers for each session.\n   */\n  private tensorManager = createTensorManager(this);\n  /**\n   * Maps from session id to MLContexts.\n   */\n  private mlContextBySessionId = new Map<number, MLContext>();\n  /**\n   * Maps from MLContext to session ids.\n   */\n  private sessionIdsByMLContext = new Map<MLContext, Set<number>>();\n  /**\n   * Cache of MLContexts.\n   */\n  private mlContextCache: MLContextEntry[] = [];\n  /**\n   * Current session id.\n   */\n  private activeSessionId?: number;\n  /**\n   * Maps from session id to list of graph inputs.\n   */\n  private sessionGraphInputs: Map<number, string[]> = new Map();\n  /**\n   * Maps from session id to list of graph outputs.\n   */\n  private sessionGraphOutputs: Map<number, string[]> = new Map();\n  /**\n   * Temporary graph inputs for the current session.\n   * These inputs will be registered when the session is created.\n   */\n  private temporaryGraphInputs: string[] = [];\n  /**\n   * Temporary graph outputs for the current session.\n   * These outputs will be registered when the session is created.\n   */\n  private temporaryGraphOutputs: string[] = [];\n  /**\n   * Temporary tensors for the current session.\n   */\n  private temporarySessionTensorIds: Map<number, TensorId[]> = new Map();\n  /**\n   * Maps from session id to MLOpSupportLimits.\n   */\n  private mlOpSupportLimitsBySessionId = new Map<number, MLOpSupportLimits>();\n\n  constructor(env: Env) {\n    configureLogger(env.logLevel!, !!env.debug);\n  }\n\n  public get currentSessionId(): number {\n    if (this.activeSessionId === undefined) {\n      throw new Error('No active session');\n    }\n    return this.activeSessionId;\n  }\n\n  public onRunStart(sessionId: number): void {\n    LOG_DEBUG('verbose', () => `[WebNN] onRunStart {sessionId: ${sessionId}}`);\n    this.activeSessionId = sessionId;\n  }\n\n  public onRunEnd(sessionId: number): void {\n    LOG_DEBUG('verbose', () => `[WebNN] onRunEnd {sessionId: ${sessionId}}`);\n    const tensorIds = this.temporarySessionTensorIds.get(sessionId);\n    if (!tensorIds) {\n      return;\n    }\n    for (const tensorId of tensorIds) {\n      LOG_DEBUG('verbose', () => `[WebNN] releasing temporary tensor {tensorId: ${tensorId}}`);\n      this.tensorManager.releaseTensorId(tensorId);\n    }\n    this.temporarySessionTensorIds.delete(sessionId);\n    this.activeSessionId = undefined;\n  }\n\n  public async createMLContext(optionsOrDevice?: MLContextOptions | GPUDevice): Promise<MLContext> {\n    if (optionsOrDevice instanceof GPUDevice) {\n      const mlContextIndex = this.mlContextCache.findIndex((entry) => entry.gpuDevice === optionsOrDevice);\n      if (mlContextIndex !== -1) {\n        return this.mlContextCache[mlContextIndex].mlContext;\n      } else {\n        const mlContext = await navigator.ml.createContext(optionsOrDevice);\n        this.mlContextCache.push({ gpuDevice: optionsOrDevice, mlContext });\n        return mlContext;\n      }\n    } else if (optionsOrDevice === undefined) {\n      const mlContextIndex = this.mlContextCache.findIndex(\n        (entry) => entry.options === undefined && entry.gpuDevice === undefined,\n      );\n      if (mlContextIndex !== -1) {\n        return this.mlContextCache[mlContextIndex].mlContext;\n      } else {\n        const mlContext = await navigator.ml.createContext();\n        this.mlContextCache.push({ mlContext });\n        return mlContext;\n      }\n    }\n\n    const mlContextIndex = this.mlContextCache.findIndex((entry) =>\n      compareMLContextOptions(entry.options, optionsOrDevice),\n    );\n    if (mlContextIndex !== -1) {\n      return this.mlContextCache[mlContextIndex].mlContext;\n    } else {\n      const mlContext = await navigator.ml.createContext(optionsOrDevice);\n      this.mlContextCache.push({ options: optionsOrDevice, mlContext });\n      return mlContext;\n    }\n  }\n\n  public registerMLContext(sessionId: number, mlContext: MLContext): void {\n    this.mlContextBySessionId.set(sessionId, mlContext);\n    let sessionIds = this.sessionIdsByMLContext.get(mlContext);\n    if (!sessionIds) {\n      sessionIds = new Set();\n      this.sessionIdsByMLContext.set(mlContext, sessionIds);\n    }\n    sessionIds.add(sessionId);\n\n    if (!this.mlOpSupportLimitsBySessionId.has(sessionId)) {\n      this.mlOpSupportLimitsBySessionId.set(sessionId, mlContext.opSupportLimits());\n    }\n\n    if (this.temporaryGraphInputs.length > 0) {\n      this.sessionGraphInputs.set(sessionId, this.temporaryGraphInputs);\n      this.temporaryGraphInputs = [];\n    }\n    if (this.temporaryGraphOutputs.length > 0) {\n      this.sessionGraphOutputs.set(sessionId, this.temporaryGraphOutputs);\n      this.temporaryGraphOutputs = [];\n    }\n  }\n\n  public onReleaseSession(sessionId: number): void {\n    this.sessionGraphInputs.delete(sessionId);\n    this.sessionGraphOutputs.delete(sessionId);\n    const mlContext = this.mlContextBySessionId.get(sessionId)!;\n    if (!mlContext) {\n      // Current session is not a WebNN session.\n      return;\n    }\n    this.tensorManager.releaseTensorsForSession(sessionId);\n    this.mlContextBySessionId.delete(sessionId);\n    this.mlOpSupportLimitsBySessionId.delete(sessionId);\n    const sessionIds = this.sessionIdsByMLContext.get(mlContext)!;\n    sessionIds.delete(sessionId);\n    if (sessionIds.size === 0) {\n      this.sessionIdsByMLContext.delete(mlContext);\n      const mlContextIndex = this.mlContextCache.findIndex((entry) => entry.mlContext === mlContext);\n      if (mlContextIndex !== -1) {\n        this.mlContextCache.splice(mlContextIndex, 1);\n      }\n    }\n  }\n\n  public getMLContext(sessionId: number): MLContext | undefined {\n    return this.mlContextBySessionId.get(sessionId);\n  }\n\n  public getMLOpSupportLimits(sessionId: number): MLOpSupportLimits | undefined {\n    return this.mlOpSupportLimitsBySessionId.get(sessionId);\n  }\n\n  public reserveTensorId(): TensorId {\n    return this.tensorManager.reserveTensorId();\n  }\n\n  public releaseTensorId(tensorId: TensorId): void {\n    LOG_DEBUG('verbose', () => `[WebNN] releaseTensorId {tensorId: ${tensorId}}`);\n    this.tensorManager.releaseTensorId(tensorId);\n  }\n\n  public async ensureTensor(\n    sessionId: number | undefined,\n    tensorId: TensorId,\n    onnxDataType: DataType,\n    dimensions: number[],\n    copyOld: boolean,\n  ): Promise<MLTensor> {\n    const webnnDataType = onnxDataTypeToWebnnDataType.get(onnxDataType);\n    if (!webnnDataType) {\n      throw new Error(`Unsupported ONNX data type: ${onnxDataType}`);\n    }\n    return this.tensorManager.ensureTensor(\n      sessionId ?? this.currentSessionId,\n      tensorId,\n      webnnDataType,\n      dimensions,\n      copyOld,\n    );\n  }\n\n  public async createTemporaryTensor(\n    sessionId: number,\n    onnxDataType: DataType,\n    shape: readonly number[],\n  ): Promise<TensorId> {\n    LOG_DEBUG('verbose', () => `[WebNN] createTemporaryTensor {onnxDataType: ${onnxDataType}, shape: ${shape}}`);\n    const dataType = onnxDataTypeToWebnnDataType.get(onnxDataType);\n    if (!dataType) {\n      throw new Error(`Unsupported ONNX data type: ${onnxDataType}`);\n    }\n    const tensorId = this.tensorManager.reserveTensorId();\n    await this.tensorManager.ensureTensor(sessionId, tensorId, dataType, shape, false);\n    const tensorIds = this.temporarySessionTensorIds.get(sessionId);\n    if (!tensorIds) {\n      this.temporarySessionTensorIds.set(sessionId, [tensorId]);\n    } else {\n      tensorIds.push(tensorId);\n    }\n    return tensorId;\n  }\n\n  public uploadTensor(tensorId: TensorId, data: Uint8Array): void {\n    const wasm = getInstance();\n    if (!wasm.shouldTransferToMLTensor) {\n      throw new Error('Trying to upload to a MLTensor while shouldTransferToMLTensor is false');\n    }\n    LOG_DEBUG('verbose', () => `[WebNN] uploadTensor {tensorId: ${tensorId}, data: ${data.byteLength}}`);\n    this.tensorManager.upload(tensorId, data);\n  }\n\n  public async downloadTensor(tensorId: TensorId, dstBuffer: ArrayBufferView | ArrayBuffer): Promise<undefined> {\n    return this.tensorManager.download(tensorId, dstBuffer);\n  }\n\n  public createMLTensorDownloader(tensorId: TensorId, type: Tensor.MLTensorDataTypes): () => Promise<Tensor.DataType> {\n    return async () => {\n      const data = await this.tensorManager.download(tensorId);\n      return createView(data, type);\n    };\n  }\n\n  public registerMLTensor(sessionId: number, tensor: MLTensor, onnxDataType: DataType, dimensions: number[]): TensorId {\n    const webnnDataType = onnxDataTypeToWebnnDataType.get(onnxDataType);\n    if (!webnnDataType) {\n      throw new Error(`Unsupported ONNX data type: ${onnxDataType}`);\n    }\n\n    const id = this.tensorManager.registerTensor(sessionId, tensor, webnnDataType, dimensions);\n    LOG_DEBUG(\n      'verbose',\n      () =>\n        `[WebNN] registerMLTensor {tensor: ${tensor}, dataType: ${webnnDataType}, dimensions: ${\n          dimensions\n        }} -> {tensorId: ${id}}`,\n    );\n    return id;\n  }\n\n  // Register a WebNN Constant operand from external data.\n  public registerMLConstant(\n    externalFilePath: string,\n    dataOffset: number,\n    dataLength: number,\n    builder: MLGraphBuilder,\n    desc: MLOperandDescriptor,\n    mountedFiles: Map<string, Uint8Array> | undefined,\n    shouldConvertInt64ToInt32 = false,\n  ): MLOperand {\n    // If available, \"Module.MountedFiles\" is a Map for all preloaded files.\n    if (!mountedFiles) {\n      throw new Error('External mounted files are not available.');\n    }\n\n    let filePath = externalFilePath;\n    if (externalFilePath.startsWith('./')) {\n      filePath = externalFilePath.substring(2);\n    }\n    const fileData = mountedFiles.get(filePath);\n    if (!fileData) {\n      throw new Error(`File with name ${filePath} not found in preloaded files.`);\n    }\n\n    if (dataOffset + dataLength > fileData.byteLength) {\n      throw new Error('Out of bounds: data offset and length exceed the external file data size.');\n    }\n\n    const buffer = fileData.slice(dataOffset, dataOffset + dataLength).buffer;\n    let bufferView: ArrayBufferView;\n    switch (desc.dataType) {\n      case 'float32':\n        bufferView = new Float32Array(buffer);\n        break;\n      case 'float16':\n        bufferView =\n          typeof Float16Array !== 'undefined' && Float16Array.from ? new Float16Array(buffer) : new Uint16Array(buffer);\n        break;\n      case 'int32':\n        bufferView = new Int32Array(buffer);\n        break;\n      case 'uint32':\n        bufferView = new Uint32Array(buffer);\n        break;\n      case 'int64':\n        if (shouldConvertInt64ToInt32) {\n          // Int64 is not supported by current context, use int32 instead.\n          const int32Buffer = convertDataToInt32(new Uint8Array(buffer), 'int64');\n          bufferView = new Int32Array(int32Buffer.buffer);\n          desc.dataType = 'int32';\n        } else {\n          bufferView = new BigInt64Array(buffer);\n        }\n        break;\n      case 'uint64':\n        bufferView = new BigUint64Array(buffer);\n        break;\n      case 'int8':\n        bufferView = new Int8Array(buffer);\n        break;\n      case 'int4':\n      case 'uint4':\n      case 'uint8':\n        bufferView = new Uint8Array(buffer);\n        break;\n      default:\n        throw new Error(`Unsupported data type: ${desc.dataType} in creating WebNN Constant from external data.`);\n    }\n\n    LOG_DEBUG(\n      'verbose',\n      () =>\n        `[WebNN] registerMLConstant {dataType: ${desc.dataType}, shape: ${desc.shape}}} ${\n          shouldConvertInt64ToInt32 ? '(Note: it was int64 data type and registered to int32 as workaround)' : ''\n        }`,\n    );\n\n    return builder.constant(desc, bufferView);\n  }\n\n  public registerGraphInput(inputName: string): void {\n    this.temporaryGraphInputs.push(inputName);\n  }\n\n  public registerGraphOutput(outputName: string): void {\n    this.temporaryGraphOutputs.push(outputName);\n  }\n\n  public isGraphInput(sessionId: number, inputName: string): boolean {\n    const inputNames = this.sessionGraphInputs.get(sessionId);\n    if (!inputNames) {\n      return false;\n    }\n    return inputNames.includes(inputName);\n  }\n\n  public isGraphOutput(sessionId: number, outputName: string): boolean {\n    const outputNames = this.sessionGraphOutputs.get(sessionId);\n    if (!outputNames) {\n      return false;\n    }\n    return outputNames.includes(outputName);\n  }\n\n  public isGraphInputOutputTypeSupported(sessionId: number, type: Tensor.Type, isInput = true): boolean {\n    const dataType = onnxDataTypeToWebnnDataType.get(tensorDataTypeStringToEnum(type));\n    const opLimits = this.mlOpSupportLimitsBySessionId.get(sessionId);\n\n    if (typeof dataType === 'undefined') {\n      return false;\n    }\n\n    if (isInput) {\n      return !!opLimits?.input.dataTypes.includes(dataType);\n    } else {\n      return !!opLimits?.output.dataTypes.includes(dataType);\n    }\n  }\n\n  public flush(): void {\n    // Unlike the WebGPU backend, the WebNN backend does not need to flush any pending operations.\n  }\n}\n","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\n\n// WebNN API currently does not have a TypeScript definition file. This file is a workaround with types generated from\n// WebNN API specification.\n// https://github.com/webmachinelearning/webnn/issues/677\n/// <reference path=\"jsep/webnn/webnn.d.ts\" />\n\nimport { Env, InferenceSession, Tensor, TRACE_EVENT_BEGIN, TRACE_EVENT_END } from 'onnxruntime-common';\n\nimport {\n  SerializableInternalBuffer,\n  SerializableSessionMetadata,\n  SerializableTensorMetadata,\n  TensorMetadata,\n} from './proxy-messages';\nimport { setRunOptions } from './run-options';\nimport { setSessionOptions } from './session-options';\nimport {\n  calculateTensorSizeInBytes,\n  dataLocationStringToEnum,\n  isGpuBufferSupportedType,\n  isMLTensorSupportedType,\n  logLevelStringToEnum,\n  tensorDataTypeEnumToString,\n  tensorDataTypeStringToEnum,\n  tensorTypeToTypedArrayConstructor,\n} from './wasm-common';\nimport { getInstance } from './wasm-factory';\nimport { allocWasmString, checkLastError } from './wasm-utils';\nimport { loadFile } from './wasm-utils-load-file';\n\n// #region Initializations\n\n/**\n * There are 4 different \"initialization\" steps for ORT. They happen in different places and different time.\n *\n * 1. JavaScript initialization for onnxruntime-common and onnxruntime-web.\n *    This is the first initialization step. In this step, onnxruntime-web calls onnxruntime-common's registerBackend()\n * function multiple times to register all the available backends. The backend registration is very fast. It only\n * registers the backend name with the uninitialized backend object. No heavy initialization is done in this step.\n *    Refer to web/lib/index.ts for the backend registration.\n *\n * 2. WebAssembly artifact initialization.\n *    This happens when any registered wasm backend is used for the first time (ie. `ort.InferenceSession.create()` is\n * called). In this step, onnxruntime-web does the followings:\n *     - create a proxy worker and make sure the proxy worker is ready to receive messages, if proxy is enabled.\n *     - perform feature detection, locate correct WebAssembly artifact path and call the Emscripten generated\n * JavaScript code to initialize the WebAssembly runtime.\n *         - if proxy is enabled, this step happens in the proxy worker using message 'init-wasm'.\n *         - downloading the 'ort-wasm{...}.wasm' file is done in this step.\n *         - if multi-thread is enabled, one or more webworker will be created to initialize the PThread threadpool.\n *\n * 3. ORT environment initialization.\n *    This happens after step 2. In this step, onnxruntime-web performs ONNX Runtime environment initialization.\n * Function `_OrtInit()` is called in this step.\n *     - if proxy is enabled, this step happens in the proxy worker using message 'init-ort'.\n *     - logging level (ort.env.logLevel) and thread number (ort.env.wasm.numThreads) are set in this step.\n *\n * 4. Session initialization.\n *    This happens when `ort.InferenceSession.create()` is called. Unlike the first 3 steps (they only called once),\n * this step will be done for each session. In this step, onnxruntime-web does the followings:\n *    If the parameter is a URL:\n *    - download the model data from the URL.\n *    - copy the model data to the WASM heap. (proxy: 'copy-from')\n *    - dereference the model buffer. This step allows the original ArrayBuffer to be garbage collected.\n *    - call `_OrtCreateSession()` to create the session. (proxy: 'create')\n *\n *    If the parameter is a Uint8Array object:\n *    - copy the model data to the WASM heap. (proxy: 'copy-from')\n *    - call `_OrtCreateSession()` to create the session. (proxy: 'create')\n *\n *\n */\n\n/**\n * initialize ORT environment.\n *\n * @param numThreads SetGlobalIntraOpNumThreads(numThreads)\n * @param loggingLevel CreateEnv(static_cast<OrtLoggingLevel>(logging_level))\n */\nconst initOrt = (numThreads: number, loggingLevel: number): void => {\n  const errorCode = getInstance()._OrtInit(numThreads, loggingLevel);\n  if (errorCode !== 0) {\n    checkLastError(\"Can't initialize onnxruntime.\");\n  }\n};\n\n/**\n * initialize runtime environment.\n * @param env passed in the environment config object.\n */\nexport const initRuntime = async (env: Env): Promise<void> => {\n  // init ORT\n  initOrt(env.wasm.numThreads!, logLevelStringToEnum(env.logLevel));\n};\n\n/**\n * perform EP specific initialization.\n *\n * @param env\n * @param epName\n */\nexport const initEp = async (env: Env, epName: string): Promise<void> => {\n  // initialize ASYNCIFY support\n  getInstance().asyncInit?.();\n\n  // perform WebGPU availability check ( either JSEP or WebGPU EP )\n  let webgpuAdapter = env.webgpu.adapter as GPUAdapter | null;\n  if (epName === 'webgpu') {\n    if (typeof navigator === 'undefined' || !navigator.gpu) {\n      throw new Error('WebGPU is not supported in current environment');\n    }\n    if (!webgpuAdapter) {\n      // if adapter is not set, request a new adapter.\n      const powerPreference = env.webgpu.powerPreference;\n      if (powerPreference !== undefined && powerPreference !== 'low-power' && powerPreference !== 'high-performance') {\n        throw new Error(`Invalid powerPreference setting: \"${powerPreference}\"`);\n      }\n      const forceFallbackAdapter = env.webgpu.forceFallbackAdapter;\n      if (forceFallbackAdapter !== undefined && typeof forceFallbackAdapter !== 'boolean') {\n        throw new Error(`Invalid forceFallbackAdapter setting: \"${forceFallbackAdapter}\"`);\n      }\n      webgpuAdapter = await navigator.gpu.requestAdapter({ powerPreference, forceFallbackAdapter });\n      if (!webgpuAdapter) {\n        throw new Error(\n          'Failed to get GPU adapter. ' +\n            'You may need to enable flag \"--enable-unsafe-webgpu\" if you are using Chrome.',\n        );\n      }\n    } else {\n      // if adapter is set, validate it.\n      if (\n        typeof webgpuAdapter.limits !== 'object' ||\n        typeof webgpuAdapter.features !== 'object' ||\n        typeof webgpuAdapter.requestDevice !== 'function'\n      ) {\n        throw new Error('Invalid GPU adapter set in `env.webgpu.adapter`. It must be a GPUAdapter object.');\n      }\n    }\n  }\n\n  // perform WebNN availability check ( either JSEP or WebNN EP )\n  if (epName === 'webnn') {\n    if (typeof navigator === 'undefined' || !(navigator as unknown as { ml: unknown }).ml) {\n      throw new Error('WebNN is not supported in current environment');\n    }\n  }\n\n  if (!BUILD_DEFS.DISABLE_JSEP) {\n    // eslint-disable-next-line @typescript-eslint/no-require-imports, @typescript-eslint/no-var-requires\n    const initJsep = require('./jsep/init').init;\n\n    if (epName === 'webgpu') {\n      await initJsep('webgpu', getInstance(), env, webgpuAdapter);\n    }\n    if (epName === 'webnn') {\n      await initJsep('webnn', getInstance(), env);\n    }\n  } else {\n    if (!BUILD_DEFS.DISABLE_WEBGPU && epName === 'webgpu') {\n      getInstance().webgpuInit!((device) => {\n        env.webgpu.device = device;\n      });\n    }\n    if (!BUILD_DEFS.DISABLE_WEBNN && epName === 'webnn') {\n      // eslint-disable-next-line @typescript-eslint/no-require-imports, @typescript-eslint/no-var-requires\n      const backend = new (require('./jsep/backend-webnn').WebNNBackend)(env);\n      getInstance().webnnInit!([\n        backend,\n        // webnnReserveTensorId\n        () => backend.reserveTensorId(),\n        // webnnReleaseTensorId,\n        (tensorId: number) => backend.releaseTensorId(tensorId),\n        // webnnEnsureTensor\n        async (sessionId: number | undefined, tensorId: number, onnxDataType: number, shape: number[], copyOld) =>\n          backend.ensureTensor(sessionId, tensorId, onnxDataType, shape, copyOld),\n        // webnnUploadTensor\n        (tensorId: number, data: Uint8Array) => {\n          backend.uploadTensor(tensorId, data);\n        },\n        // webnnDownloadTensor\n        async (tensorId: number, dstBuffer: ArrayBufferView | ArrayBuffer) =>\n          backend.downloadTensor(tensorId, dstBuffer),\n        // webnnRegisterMLContext\n        (sessionId: number, mlContext: MLContext) => backend.registerMLContext(sessionId, mlContext),\n        // webnnEnableTraceEvent\n        !!env.trace,\n      ]);\n    }\n  }\n};\n\n// #endregion Initializations\n\n/**\n * valid data locations for input/output tensors.\n */\ntype SupportedTensorDataLocationForInputOutput =\n  | 'cpu'\n  | 'cpu-pinned'\n  | 'gpu-buffer'\n  | 'ml-tensor'\n  // Use 'ml-tensor' during inference, but output a tensor located on the CPU.\n  | 'ml-tensor-cpu-output';\n\ntype IOBindingState = {\n  /**\n   * the handle of IO binding.\n   */\n  readonly handle: number;\n\n  /**\n   * the preferred location for each output tensor.\n   *\n   * value is one of 'cpu', 'cpu-pinned', 'gpu-buffer', 'ml-tensor'.\n   */\n  readonly outputPreferredLocations: readonly SupportedTensorDataLocationForInputOutput[];\n\n  /**\n   * enum value of the preferred location for each output tensor.\n   */\n  readonly outputPreferredLocationsEncoded: readonly number[];\n};\n\n/**\n *  tuple elements are: InferenceSession ID; inputNamesUTF8Encoded; outputNamesUTF8Encoded; bindingState\n */\ntype SessionMetadata = [\n  inferenceSessionId: number,\n  inputNamesUTF8Encoded: number[],\n  outputNamesUTF8Encoded: number[],\n  bindingState: IOBindingState | null,\n  enableGraphCapture: boolean,\n  inputOutputBound: boolean,\n];\n\nconst activeSessions = new Map<number, SessionMetadata>();\n\n/**\n * get the input/output count of the session.\n * @param sessionHandle the handle representing the session. should be non-zero.\n * @returns a tuple including 2 numbers, representing the input count and output count.\n */\nconst getSessionInputOutputCount = (sessionHandle: number): [number, number] => {\n  const wasm = getInstance();\n  const stack = wasm.stackSave();\n  try {\n    const ptrSize = wasm.PTR_SIZE;\n    const dataOffset = wasm.stackAlloc(2 * ptrSize);\n    const errorCode = wasm._OrtGetInputOutputCount(sessionHandle, dataOffset, dataOffset + ptrSize);\n    if (errorCode !== 0) {\n      checkLastError(\"Can't get session input/output count.\");\n    }\n    const type = ptrSize === 4 ? 'i32' : 'i64';\n    return [Number(wasm.getValue(dataOffset, type)), Number(wasm.getValue(dataOffset + ptrSize, type))];\n  } finally {\n    wasm.stackRestore(stack);\n  }\n};\n\nconst getSessionInputOutputMetadata = (\n  sessionHandle: number,\n  index: number,\n): [nameOffset: number, elementType: number, dims?: Array<number | string>] => {\n  const wasm = getInstance();\n  const stack = wasm.stackSave();\n  let metadataOffset = 0;\n  try {\n    const ptrSize = wasm.PTR_SIZE;\n    const dataOffset = wasm.stackAlloc(2 * ptrSize);\n    const errorCode = wasm._OrtGetInputOutputMetadata(sessionHandle, index, dataOffset, dataOffset + ptrSize);\n    if (errorCode !== 0) {\n      checkLastError(\"Can't get session input/output metadata.\");\n    }\n    const nameOffset = Number(wasm.getValue(dataOffset, '*'));\n    metadataOffset = Number(wasm.getValue(dataOffset + ptrSize, '*'));\n    // get element type\n    const elementType = wasm.HEAP32[metadataOffset / 4];\n    if (elementType === 0) {\n      return [nameOffset, 0]; // non-tensor\n    }\n\n    // get dims count\n    const dimsCount = wasm.HEAPU32[metadataOffset / 4 + 1];\n    // get dims\n    const dims: Array<number | string> = [];\n    for (let i = 0; i < dimsCount; i++) {\n      const symbolicDimNameOffset = Number(wasm.getValue(metadataOffset + 8 + i * ptrSize, '*'));\n      dims.push(\n        symbolicDimNameOffset !== 0\n          ? wasm.UTF8ToString(symbolicDimNameOffset)\n          : Number(wasm.getValue(metadataOffset + 8 + (i + dimsCount) * ptrSize, '*')),\n      );\n    }\n    return [nameOffset, elementType, dims];\n  } finally {\n    wasm.stackRestore(stack);\n    if (metadataOffset !== 0) {\n      wasm._OrtFree(metadataOffset);\n    }\n  }\n};\n\n/**\n * allocate the memory and memcpy the external buffer.\n *\n * @param model - the external buffer containing the model data. Must not be the same buffer as the WASM heap.\n * @returns a 2-elements tuple - the pointer and size of the allocated buffer\n */\nexport const copyFromExternalBuffer = (model: Uint8Array): [number, number] => {\n  const wasm = getInstance();\n  const modelDataOffset = wasm._malloc(model.byteLength);\n  if (modelDataOffset === 0) {\n    throw new Error(`Can't create a session. failed to allocate a buffer of size ${model.byteLength}.`);\n  }\n  wasm.HEAPU8.set(model, modelDataOffset);\n  return [modelDataOffset, model.byteLength];\n};\n\n/**\n * create an inference session from a model data buffer.\n *\n * @param modelData - either a Uint8Array object representing the model data, or a 2-elements tuple containing the\n *     pointer and size of the model data buffer.\n * @param options an optional session options object.\n * @returns a 3-elements tuple containing [session handle, input names, output names]\n */\nexport const createSession = async (\n  modelData: Uint8Array | SerializableInternalBuffer,\n  options?: InferenceSession.SessionOptions,\n): Promise<SerializableSessionMetadata> => {\n  let modelDataOffset: number, modelDataLength: number;\n  const wasm = getInstance();\n\n  if (Array.isArray(modelData)) {\n    // if model data is an array, it must be a 2-elements tuple containing the pointer and size of the model data\n    [modelDataOffset, modelDataLength] = modelData;\n  } else if (modelData.buffer === wasm.HEAPU8.buffer) {\n    // if model data uses the same buffer as the WASM heap, we don't need to copy it.\n    [modelDataOffset, modelDataLength] = [modelData.byteOffset, modelData.byteLength];\n  } else {\n    // otherwise, copy the model data to the WASM heap.\n    [modelDataOffset, modelDataLength] = copyFromExternalBuffer(modelData);\n  }\n\n  let sessionHandle = 0;\n  let sessionOptionsHandle = 0;\n  let ioBindingHandle = 0;\n  let allocs: number[] = [];\n  const inputNamesUTF8Encoded = [];\n  const outputNamesUTF8Encoded = [];\n\n  try {\n    [sessionOptionsHandle, allocs] = await setSessionOptions(options);\n\n    if (options?.externalData && wasm.mountExternalData) {\n      const loadingPromises = [];\n      for (const file of options.externalData) {\n        const path = typeof file === 'string' ? file : file.path;\n        loadingPromises.push(\n          loadFile(typeof file === 'string' ? file : file.data).then((data) => {\n            wasm.mountExternalData(path, data);\n          }),\n        );\n      }\n\n      // wait for all external data files to be loaded\n      await Promise.all(loadingPromises);\n    }\n\n    for (const provider of options?.executionProviders ?? []) {\n      const providerName = typeof provider === 'string' ? provider : provider.name;\n      if (providerName === 'webnn') {\n        wasm.shouldTransferToMLTensor = false;\n        if (typeof provider !== 'string') {\n          const webnnOptions = provider as InferenceSession.WebNNExecutionProviderOption;\n          const context = (webnnOptions as InferenceSession.WebNNOptionsWithMLContext)?.context;\n          const gpuDevice = (webnnOptions as InferenceSession.WebNNOptionsWebGpu)?.gpuDevice;\n          const deviceType = (webnnOptions as InferenceSession.WebNNContextOptions)?.deviceType;\n          const powerPreference = (webnnOptions as InferenceSession.WebNNContextOptions)?.powerPreference;\n          if (context) {\n            wasm.currentContext = context as MLContext;\n          } else if (gpuDevice) {\n            wasm.currentContext = await wasm.webnnCreateMLContext!(gpuDevice);\n          } else {\n            wasm.currentContext = await wasm.webnnCreateMLContext!({ deviceType, powerPreference });\n          }\n        } else {\n          wasm.currentContext = await wasm.webnnCreateMLContext!();\n        }\n        break;\n      }\n    }\n\n    sessionHandle = await wasm._OrtCreateSession(modelDataOffset, modelDataLength, sessionOptionsHandle);\n    wasm.webgpuOnCreateSession?.(sessionHandle);\n    if (sessionHandle === 0) {\n      checkLastError(\"Can't create a session.\");\n    }\n\n    wasm.jsepOnCreateSession?.();\n\n    // clear current MLContext after session creation\n    if (wasm.currentContext) {\n      wasm.webnnRegisterMLContext!(sessionHandle, wasm.currentContext);\n      wasm.currentContext = undefined;\n      wasm.shouldTransferToMLTensor = true;\n    }\n\n    const [inputCount, outputCount] = getSessionInputOutputCount(sessionHandle);\n\n    const enableGraphCapture = !!options?.enableGraphCapture;\n\n    const inputNames = [];\n    const outputNames = [];\n    const inputMetadata: InferenceSession.ValueMetadata[] = [];\n    const outputMetadata: InferenceSession.ValueMetadata[] = [];\n    const outputPreferredLocations: SupportedTensorDataLocationForInputOutput[] = [];\n    for (let i = 0; i < inputCount; i++) {\n      const [nameOffset, elementType, shape] = getSessionInputOutputMetadata(sessionHandle, i);\n      if (nameOffset === 0) {\n        checkLastError(\"Can't get an input name.\");\n      }\n      inputNamesUTF8Encoded.push(nameOffset);\n      const name = wasm.UTF8ToString(nameOffset);\n      inputNames.push(name);\n      inputMetadata.push(\n        elementType === 0\n          ? { name, isTensor: false }\n          : { name, isTensor: true, type: tensorDataTypeEnumToString(elementType), shape: shape! },\n      );\n    }\n    for (let i = 0; i < outputCount; i++) {\n      const [nameOffset, elementType, shape] = getSessionInputOutputMetadata(sessionHandle, i + inputCount);\n      if (nameOffset === 0) {\n        checkLastError(\"Can't get an output name.\");\n      }\n      outputNamesUTF8Encoded.push(nameOffset);\n      const nameString = wasm.UTF8ToString(nameOffset);\n      outputNames.push(nameString);\n      outputMetadata.push(\n        elementType === 0\n          ? { name: nameString, isTensor: false }\n          : { name: nameString, isTensor: true, type: tensorDataTypeEnumToString(elementType), shape: shape! },\n      );\n\n      if (!BUILD_DEFS.DISABLE_JSEP || !BUILD_DEFS.DISABLE_WEBGPU) {\n        if (enableGraphCapture && options?.preferredOutputLocation === undefined) {\n          outputPreferredLocations.push('gpu-buffer');\n          continue;\n        }\n        const location =\n          typeof options?.preferredOutputLocation === 'string'\n            ? options.preferredOutputLocation\n            : (options?.preferredOutputLocation?.[nameString] ?? 'cpu');\n        const isGraphOutput = wasm.webnnIsGraphOutput;\n        if (location === 'cpu' && isGraphOutput && isGraphOutput(sessionHandle, nameString)) {\n          outputPreferredLocations.push('ml-tensor-cpu-output');\n          continue;\n        }\n        if (location !== 'cpu' && location !== 'cpu-pinned' && location !== 'gpu-buffer' && location !== 'ml-tensor') {\n          throw new Error(`Not supported preferred output location: ${location}.`);\n        }\n        if (enableGraphCapture && location !== 'gpu-buffer') {\n          throw new Error(\n            `Not supported preferred output location: ${location}. Only 'gpu-buffer' location is supported when enableGraphCapture is true.`,\n          );\n        }\n        outputPreferredLocations.push(location);\n      }\n    }\n\n    // use IO binding only when at least one output is preferred to be on GPU.\n    let bindingState: IOBindingState | null = null;\n    if (\n      (!BUILD_DEFS.DISABLE_JSEP || !BUILD_DEFS.DISABLE_WEBGPU) &&\n      outputPreferredLocations.some((l) => l === 'gpu-buffer' || l === 'ml-tensor' || l === 'ml-tensor-cpu-output')\n    ) {\n      ioBindingHandle = wasm._OrtCreateBinding(sessionHandle);\n      if (ioBindingHandle === 0) {\n        checkLastError(\"Can't create IO binding.\");\n      }\n\n      bindingState = {\n        handle: ioBindingHandle,\n        outputPreferredLocations,\n        outputPreferredLocationsEncoded: outputPreferredLocations\n          // 'ml-tensor-cpu-output' is treated as 'ml-tensor' for the purpose of IO binding.\n          .map((l) => (l === 'ml-tensor-cpu-output' ? 'ml-tensor' : l))\n          .map((l) => dataLocationStringToEnum(l)),\n      };\n    }\n\n    activeSessions.set(sessionHandle, [\n      sessionHandle,\n      inputNamesUTF8Encoded,\n      outputNamesUTF8Encoded,\n      bindingState,\n      enableGraphCapture,\n      false,\n    ]);\n    return [sessionHandle, inputNames, outputNames, inputMetadata, outputMetadata];\n  } catch (e) {\n    inputNamesUTF8Encoded.forEach((buf) => wasm._OrtFree(buf));\n    outputNamesUTF8Encoded.forEach((buf) => wasm._OrtFree(buf));\n\n    if (ioBindingHandle !== 0) {\n      if (wasm._OrtReleaseBinding(ioBindingHandle) !== 0) {\n        checkLastError(\"Can't release IO binding.\");\n      }\n    }\n\n    if (sessionHandle !== 0) {\n      if (wasm._OrtReleaseSession(sessionHandle) !== 0) {\n        checkLastError(\"Can't release session.\");\n      }\n    }\n    throw e;\n  } finally {\n    wasm._free(modelDataOffset);\n    if (sessionOptionsHandle !== 0) {\n      if (wasm._OrtReleaseSessionOptions(sessionOptionsHandle) !== 0) {\n        checkLastError(\"Can't release session options.\");\n      }\n    }\n    allocs.forEach((alloc) => wasm._free(alloc));\n\n    // unmount external data if necessary\n    wasm.unmountExternalData?.();\n  }\n};\n\nexport const releaseSession = (sessionId: number): void => {\n  const wasm = getInstance();\n  const session = activeSessions.get(sessionId);\n  if (!session) {\n    throw new Error(`cannot release session. invalid session id: ${sessionId}`);\n  }\n  const [sessionHandle, inputNamesUTF8Encoded, outputNamesUTF8Encoded, ioBindingState, enableGraphCapture] = session;\n\n  if (ioBindingState) {\n    if (enableGraphCapture) {\n      if (wasm._OrtClearBoundOutputs(ioBindingState.handle) !== 0) {\n        checkLastError(\"Can't clear bound outputs.\");\n      }\n    }\n    if (wasm._OrtReleaseBinding(ioBindingState.handle) !== 0) {\n      checkLastError(\"Can't release IO binding.\");\n    }\n  }\n\n  wasm.jsepOnReleaseSession?.(sessionId);\n  wasm.webnnOnReleaseSession?.(sessionId);\n  wasm.webgpuOnReleaseSession?.(sessionId);\n\n  inputNamesUTF8Encoded.forEach((buf) => wasm._OrtFree(buf));\n  outputNamesUTF8Encoded.forEach((buf) => wasm._OrtFree(buf));\n  if (wasm._OrtReleaseSession(sessionHandle) !== 0) {\n    checkLastError(\"Can't release session.\");\n  }\n  activeSessions.delete(sessionId);\n};\n\nexport const prepareInputOutputTensor = async (\n  tensor: TensorMetadata | null,\n  tensorHandles: number[],\n  allocs: number[],\n  sessionId: number,\n  tensorNameUTF8Encoded: number,\n  index: number,\n  enableGraphCapture = false,\n): Promise<void> => {\n  if (!tensor) {\n    tensorHandles.push(0);\n    return;\n  }\n\n  const wasm = getInstance();\n  const ptrSize = wasm.PTR_SIZE;\n\n  const dataType = tensor[0];\n  const dims = tensor[1];\n  const location = tensor[3];\n  let actualLocation = location;\n\n  let rawData: number;\n  let dataByteLength: number;\n\n  if (dataType === 'string' && (location === 'gpu-buffer' || location === 'ml-tensor')) {\n    throw new Error('String tensor is not supported on GPU.');\n  }\n\n  if (enableGraphCapture && location !== 'gpu-buffer') {\n    throw new Error(\n      `External buffer must be provided for input/output index ${index} when enableGraphCapture is true.`,\n    );\n  }\n\n  if (location === 'gpu-buffer') {\n    const gpuBuffer = tensor[2].gpuBuffer;\n    dataByteLength = calculateTensorSizeInBytes(tensorDataTypeStringToEnum(dataType), dims)!;\n\n    if (!BUILD_DEFS.DISABLE_WEBGPU) {\n      const registerBuffer = wasm.webgpuRegisterBuffer;\n      if (!registerBuffer) {\n        throw new Error('Tensor location \"gpu-buffer\" is not supported without using WebGPU.');\n      }\n\n      rawData = registerBuffer(gpuBuffer, sessionId);\n    } else {\n      const registerBuffer = wasm.jsepRegisterBuffer;\n      if (!registerBuffer) {\n        throw new Error('Tensor location \"gpu-buffer\" is not supported without using WebGPU.');\n      }\n      rawData = registerBuffer(sessionId, index, gpuBuffer, dataByteLength);\n    }\n  } else if (location === 'ml-tensor') {\n    const mlTensor = tensor[2].mlTensor as MLTensor;\n    dataByteLength = calculateTensorSizeInBytes(tensorDataTypeStringToEnum(dataType), dims)!;\n\n    const registerMLTensor = wasm.webnnRegisterMLTensor;\n    if (!registerMLTensor) {\n      throw new Error('Tensor location \"ml-tensor\" is not supported without using WebNN.');\n    }\n    rawData = registerMLTensor(sessionId, mlTensor, tensorDataTypeStringToEnum(dataType), dims);\n  } else {\n    const data = tensor[2];\n\n    if (Array.isArray(data)) {\n      // string tensor\n      dataByteLength = ptrSize * data.length;\n      rawData = wasm._malloc(dataByteLength);\n      allocs.push(rawData);\n      for (let i = 0; i < data.length; i++) {\n        if (typeof data[i] !== 'string') {\n          throw new TypeError(`tensor data at index ${i} is not a string`);\n        }\n        wasm.setValue(rawData + i * ptrSize, allocWasmString(data[i], allocs), '*');\n      }\n    } else {\n      const isGraphInput = wasm.webnnIsGraphInput;\n      const isGraphOutput = wasm.webnnIsGraphOutput;\n      if (dataType !== 'string' && isGraphInput && isGraphOutput) {\n        const tensorName = wasm.UTF8ToString(tensorNameUTF8Encoded);\n        // Promote the tensor to 'ml-tensor' if it is a graph input.\n        if (isGraphInput(sessionId, tensorName) || isGraphOutput(sessionId, tensorName)) {\n          const dataTypeEnum = tensorDataTypeStringToEnum(dataType);\n          dataByteLength = calculateTensorSizeInBytes(dataTypeEnum, dims)!;\n          actualLocation = 'ml-tensor';\n          const createTemporaryTensor = wasm.webnnCreateTemporaryTensor;\n          const uploadTensor = wasm.webnnUploadTensor;\n          if (!createTemporaryTensor || !uploadTensor) {\n            throw new Error('Tensor location \"ml-tensor\" is not supported without using WebNN.');\n          }\n          const tensorId = await createTemporaryTensor(sessionId, dataTypeEnum, dims as number[]);\n          uploadTensor(tensorId, new Uint8Array(data.buffer, data.byteOffset, data.byteLength));\n          rawData = tensorId;\n        } else {\n          dataByteLength = data.byteLength;\n          rawData = wasm._malloc(dataByteLength);\n          allocs.push(rawData);\n          wasm.HEAPU8.set(new Uint8Array(data.buffer, data.byteOffset, dataByteLength), rawData);\n        }\n      } else {\n        dataByteLength = data.byteLength;\n        rawData = wasm._malloc(dataByteLength);\n        allocs.push(rawData);\n        wasm.HEAPU8.set(new Uint8Array(data.buffer, data.byteOffset, dataByteLength), rawData);\n      }\n    }\n  }\n\n  const stack = wasm.stackSave();\n  const dimsOffset = wasm.stackAlloc(4 * dims.length);\n  try {\n    dims.forEach((d, index) => wasm.setValue(dimsOffset + index * ptrSize, d, ptrSize === 4 ? 'i32' : 'i64'));\n    const tensor = wasm._OrtCreateTensor(\n      tensorDataTypeStringToEnum(dataType),\n      rawData,\n      dataByteLength,\n      dimsOffset,\n      dims.length,\n      dataLocationStringToEnum(actualLocation),\n    );\n    if (tensor === 0) {\n      checkLastError(`Can't create tensor for input/output. session=${sessionId}, index=${index}.`);\n    }\n    tensorHandles.push(tensor);\n  } finally {\n    wasm.stackRestore(stack);\n  }\n};\n\n/**\n * perform inference run\n */\nexport const run = async (\n  sessionId: number,\n  inputIndices: number[],\n  inputTensors: TensorMetadata[],\n  outputIndices: number[],\n  outputTensors: Array<TensorMetadata | null>,\n  options: InferenceSession.RunOptions,\n): Promise<TensorMetadata[]> => {\n  const wasm = getInstance();\n  const ptrSize = wasm.PTR_SIZE;\n  const session = activeSessions.get(sessionId);\n  if (!session) {\n    throw new Error(`cannot run inference. invalid session id: ${sessionId}`);\n  }\n  const sessionHandle = session[0];\n  const inputNamesUTF8Encoded = session[1];\n  const outputNamesUTF8Encoded = session[2];\n  const ioBindingState = session[3];\n  const enableGraphCapture = session[4];\n  const inputOutputBound = session[5];\n\n  const inputCount = inputIndices.length;\n  const outputCount = outputIndices.length;\n\n  let runOptionsHandle = 0;\n  let runOptionsAllocs: number[] = [];\n\n  const inputTensorHandles: number[] = [];\n  const outputTensorHandles: number[] = [];\n  const inputOutputAllocs: number[] = [];\n  const preAllocatedOutputs: number[] = [];\n\n  const beforeRunStack = wasm.stackSave();\n  const inputValuesOffset = wasm.stackAlloc(inputCount * ptrSize);\n  const inputNamesOffset = wasm.stackAlloc(inputCount * ptrSize);\n  const outputValuesOffset = wasm.stackAlloc(outputCount * ptrSize);\n  const outputNamesOffset = wasm.stackAlloc(outputCount * ptrSize);\n\n  try {\n    [runOptionsHandle, runOptionsAllocs] = setRunOptions(options);\n\n    TRACE_EVENT_BEGIN('wasm prepareInputOutputTensor');\n    // create input tensors\n    for (let i = 0; i < inputCount; i++) {\n      await prepareInputOutputTensor(\n        inputTensors[i],\n        inputTensorHandles,\n        inputOutputAllocs,\n        sessionId,\n        inputNamesUTF8Encoded[inputIndices[i]],\n        inputIndices[i],\n        enableGraphCapture,\n      );\n    }\n\n    // create output tensors\n    for (let i = 0; i < outputCount; i++) {\n      await prepareInputOutputTensor(\n        outputTensors[i],\n        outputTensorHandles,\n        inputOutputAllocs,\n        sessionId,\n        outputNamesUTF8Encoded[outputIndices[i]],\n        inputCount + outputIndices[i],\n        enableGraphCapture,\n      );\n    }\n    TRACE_EVENT_END('wasm prepareInputOutputTensor');\n\n    for (let i = 0; i < inputCount; i++) {\n      wasm.setValue(inputValuesOffset + i * ptrSize, inputTensorHandles[i], '*');\n      wasm.setValue(inputNamesOffset + i * ptrSize, inputNamesUTF8Encoded[inputIndices[i]], '*');\n    }\n    for (let i = 0; i < outputCount; i++) {\n      wasm.setValue(outputValuesOffset + i * ptrSize, outputTensorHandles[i], '*');\n      wasm.setValue(outputNamesOffset + i * ptrSize, outputNamesUTF8Encoded[outputIndices[i]], '*');\n    }\n\n    if ((!BUILD_DEFS.DISABLE_JSEP || !BUILD_DEFS.DISABLE_WEBGPU) && ioBindingState && !inputOutputBound) {\n      const { handle, outputPreferredLocations, outputPreferredLocationsEncoded } = ioBindingState;\n\n      if (inputNamesUTF8Encoded.length !== inputCount) {\n        throw new Error(\n          `input count from feeds (${inputCount}) is expected to be always equal to model's input count (${inputNamesUTF8Encoded.length}).`,\n        );\n      }\n\n      TRACE_EVENT_BEGIN('wasm bindInputsOutputs');\n      // process inputs\n      for (let i = 0; i < inputCount; i++) {\n        const index = inputIndices[i];\n        const errorCode = await wasm._OrtBindInput(handle, inputNamesUTF8Encoded[index], inputTensorHandles[i]);\n        if (errorCode !== 0) {\n          checkLastError(`Can't bind input[${i}] for session=${sessionId}.`);\n        }\n      }\n\n      // process pre-allocated outputs\n      for (let i = 0; i < outputCount; i++) {\n        const index = outputIndices[i];\n        const location = outputTensors[i]?.[3]; // undefined means output is not pre-allocated.\n\n        if (location) {\n          // output is pre-allocated, store and bind the tensor.\n          preAllocatedOutputs.push(outputTensorHandles[i]);\n          const errorCode = wasm._OrtBindOutput(handle, outputNamesUTF8Encoded[index], outputTensorHandles[i], 0);\n          if (errorCode !== 0) {\n            checkLastError(`Can't bind pre-allocated output[${i}] for session=${sessionId}.`);\n          }\n        } else {\n          // output is not pre-allocated. reset preferred location.\n          const errorCode = wasm._OrtBindOutput(\n            handle,\n            outputNamesUTF8Encoded[index],\n            0,\n            outputPreferredLocationsEncoded[index],\n          );\n          if (errorCode !== 0) {\n            checkLastError(`Can't bind output[${i}] to ${outputPreferredLocations[i]} for session=${sessionId}.`);\n          }\n        }\n      }\n      TRACE_EVENT_END('wasm bindInputsOutputs');\n      activeSessions.set(sessionId, [\n        sessionHandle,\n        inputNamesUTF8Encoded,\n        outputNamesUTF8Encoded,\n        ioBindingState,\n        enableGraphCapture,\n        true,\n      ]);\n    }\n\n    wasm.jsepOnRunStart?.(sessionHandle);\n    wasm.webnnOnRunStart?.(sessionHandle);\n\n    let errorCode: number;\n    if ((!BUILD_DEFS.DISABLE_JSEP || !BUILD_DEFS.DISABLE_WEBGPU) && ioBindingState) {\n      errorCode = await wasm._OrtRunWithBinding(\n        sessionHandle,\n        ioBindingState.handle,\n        outputCount,\n        outputValuesOffset,\n        runOptionsHandle,\n      );\n    } else {\n      errorCode = await wasm._OrtRun(\n        sessionHandle,\n        inputNamesOffset,\n        inputValuesOffset,\n        inputCount,\n        outputNamesOffset,\n        outputCount,\n        outputValuesOffset,\n        runOptionsHandle,\n      );\n    }\n\n    if (errorCode !== 0) {\n      checkLastError('failed to call OrtRun().');\n    }\n\n    const output: TensorMetadata[] = [];\n    const outputPromises: Array<Promise<[number, Tensor.DataType]>> = [];\n\n    TRACE_EVENT_BEGIN('wasm ProcessOutputTensor');\n    for (let i = 0; i < outputCount; i++) {\n      const tensor = Number(wasm.getValue(outputValuesOffset + i * ptrSize, '*'));\n      // TODO: revisit this part to ensure it works for WebGPU when both pre-allocated outputs and\n      // preferred location are specified.\n      // Certain pre-allocated tensors may already be bound in the IO binding. e.g. the WebNN backend\n      // always binds its tensor to 'ml-tensor'. In such cases, the tensor ID might change after binding,\n      // but copying data for these tensors should still be avoided.\n      if (tensor === outputTensorHandles[i] || preAllocatedOutputs.includes(outputTensorHandles[i])) {\n        // output tensor is pre-allocated. no need to copy data.\n        output.push(outputTensors[i]!);\n        if (tensor !== outputTensorHandles[i]) {\n          // release redundant tensor earlier.\n          if (wasm._OrtReleaseTensor(tensor) !== 0) {\n            checkLastError(\"Can't release tensor.\");\n          }\n        }\n        continue;\n      }\n\n      const beforeGetTensorDataStack = wasm.stackSave();\n      // stack allocate 4 pointer value\n      const tensorDataOffset = wasm.stackAlloc(4 * ptrSize);\n\n      let keepOutputTensor = false;\n      let type: Tensor.Type | undefined,\n        dataOffset = 0;\n      try {\n        const errorCode = wasm._OrtGetTensorData(\n          tensor,\n          tensorDataOffset,\n          tensorDataOffset + ptrSize,\n          tensorDataOffset + 2 * ptrSize,\n\n          tensorDataOffset + 3 * ptrSize,\n        );\n        if (errorCode !== 0) {\n          checkLastError(`Can't access output tensor data on index ${i}.`);\n        }\n        const valueType = ptrSize === 4 ? 'i32' : 'i64';\n        const dataType = Number(wasm.getValue(tensorDataOffset, valueType));\n        dataOffset = wasm.getValue(tensorDataOffset + ptrSize, '*');\n        const dimsOffset = wasm.getValue(tensorDataOffset + ptrSize * 2, '*');\n        const dimsLength = Number(wasm.getValue(tensorDataOffset + ptrSize * 3, valueType));\n        const dims = [];\n        for (let i = 0; i < dimsLength; i++) {\n          dims.push(Number(wasm.getValue(dimsOffset + i * ptrSize, valueType)));\n        }\n        if (wasm._OrtFree(dimsOffset) !== 0) {\n          checkLastError(\"Can't free memory for tensor dims.\");\n        }\n        const size = dims.reduce((a, b) => a * b, 1);\n        type = tensorDataTypeEnumToString(dataType);\n\n        const preferredLocation = ioBindingState?.outputPreferredLocations[outputIndices[i]];\n\n        if (type === 'string') {\n          if (preferredLocation === 'gpu-buffer' || preferredLocation === 'ml-tensor') {\n            throw new Error('String tensor is not supported on GPU.');\n          }\n          const stringData: string[] = [];\n          for (let i = 0; i < size; i++) {\n            const offset = wasm.getValue(dataOffset + i * ptrSize, '*');\n            const nextOffset = wasm.getValue(dataOffset + (i + 1) * ptrSize, '*');\n            const maxBytesToRead = i === size - 1 ? undefined : nextOffset - offset;\n            stringData.push(wasm.UTF8ToString(offset, maxBytesToRead));\n          }\n          output.push([type, dims, stringData, 'cpu']);\n        } else {\n          // If a certain output's preferred location is GPU but the tensor is empty, we still need to create a CPU\n          // tensor for it. There is no mapping GPU buffer for an empty tensor.\n          if (preferredLocation === 'gpu-buffer' && size > 0) {\n            const getBuffer = !BUILD_DEFS.DISABLE_WEBGPU ? wasm.webgpuGetBuffer : wasm.jsepGetBuffer;\n            if (!getBuffer) {\n              throw new Error('preferredLocation \"gpu-buffer\" is not supported without using WebGPU.');\n            }\n            const gpuBuffer = getBuffer(dataOffset);\n            const bufferSize = calculateTensorSizeInBytes(dataType, size);\n            if (bufferSize === undefined || !isGpuBufferSupportedType(type)) {\n              throw new Error(`Unsupported data type: ${type}`);\n            }\n\n            // do not release the tensor right now. it will be released when user calls tensor.dispose().\n            keepOutputTensor = true;\n\n            if (!BUILD_DEFS.DISABLE_WEBGPU) {\n              wasm.webgpuRegisterBuffer!(gpuBuffer, sessionId, dataOffset);\n              const downloadDataFunction = wasm.webgpuCreateDownloader!(gpuBuffer, bufferSize, sessionId);\n              output.push([\n                type,\n                dims,\n                {\n                  gpuBuffer,\n                  download: async () => {\n                    const arrayBuffer = await downloadDataFunction();\n                    const data = new (tensorTypeToTypedArrayConstructor(type!))(arrayBuffer);\n                    return data as Tensor.DataTypeMap[Tensor.GpuBufferDataTypes];\n                  },\n                  dispose: () => {\n                    if (wasm._OrtReleaseTensor(tensor) !== 0) {\n                      checkLastError(\"Can't release tensor.\");\n                    }\n                  },\n                },\n                'gpu-buffer',\n              ]);\n            } else {\n              output.push([\n                type,\n                dims,\n                {\n                  gpuBuffer,\n                  download: wasm.jsepCreateDownloader!(gpuBuffer, bufferSize, type),\n                  dispose: () => {\n                    if (wasm._OrtReleaseTensor(tensor) !== 0) {\n                      checkLastError(\"Can't release tensor.\");\n                    }\n                  },\n                },\n                'gpu-buffer',\n              ]);\n            }\n          } else if (preferredLocation === 'ml-tensor' && size > 0) {\n            const ensureTensor = wasm.webnnEnsureTensor;\n            const isGraphInputOutputTypeSupported = wasm.webnnIsGraphInputOutputTypeSupported;\n            if (!ensureTensor || !isGraphInputOutputTypeSupported) {\n              throw new Error('preferredLocation \"ml-tensor\" is not supported without using WebNN.');\n            }\n            const tensorSize = calculateTensorSizeInBytes(dataType, size);\n            if (tensorSize === undefined || !isMLTensorSupportedType(type)) {\n              throw new Error(`Unsupported data type: ${type}`);\n            }\n            if (!isGraphInputOutputTypeSupported(sessionId, type, false)) {\n              throw new Error(\n                `preferredLocation \"ml-tensor\" for ${type} output is not supported by current WebNN Context.`,\n              );\n            }\n\n            // If the graph has been partitioned, the output tensor may have not been created. For this reason, we use\n            // ensureTensor to get/create the MLTensor. In which case, we don't need to copy the data if a new tensor\n            // has been created.\n            const mlTensor = await ensureTensor(sessionId, dataOffset, dataType, dims, false);\n\n            // do not release the tensor right now. it will be released when user calls tensor.dispose().\n            keepOutputTensor = true;\n\n            output.push([\n              type,\n              dims,\n              {\n                mlTensor,\n                download: wasm.webnnCreateMLTensorDownloader!(dataOffset, type),\n                dispose: () => {\n                  wasm.webnnReleaseTensorId!(dataOffset);\n                  wasm._OrtReleaseTensor(tensor);\n                },\n              },\n              'ml-tensor',\n            ]);\n          } else if (preferredLocation === 'ml-tensor-cpu-output' && size > 0) {\n            const data = wasm.webnnCreateMLTensorDownloader!(dataOffset, type as Tensor.MLTensorDataTypes)();\n            const index = output.length;\n            // Delay the data download and releasing the tensor until we can wait for all output tensors to be downloaded.\n            keepOutputTensor = true;\n            outputPromises.push(\n              (async () => {\n                const result: [number, Tensor.DataType] = [index, await data];\n                wasm.webnnReleaseTensorId!(dataOffset);\n                wasm._OrtReleaseTensor(tensor);\n                return result;\n              })(),\n            );\n            output.push([type, dims, [], 'cpu']);\n          } else {\n            const typedArrayConstructor = tensorTypeToTypedArrayConstructor(type);\n            const data = new typedArrayConstructor(size);\n            new Uint8Array(data.buffer, data.byteOffset, data.byteLength).set(\n              wasm.HEAPU8.subarray(dataOffset, dataOffset + data.byteLength),\n            );\n            output.push([type, dims, data, 'cpu']);\n          }\n        }\n      } finally {\n        wasm.stackRestore(beforeGetTensorDataStack);\n        if (type === 'string' && dataOffset) {\n          wasm._free(dataOffset);\n        }\n        if (!keepOutputTensor) {\n          wasm._OrtReleaseTensor(tensor);\n        }\n      }\n    }\n\n    if (ioBindingState && !enableGraphCapture) {\n      if (wasm._OrtClearBoundOutputs(ioBindingState.handle) !== 0) {\n        checkLastError(\"Can't clear bound outputs.\");\n      }\n      activeSessions.set(sessionId, [\n        sessionHandle,\n        inputNamesUTF8Encoded,\n        outputNamesUTF8Encoded,\n        ioBindingState,\n        enableGraphCapture,\n        false,\n      ]);\n    }\n    // Wait for all output tensor data to be downloaded.\n    for (const [index, data] of await Promise.all(outputPromises)) {\n      output[index][2] = data;\n    }\n    TRACE_EVENT_END('wasm ProcessOutputTensor');\n    return output;\n  } finally {\n    wasm.webnnOnRunEnd?.(sessionHandle);\n\n    wasm.stackRestore(beforeRunStack);\n\n    if (!BUILD_DEFS.DISABLE_WEBGPU) {\n      inputTensors.forEach((t) => {\n        if (t && t[3] === 'gpu-buffer') {\n          wasm.webgpuUnregisterBuffer!(t[2].gpuBuffer);\n        }\n      });\n      outputTensors.forEach((t) => {\n        if (t && t[3] === 'gpu-buffer') {\n          wasm.webgpuUnregisterBuffer!(t[2].gpuBuffer);\n        }\n      });\n    }\n    inputTensorHandles.forEach((v) => wasm._OrtReleaseTensor(v));\n    outputTensorHandles.forEach((v) => wasm._OrtReleaseTensor(v));\n    inputOutputAllocs.forEach((p) => wasm._free(p));\n\n    if (runOptionsHandle !== 0) {\n      wasm._OrtReleaseRunOptions(runOptionsHandle);\n    }\n    runOptionsAllocs.forEach((p) => wasm._free(p));\n  }\n};\n\n/**\n * end profiling\n */\nexport const endProfiling = (sessionId: number): void => {\n  const wasm = getInstance();\n  const session = activeSessions.get(sessionId);\n  if (!session) {\n    throw new Error('invalid session id');\n  }\n  const sessionHandle = session[0];\n\n  // profile file name is not used yet, but it must be freed.\n  const profileFileName = wasm._OrtEndProfiling(sessionHandle);\n  if (profileFileName === 0) {\n    checkLastError(\"Can't get an profile file name.\");\n  }\n  wasm._OrtFree(profileFileName);\n};\n\nexport const extractTransferableBuffers = (tensors: readonly SerializableTensorMetadata[]): ArrayBufferLike[] => {\n  const buffers: ArrayBufferLike[] = [];\n  for (const tensor of tensors) {\n    const data = tensor[2];\n    if (!Array.isArray(data) && 'buffer' in data) {\n      buffers.push(data.buffer);\n    }\n  }\n  return buffers;\n};\n","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\n\nimport { env, InferenceSession } from 'onnxruntime-common';\n\nimport {\n  OrtWasmMessage,\n  SerializableInternalBuffer,\n  SerializableSessionMetadata,\n  SerializableTensorMetadata,\n  TensorMetadata,\n} from './proxy-messages';\nimport * as core from './wasm-core-impl';\nimport { initializeWebAssembly } from './wasm-factory';\nimport {\n  importProxyWorker,\n  inferWasmPathPrefixFromScriptSrc,\n  isEsmImportMetaUrlHardcodedAsFileUri,\n} from './wasm-utils-import';\n\nconst isProxy = (): boolean => !!env.wasm.proxy && typeof document !== 'undefined';\nlet proxyWorker: Worker | undefined;\nlet initializing = false;\nlet initialized = false;\nlet aborted = false;\nlet temporaryObjectUrl: string | undefined;\n\ntype PromiseCallbacks<T = void> = [resolve: (result: T) => void, reject: (reason: unknown) => void];\nlet initWasmCallbacks: PromiseCallbacks;\nconst queuedCallbacks: Map<OrtWasmMessage['type'], Array<PromiseCallbacks<unknown>>> = new Map();\n\nconst enqueueCallbacks = (type: OrtWasmMessage['type'], callbacks: PromiseCallbacks<unknown>): void => {\n  const queue = queuedCallbacks.get(type);\n  if (queue) {\n    queue.push(callbacks);\n  } else {\n    queuedCallbacks.set(type, [callbacks]);\n  }\n};\n\nconst ensureWorker = (): void => {\n  if (initializing || !initialized || aborted || !proxyWorker) {\n    throw new Error('worker not ready');\n  }\n};\n\nconst onProxyWorkerMessage = (ev: MessageEvent<OrtWasmMessage>): void => {\n  switch (ev.data.type) {\n    case 'init-wasm':\n      initializing = false;\n      if (ev.data.err) {\n        aborted = true;\n        initWasmCallbacks[1](ev.data.err);\n      } else {\n        initialized = true;\n        initWasmCallbacks[0]();\n      }\n      if (temporaryObjectUrl) {\n        URL.revokeObjectURL(temporaryObjectUrl);\n        temporaryObjectUrl = undefined;\n      }\n      break;\n    case 'init-ep':\n    case 'copy-from':\n    case 'create':\n    case 'release':\n    case 'run':\n    case 'end-profiling': {\n      const callbacks = queuedCallbacks.get(ev.data.type)!;\n      if (ev.data.err) {\n        callbacks.shift()![1](ev.data.err);\n      } else {\n        callbacks.shift()![0](ev.data.out!);\n      }\n      break;\n    }\n    default:\n  }\n};\n\nexport const initializeWebAssemblyAndOrtRuntime = async (): Promise<void> => {\n  if (initialized) {\n    return;\n  }\n  if (initializing) {\n    throw new Error(\"multiple calls to 'initWasm()' detected.\");\n  }\n  if (aborted) {\n    throw new Error(\"previous call to 'initWasm()' failed.\");\n  }\n\n  initializing = true;\n\n  if (!BUILD_DEFS.DISABLE_WASM_PROXY && isProxy()) {\n    return new Promise<void>((resolve, reject) => {\n      proxyWorker?.terminate();\n\n      void importProxyWorker().then(([objectUrl, worker]) => {\n        try {\n          proxyWorker = worker;\n          proxyWorker.onerror = (ev: ErrorEvent) => reject(ev);\n          proxyWorker.onmessage = onProxyWorkerMessage;\n          initWasmCallbacks = [resolve, reject];\n          const message: OrtWasmMessage = { type: 'init-wasm', in: env };\n\n          // if the proxy worker is loaded from a blob URL, we need to make sure the path information is not lost.\n          //\n          // when `env.wasm.wasmPaths` is not set, we need to pass the path information to the worker.\n          //\n          if (!BUILD_DEFS.ENABLE_BUNDLE_WASM_JS && !message.in!.wasm.wasmPaths && objectUrl) {\n            // for a build not bundled the wasm JS, we need to pass the path prefix to the worker.\n            // the path prefix will be used to resolve the path to both the wasm JS and the wasm file.\n            const inferredWasmPathPrefix = inferWasmPathPrefixFromScriptSrc();\n            if (inferredWasmPathPrefix) {\n              message.in!.wasm.wasmPaths = inferredWasmPathPrefix;\n            }\n          }\n\n          if (\n            BUILD_DEFS.IS_ESM &&\n            BUILD_DEFS.ENABLE_BUNDLE_WASM_JS &&\n            !message.in!.wasm.wasmPaths &&\n            (objectUrl || isEsmImportMetaUrlHardcodedAsFileUri)\n          ) {\n            // for a build bundled the wasm JS, if either of the following conditions is met:\n            // - the proxy worker is loaded from a blob URL\n            // - `import.meta.url` is a file URL, it means it is overwritten by the bundler.\n            //\n            // in either case, the path information is lost, we need to pass the path of the .wasm file to the worker.\n            // we need to use the bundler preferred URL format:\n            // new URL('filename', import.meta.url)\n            // so that the bundler can handle the file using corresponding loaders.\n            message.in!.wasm.wasmPaths = {\n              wasm: !BUILD_DEFS.DISABLE_JSEP\n                ? new URL('ort-wasm-simd-threaded.jsep.wasm', BUILD_DEFS.ESM_IMPORT_META_URL).href\n                : BUILD_DEFS.ENABLE_JSPI\n                  ? new URL('ort-wasm-simd-threaded.jspi.wasm', BUILD_DEFS.ESM_IMPORT_META_URL).href\n                  : !BUILD_DEFS.DISABLE_WEBGPU\n                    ? new URL('ort-wasm-simd-threaded.asyncify.wasm', BUILD_DEFS.ESM_IMPORT_META_URL).href\n                    : new URL('ort-wasm-simd-threaded.wasm', BUILD_DEFS.ESM_IMPORT_META_URL).href,\n            };\n          }\n          proxyWorker.postMessage(message);\n          temporaryObjectUrl = objectUrl;\n        } catch (e) {\n          reject(e);\n        }\n      }, reject);\n    });\n  } else {\n    try {\n      await initializeWebAssembly(env.wasm);\n      await core.initRuntime(env);\n      initialized = true;\n    } catch (e) {\n      aborted = true;\n      throw e;\n    } finally {\n      initializing = false;\n    }\n  }\n};\n\nexport const initializeOrtEp = async (epName: string): Promise<void> => {\n  if (!BUILD_DEFS.DISABLE_WASM_PROXY && isProxy()) {\n    ensureWorker();\n    return new Promise<void>((resolve, reject) => {\n      enqueueCallbacks('init-ep', [resolve, reject]);\n      const message: OrtWasmMessage = { type: 'init-ep', in: { epName, env } };\n      proxyWorker!.postMessage(message);\n    });\n  } else {\n    await core.initEp(env, epName);\n  }\n};\n\nexport const copyFromExternalBuffer = async (buffer: Uint8Array): Promise<SerializableInternalBuffer> => {\n  if (!BUILD_DEFS.DISABLE_WASM_PROXY && isProxy()) {\n    ensureWorker();\n    return new Promise<SerializableInternalBuffer>((resolve, reject) => {\n      enqueueCallbacks('copy-from', [resolve, reject]);\n      const message: OrtWasmMessage = { type: 'copy-from', in: { buffer } };\n      proxyWorker!.postMessage(message, [buffer.buffer]);\n    });\n  } else {\n    return core.copyFromExternalBuffer(buffer);\n  }\n};\n\nexport const createSession = async (\n  model: SerializableInternalBuffer | Uint8Array,\n  options?: InferenceSession.SessionOptions,\n): Promise<SerializableSessionMetadata> => {\n  if (!BUILD_DEFS.DISABLE_WASM_PROXY && isProxy()) {\n    // check unsupported options\n    if (options?.preferredOutputLocation) {\n      throw new Error('session option \"preferredOutputLocation\" is not supported for proxy.');\n    }\n    ensureWorker();\n    return new Promise<SerializableSessionMetadata>((resolve, reject) => {\n      enqueueCallbacks('create', [resolve, reject]);\n      const message: OrtWasmMessage = { type: 'create', in: { model, options: { ...options } } };\n      const transferable: Transferable[] = [];\n      if (model instanceof Uint8Array) {\n        transferable.push(model.buffer);\n      }\n      proxyWorker!.postMessage(message, transferable);\n    });\n  } else {\n    return core.createSession(model, options);\n  }\n};\n\nexport const releaseSession = async (sessionId: number): Promise<void> => {\n  if (!BUILD_DEFS.DISABLE_WASM_PROXY && isProxy()) {\n    ensureWorker();\n    return new Promise<void>((resolve, reject) => {\n      enqueueCallbacks('release', [resolve, reject]);\n      const message: OrtWasmMessage = { type: 'release', in: sessionId };\n      proxyWorker!.postMessage(message);\n    });\n  } else {\n    core.releaseSession(sessionId);\n  }\n};\n\nexport const run = async (\n  sessionId: number,\n  inputIndices: number[],\n  inputs: TensorMetadata[],\n  outputIndices: number[],\n  outputs: Array<TensorMetadata | null>,\n  options: InferenceSession.RunOptions,\n): Promise<TensorMetadata[]> => {\n  if (!BUILD_DEFS.DISABLE_WASM_PROXY && isProxy()) {\n    // check inputs location\n    if (inputs.some((t) => t[3] !== 'cpu')) {\n      throw new Error('input tensor on GPU is not supported for proxy.');\n    }\n    // check outputs location\n    if (outputs.some((t) => t)) {\n      throw new Error('pre-allocated output tensor is not supported for proxy.');\n    }\n    ensureWorker();\n    return new Promise<SerializableTensorMetadata[]>((resolve, reject) => {\n      enqueueCallbacks('run', [resolve, reject]);\n      const serializableInputs = inputs as SerializableTensorMetadata[]; // every input is on CPU.\n      const message: OrtWasmMessage = {\n        type: 'run',\n        in: { sessionId, inputIndices, inputs: serializableInputs, outputIndices, options },\n      };\n      proxyWorker!.postMessage(message, core.extractTransferableBuffers(serializableInputs));\n    });\n  } else {\n    return core.run(sessionId, inputIndices, inputs, outputIndices, outputs, options);\n  }\n};\n\nexport const endProfiling = async (sessionId: number): Promise<void> => {\n  if (!BUILD_DEFS.DISABLE_WASM_PROXY && isProxy()) {\n    ensureWorker();\n    return new Promise<void>((resolve, reject) => {\n      enqueueCallbacks('end-profiling', [resolve, reject]);\n      const message: OrtWasmMessage = { type: 'end-profiling', in: sessionId };\n      proxyWorker!.postMessage(message);\n    });\n  } else {\n    core.endProfiling(sessionId);\n  }\n};\n","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\n\nimport {\n  InferenceSession,\n  InferenceSessionHandler,\n  SessionHandler,\n  Tensor,\n  TRACE_FUNC_BEGIN,\n  TRACE_FUNC_END,\n} from 'onnxruntime-common';\n\nimport { SerializableInternalBuffer, TensorMetadata } from './proxy-messages';\nimport { copyFromExternalBuffer, createSession, endProfiling, releaseSession, run } from './proxy-wrapper';\nimport { isGpuBufferSupportedType, isMLTensorSupportedType } from './wasm-common';\nimport { isNode } from './wasm-utils-env';\nimport { loadFile } from './wasm-utils-load-file';\n\nexport const encodeTensorMetadata = (tensor: Tensor, getName: () => string): TensorMetadata => {\n  switch (tensor.location) {\n    case 'cpu':\n      return [tensor.type, tensor.dims, tensor.data, 'cpu'];\n    case 'gpu-buffer':\n      return [tensor.type, tensor.dims, { gpuBuffer: tensor.gpuBuffer }, 'gpu-buffer'];\n    case 'ml-tensor':\n      return [tensor.type, tensor.dims, { mlTensor: tensor.mlTensor }, 'ml-tensor'];\n    default:\n      throw new Error(`invalid data location: ${tensor.location} for ${getName()}`);\n  }\n};\n\nexport const decodeTensorMetadata = (tensor: TensorMetadata): Tensor => {\n  switch (tensor[3]) {\n    case 'cpu':\n      return new Tensor(tensor[0], tensor[2], tensor[1]);\n    case 'gpu-buffer': {\n      const dataType = tensor[0];\n      if (!isGpuBufferSupportedType(dataType)) {\n        throw new Error(`not supported data type: ${dataType} for deserializing GPU tensor`);\n      }\n      const { gpuBuffer, download, dispose } = tensor[2];\n      return Tensor.fromGpuBuffer(gpuBuffer, { dataType, dims: tensor[1], download, dispose });\n    }\n    case 'ml-tensor': {\n      const dataType = tensor[0];\n      if (!isMLTensorSupportedType(dataType)) {\n        throw new Error(`not supported data type: ${dataType} for deserializing MLTensor tensor`);\n      }\n      const { mlTensor, download, dispose } = tensor[2];\n      return Tensor.fromMLTensor(mlTensor, { dataType, dims: tensor[1], download, dispose });\n    }\n    default:\n      throw new Error(`invalid data location: ${tensor[3]}`);\n  }\n};\n\nexport class OnnxruntimeWebAssemblySessionHandler implements InferenceSessionHandler {\n  private sessionId: number;\n\n  inputNames: readonly string[];\n  outputNames: readonly string[];\n  inputMetadata: readonly InferenceSession.ValueMetadata[];\n  outputMetadata: readonly InferenceSession.ValueMetadata[];\n\n  async fetchModelAndCopyToWasmMemory(path: string): Promise<SerializableInternalBuffer> {\n    // fetch model from url and move to wasm heap.\n    return copyFromExternalBuffer(await loadFile(path));\n  }\n\n  async loadModel(pathOrBuffer: string | Uint8Array, options?: InferenceSession.SessionOptions): Promise<void> {\n    TRACE_FUNC_BEGIN();\n    let model: Parameters<typeof createSession>[0];\n\n    if (typeof pathOrBuffer === 'string') {\n      if (isNode) {\n        // node\n        model = await loadFile(pathOrBuffer);\n      } else {\n        // browser\n        // fetch model and copy to wasm heap.\n        model = await this.fetchModelAndCopyToWasmMemory(pathOrBuffer);\n      }\n    } else {\n      model = pathOrBuffer;\n    }\n\n    [this.sessionId, this.inputNames, this.outputNames, this.inputMetadata, this.outputMetadata] = await createSession(\n      model,\n      options,\n    );\n    TRACE_FUNC_END();\n  }\n\n  async dispose(): Promise<void> {\n    return releaseSession(this.sessionId);\n  }\n\n  async run(\n    feeds: SessionHandler.FeedsType,\n    fetches: SessionHandler.FetchesType,\n    options: InferenceSession.RunOptions,\n  ): Promise<SessionHandler.ReturnType> {\n    TRACE_FUNC_BEGIN();\n    const inputArray: Tensor[] = [];\n    const inputIndices: number[] = [];\n    Object.entries(feeds).forEach((kvp) => {\n      const name = kvp[0];\n      const tensor = kvp[1];\n      const index = this.inputNames.indexOf(name);\n      if (index === -1) {\n        throw new Error(`invalid input '${name}'`);\n      }\n      inputArray.push(tensor);\n      inputIndices.push(index);\n    });\n\n    const outputArray: Array<Tensor | null> = [];\n    const outputIndices: number[] = [];\n    Object.entries(fetches).forEach((kvp) => {\n      const name = kvp[0];\n      const tensor = kvp[1];\n      const index = this.outputNames.indexOf(name);\n      if (index === -1) {\n        throw new Error(`invalid output '${name}'`);\n      }\n      outputArray.push(tensor);\n      outputIndices.push(index);\n    });\n\n    const inputs = inputArray.map((t, i) =>\n      encodeTensorMetadata(t, () => `input \"${this.inputNames[inputIndices[i]]}\"`),\n    );\n    const outputs = outputArray.map((t, i) =>\n      t ? encodeTensorMetadata(t, () => `output \"${this.outputNames[outputIndices[i]]}\"`) : null,\n    );\n\n    const results = await run(this.sessionId, inputIndices, inputs, outputIndices, outputs, options);\n\n    const resultMap: SessionHandler.ReturnType = {};\n    for (let i = 0; i < results.length; i++) {\n      resultMap[this.outputNames[outputIndices[i]]] = outputArray[i] ?? decodeTensorMetadata(results[i]);\n    }\n    TRACE_FUNC_END();\n    return resultMap;\n  }\n\n  startProfiling(): void {\n    // TODO: implement profiling\n  }\n\n  endProfiling(): void {\n    void endProfiling(this.sessionId);\n  }\n}\n","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\n\nimport { Backend, env, InferenceSession, InferenceSessionHandler } from 'onnxruntime-common';\n\nimport { initializeOrtEp, initializeWebAssemblyAndOrtRuntime } from './wasm/proxy-wrapper';\nimport { OnnxruntimeWebAssemblySessionHandler } from './wasm/session-handler-inference';\n\n/**\n * This function initializes all flags for WebAssembly.\n *\n * Those flags are accessible from `ort.env.wasm`. Users are allow to set those flags before the first inference session\n * being created, to override default value.\n */\nexport const initializeFlags = (): void => {\n  if (typeof env.wasm.initTimeout !== 'number' || env.wasm.initTimeout < 0) {\n    env.wasm.initTimeout = 0;\n  }\n\n  const simd = env.wasm.simd;\n  if (typeof simd !== 'boolean' && simd !== undefined && simd !== 'fixed' && simd !== 'relaxed') {\n    // eslint-disable-next-line no-console\n    console.warn(\n      `Property \"env.wasm.simd\" is set to unknown value \"${simd}\". Reset it to \\`false\\` and ignore SIMD feature checking.`,\n    );\n    env.wasm.simd = false;\n  }\n\n  if (typeof env.wasm.proxy !== 'boolean') {\n    env.wasm.proxy = false;\n  }\n\n  if (typeof env.wasm.trace !== 'boolean') {\n    env.wasm.trace = false;\n  }\n\n  if (typeof env.wasm.numThreads !== 'number' || !Number.isInteger(env.wasm.numThreads) || env.wasm.numThreads <= 0) {\n    // The following logic only applies when `ort.env.wasm.numThreads` is not set by user. We will always honor user's\n    // setting if it is provided.\n\n    // Browser: when crossOriginIsolated is false, SharedArrayBuffer is not available so WebAssembly threads will not\n    // work. In this case, we will set numThreads to 1.\n    //\n    // There is an exception: when the browser is configured to force-enable SharedArrayBuffer (e.g. Chromuim with\n    // --enable-features=SharedArrayBuffer), it is possible that `self.crossOriginIsolated` is false and\n    // SharedArrayBuffer is available at the same time. This is usually for testing. In this case,  we will still set\n    // numThreads to 1 here. If we want to enable multi-threading in test, we should set `ort.env.wasm.numThreads` to a\n    // value greater than 1.\n    if (typeof self !== 'undefined' && !self.crossOriginIsolated) {\n      env.wasm.numThreads = 1;\n    } else {\n      const numCpuLogicalCores =\n        typeof navigator === 'undefined' ? require('node:os').cpus().length : navigator.hardwareConcurrency;\n      env.wasm.numThreads = Math.min(4, Math.ceil((numCpuLogicalCores || 1) / 2));\n    }\n  }\n};\n\nexport class OnnxruntimeWebAssemblyBackend implements Backend {\n  /**\n   * This function initializes the WebAssembly backend.\n   *\n   * This function will be called only once for each backend name. It will be called the first time when\n   * `ort.InferenceSession.create()` is called with a registered backend name.\n   *\n   * @param backendName - the registered backend name.\n   */\n  async init(backendName: string): Promise<void> {\n    // populate wasm flags\n    initializeFlags();\n\n    // init wasm\n    await initializeWebAssemblyAndOrtRuntime();\n\n    // performe EP specific initialization\n    await initializeOrtEp(backendName);\n  }\n  createInferenceSessionHandler(\n    path: string,\n    options?: InferenceSession.SessionOptions,\n  ): Promise<InferenceSessionHandler>;\n  createInferenceSessionHandler(\n    buffer: Uint8Array,\n    options?: InferenceSession.SessionOptions,\n  ): Promise<InferenceSessionHandler>;\n  async createInferenceSessionHandler(\n    pathOrBuffer: string | Uint8Array,\n    options?: InferenceSession.SessionOptions,\n  ): Promise<InferenceSessionHandler> {\n    const handler = new OnnxruntimeWebAssemblySessionHandler();\n    await handler.loadModel(pathOrBuffer, options);\n    return handler;\n  }\n}\n\nexport const wasmBackend = new OnnxruntimeWebAssemblyBackend();\n","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\n\n/* eslint-disable @typescript-eslint/no-var-requires, @typescript-eslint/no-require-imports */\n\n// We use \"require\" instead of \"import\" here because import statement must be put in top level. Our current code does\n// not allow bundler to tree-shaking code as expected because some codes are treated as having side effects.\n// So we import code inside the if-clause to allow bundler remove the code safely.\n\nexport * from 'onnxruntime-common';\nimport * as ort from 'onnxruntime-common';\nexport default ort;\n\nimport { registerBackend, env } from 'onnxruntime-common';\nimport { version } from './version';\n\nif (!BUILD_DEFS.DISABLE_WEBGL) {\n  const onnxjsBackend = require('./backend-onnxjs').onnxjsBackend;\n  registerBackend('webgl', onnxjsBackend, -10);\n}\n\nif (!BUILD_DEFS.DISABLE_JSEP && !BUILD_DEFS.DISABLE_WEBGPU) {\n  throw new Error(\n    'The current build is specified to enable both JSEP and WebGPU EP. This is not a valid configuration. ' +\n      'JSEP and WebGPU EPs cannot be enabled at the same time.',\n  );\n}\n\nif (!BUILD_DEFS.DISABLE_WEBNN && BUILD_DEFS.DISABLE_JSEP && BUILD_DEFS.DISABLE_WEBGPU) {\n  throw new Error(\n    'The current build is specified to enable WebNN EP without JSEP or WebGPU EP. This is not a valid configuration. ' +\n      'WebNN EP requires either JSEP or WebGPU EP to be enabled.',\n  );\n}\n\nif (!BUILD_DEFS.DISABLE_WASM) {\n  const wasmBackend = require('./backend-wasm').wasmBackend;\n  if (!BUILD_DEFS.DISABLE_JSEP || !BUILD_DEFS.DISABLE_WEBGPU) {\n    registerBackend('webgpu', wasmBackend, 5);\n  }\n  if (!BUILD_DEFS.DISABLE_WEBNN) {\n    registerBackend('webnn', wasmBackend, 5);\n  }\n  registerBackend('cpu', wasmBackend, 10);\n  registerBackend('wasm', wasmBackend, 10);\n}\n\nObject.defineProperty(env.versions, 'web', { value: version, enumerable: true });\n","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\n\n// This file is generated by /js/scripts/update-version.ts\n// Do not modify file content manually.\n\nexport const version = '1.25.0-dev.20260209-a3749f1353';\n"]}